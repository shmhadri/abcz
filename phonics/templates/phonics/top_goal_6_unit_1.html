{% load static %}
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top Goal 6 Unit 1 | Movie Genres üé¨</title>
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Tajawal:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <style>
        :root {
            --primary: #7209b7;  /* Movie Purple */
            --primary-light: #9d4edd;
            --primary-dark: #3a0ca3;
            --secondary: #f72585; /* Popcorn Pink/Red */
            --accent: #ffd166;    /* Gold */
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --success: #06d6a0;
            --error: #ef476f;
            --bg-gradient: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            --glass-bg: rgba(255, 255, 255, 0.95);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            --card-border: 1px solid rgba(255, 255, 255, 0.18);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Fredoka', 'Tajawal', sans-serif;
            background: var(--bg-gradient);
            background-attachment: fixed;
            color: var(--dark);
            min-height: 100vh;
            padding-bottom: 80px;
        }

        /* --- NAVIGATION BACK BUTTON --- */
        .back-btn {
            position: fixed; top: 20px; left: 20px; 
            background: white; padding: 14px; border-radius: 50%; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); z-index: 200; 
            color: var(--dark); transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); text-decoration: none;
            display: flex; align-items: center; justify-content: center;
        }
        .back-btn:hover { transform: scale(1.15) rotate(-10deg); color: var(--secondary); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }

        /* --- NAVIGATION DROPDOWN --- */
        .nav-dropdown-btn {
            position: fixed; top: 20px; right: 20px; 
            background: white; padding: 12px 25px; border-radius: 30px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); border: none; cursor: pointer; 
            display: flex; align-items: center; gap: 10px; font-weight: bold; 
            font-family: 'Tajawal'; color: var(--dark); z-index: 200; 
            transition: all 0.3s ease;
        }
        .nav-dropdown-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        
        .nav-dropdown-content {
            display: none; position: absolute; top: 75px; right: 20px; 
            background: white; min-width: 240px; border-radius: 20px; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.2); overflow: hidden; 
            animation: fadeIn 0.3s; z-index: 199; border: 1px solid #eee;
        }
        .nav-item {
            display: flex; align-items: center; gap: 12px; padding: 16px 20px; 
            text-decoration: none; color: var(--dark); border-bottom: 1px solid #f3f4f6; 
            transition: all 0.2s; font-weight: 500;
        }
        .nav-item:hover { background: #f8f9fa; padding-right: 25px; color: var(--primary); }
        .nav-item:last-child { border-bottom: none; }

        .app-container {
            max-width: 1100px;
            margin: 0 auto;
            position: relative;
        }

        /* --- HEADER --- */
        .cinema-header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, #240046 100%);
            color: white;
            padding: 100px 20px 80px;
            border-radius: 0 0 50px 50px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 40px rgba(58, 12, 163, 0.4);
            margin-bottom: 50px;
        }

        .main-title { 
            font-size: 3.5rem; margin: 0; color: var(--accent); 
            text-shadow: 0 4px 0 rgba(0,0,0,0.2); 
            letter-spacing: 1px;
            margin-bottom: 15px;
        }
        .sub-title { font-size: 2.2rem; margin: 10px 0; font-weight: 400; opacity: 0.95; }
        .arabic-sub { 
            font-family: 'Tajawal'; font-size: 1.5rem; color: #e2e8f0; 
            margin-top: 10px; font-weight: 500;
        }
        
        /* Header Elements */
        .film-strip {
            position: absolute; width: 100%; height: 20px;
            background-image: repeating-linear-gradient(90deg, #000, #000 20px, transparent 20px, transparent 40px);
            opacity: 0.3;
        }
        .film-strip.top { top: 15px; left: 0; }
        .film-strip.bottom { bottom: 15px; left: 0; }

        .header-decoration span { font-size: 5rem; position: absolute; opacity: 0.2; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3)); }
        .film-reel { top: 40px; left: 40px; animation: spin 20s linear infinite; }
        .popcorn { bottom: 40px; right: 40px; animation: float 6s ease-in-out infinite; }
        .clapper { top: 40px; right: 80px; font-size: 3rem !important; transform: rotate(15deg); opacity: 0.15; }

        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }

        /* --- TABS --- */
        .nav-tabs-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: -75px;
            padding-bottom: 30px;
            position: relative;
            z-index: 10;
            flex-wrap: wrap;
        }

        .nav-tab {
            background: white;
            border: none;
            padding: 18px 35px;
            border-radius: 50px;
            font-weight: 700;
            font-family: 'Tajawal';
            color: #555;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-size: 1.15rem;
            display: flex;
            align-items: center;
            gap: 10px;
            border: 2px solid transparent;
        }

        .nav-tab i { font-size: 1.3rem; transition: transform 0.3s; }

        .nav-tab:hover { transform: translateY(-5px); color: var(--primary); }
        .nav-tab:hover i { transform: scale(1.2); }

        .nav-tab.active {
            background: var(--secondary);
            color: white;
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(247, 37, 133, 0.4);
            border-color: rgba(255,255,255,0.2);
        }

        /* --- CONTENT AREA --- */
        .content-area {
            padding: 80px 20px 20px 20px;
            min-height: 500px;
        }

        /* VOCAB GRID */
        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 30px;
            padding: 10px;
        }

        .vocab-card {
            background: white;
            border-radius: 30px;
            padding: 30px 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border: 2px solid #fff;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .vocab-card::before {
            content: '';
            position: absolute; top: 0; left: 0; width: 100%; height: 6px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            opacity: 0; transition: opacity 0.3s;
        }

        .vocab-card:hover { 
            transform: translateY(-10px); 
            box-shadow: 0 20px 40px rgba(0,0,0,0.12);
            border-color: rgba(114, 9, 183, 0.1);
        }
        .vocab-card:hover::before { opacity: 1; }

        .card-icon { 
            font-size: 5rem; margin-bottom: 20px; display: block; 
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
            transition: transform 0.3s;
        }
        .vocab-card:hover .card-icon { transform: scale(1.1) rotate(5deg); }

        .card-word { font-size: 1.6rem; font-weight: 700; color: var(--dark); margin-bottom: 8px; font-family: 'Fredoka'; }
        .card-trans { font-family: 'Tajawal'; color: #666; font-size: 1.3rem; font-weight: 500; margin-bottom: 25px;}
        
        .card-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .btn-icon {
            background: #f0f2f5;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-size: 1.4rem;
            display: flex; align-items: center; justify-content: center;
            color: #555;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .btn-icon:hover { background: var(--primary); color: white; transform: scale(1.1); box-shadow: 0 6px 15px rgba(114, 9, 183, 0.3); }
        .btn-icon.listening { background: var(--secondary); color: white; animation: pulse 1s infinite; }
        .btn-icon.correct { background: var(--success); color: white; }
        .btn-icon.wrong { background: var(--error); color: white; animation: shake 0.4s; }
        
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(247, 37, 133, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(247, 37, 133, 0); } 100% { box-shadow: 0 0 0 0 rgba(247, 37, 133, 0); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        /* READING */
        .reading-card {
            background: white;
            border-radius: 40px;
            padding: 60px;
            max-width: 900px;
            margin: 0 auto;
            box-shadow: 0 20px 50px rgba(0,0,0,0.08);
            text-align: center;
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
        }
        
        .reading-icon { font-size: 4rem; margin-bottom: 20px; display: inline-block; background: #fff0f5; padding: 20px; border-radius: 50%; }
        .reading-title { font-size: 2.5rem; color: var(--primary-dark); margin-bottom: 40px; font-weight: 700; }

        .reading-text-box { 
            margin: 40px 0; text-align: left; background: #fafafa; padding: 40px; 
            border-radius: 30px; border-left: 8px solid var(--accent); 
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.03);
        }
        .english-text { font-size: 1.8rem; line-height: 1.9; color: var(--dark); margin-bottom: 30px; }
        .highlight-word { 
            background: linear-gradient(120deg, #ffeaa7 0%, #ffeaa7 100%);
            background-repeat: no-repeat;
            background-size: 100% 40%;
            background-position: 0 88%;
            cursor: pointer; padding: 0 4px; transition: all 0.2s; 
            border-radius: 4px;
        }
        .highlight-word:hover { background-size: 100% 100%; color: var(--dark); }
        .arabic-text { font-family: 'Tajawal'; font-size: 1.5rem; color: #666; text-align: right; line-height: 2; font-weight: 500; }
        .separator { margin: 30px 0; border: none; border-top: 2px dashed #ddd; }
        
        .reading-controls { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 40px; }

        .btn-action {
            padding: 18px 45px;
            border-radius: 50px;
            border: none;
            font-size: 1.2rem;
            font-family: 'Tajawal';
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex; align-items: center; gap: 12px;
        }
        .btn-play { 
            background: var(--primary); color: white; 
            box-shadow: 0 10px 25px rgba(114, 9, 183, 0.4); 
        }
        .btn-mic { 
            background: white; border: 2px solid var(--dark); color: var(--dark);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .btn-play:hover { transform: translateY(-4px); box-shadow: 0 15px 35px rgba(114, 9, 183, 0.5); background: var(--primary-light); }
        .btn-mic:hover { transform: translateY(-4px); background: var(--dark); color: white; border-color: var(--dark); }

        /* GAMES */
        .games-menu { display: flex; justify-content: center; gap: 20px; margin-bottom: 50px; flex-wrap: wrap; }
        .game-select-btn {
            background: white; border: 2px solid transparent; padding: 15px 30px; border-radius: 30px;
            font-family: 'Tajawal'; font-weight: bold; cursor: pointer; color: #777;
            transition: all 0.3s; font-size: 1.1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .game-select-btn:hover { background: white; color: var(--primary); transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
        .game-select-btn.active { 
            border-color: transparent; color: white; background: var(--primary); 
            box-shadow: 0 10px 25px rgba(114, 9, 183, 0.3); transform: translateY(-3px);
        }

        .game-container { 
            background: white; border-radius: 40px; padding: 50px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.08); text-align: center; 
            min-height: 500px; max-width: 900px; margin: 0 auto;
            position: relative; overflow: hidden;
            display: none; /* Hidden by default */
        }
        .game-container.active { display: block; animation: zoomIn 0.4s; }
        
        .game-header { margin-bottom: 40px; }
        .game-title { color: var(--primary-dark); font-size: 2.2rem; font-weight: 800; margin-bottom: 10px; }
        .game-instruction { color: #888; font-family: 'Tajawal'; font-size: 1.2rem; }

        /* Missing Letter */
        .word-display { 
            font-size: 5rem; letter-spacing: 15px; font-weight: 700; margin-bottom: 50px; 
            color: var(--dark); font-family: 'Courier New', monospace; 
            text-shadow: 2px 2px 0 rgba(0,0,0,0.1);
        }
        .options-container { display: flex; justify-content: center; gap: 25px; flex-wrap: wrap; }
        .option-btn { 
            width: 80px; height: 80px; font-size: 2.5rem; border-radius: 20px; 
            border: none; background: #fff; cursor: pointer; font-weight: 700; 
            transition: 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); color: var(--primary);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1); border-bottom: 6px solid #f0f0f0;
        }
        .option-btn:hover { transform: translateY(-5px); background: var(--primary); color: white; border-bottom-color: var(--primary-dark); }
        .option-btn:active { transform: translateY(2px); border-bottom-width: 0; margin-top: 6px; }

        /* Fill Blanks */
        .fill-blank-card { 
            margin-bottom: 30px; background: #f8faff; padding: 40px; 
            border-radius: 30px; border: 1px solid #eef2f5; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.03);
        }
        .sentence { font-size: 1.8rem; margin-bottom: 30px; font-weight: 600; color: #2d3748; line-height: 1.6; }
        .blank { 
            border-bottom: 4px solid var(--secondary); color: var(--secondary); 
            font-weight: bold; padding: 0 15px; display: inline-block; min-width: 80px; 
            text-align: center; transition: all 0.3s;
        }
        .blank.filled { border-bottom-color: transparent; background: var(--accent); color: #2d3748; border-radius: 8px; transform: scale(1.1); padding: 2px 15px; }
        
        .fb-options { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .fb-btn { 
            padding: 15px 35px; border-radius: 50px; border: 2px solid #e2e8f0; 
            background: white; cursor: pointer; font-weight: bold; font-size: 1.2rem; 
            transition: 0.2s; color: #4a5568;
        }
        .fb-btn:hover { border-color: var(--primary); color: var(--primary); transform: translateY(-3px); }
        .fb-btn.correct { background: var(--success); color: white; border-color: var(--success); }
        .fb-btn.wrong { background: var(--error); color: white; border-color: var(--error); }

        /* Matching */
        .matching-wrapper { margin: 0 auto; max-width: 800px; }
        .matching-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 30px;}
        .col-wrapper { display: flex; flex-direction: column; gap: 20px; }
        
        .match-card { 
            padding: 25px; background: white; border: 2px solid #f0f0f0; 
            border-radius: 20px; cursor: pointer; font-weight: 700; transition: 0.3s; 
            font-size: 1.3rem; box-shadow: 0 8px 15px rgba(0,0,0,0.03);
            display: flex; align-items: center; justify-content: center; height: 90px;
        }
        .match-card:hover { transform: scale(1.02); border-color: var(--primary-light); box-shadow: 0 10px 20px rgba(114, 9, 183, 0.1); }
        .match-card.selected { border-color: var(--secondary); background: #fff5f8; transform: scale(1.05); box-shadow: 0 10px 25px rgba(247, 37, 133, 0.2); }
        .match-card.matched { 
            border-color: var(--success); background: #e6fffa; color: var(--success); 
            opacity: 0.5; pointer-events: none; transform: scale(0.95);
        }
        .match-card.ar { font-family: 'Tajawal'; font-size: 1.4rem; }

        .round-indicator {
            background: #f0f2f5; display: inline-block; padding: 5px 20px; 
            border-radius: 20px; font-weight: bold; color: #666; margin-bottom: 20px;
        }

        /* Unscramble Game */
        .scramble-slots {
            display: flex; justify-content: center; gap: 12px; margin-bottom: 40px; 
            flex-wrap: wrap; min-height: 70px;
        }
        .letter-slot {
            width: 55px; height: 65px; border-bottom: 4px solid #e0e0e0; 
            display: flex; align-items: center; justify-content: center;
            font-size: 2.5rem; font-weight: 700; color: var(--primary);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .letter-slot.filled { border-bottom-color: var(--primary); transform: translateY(-5px); }
        .letter-slot.space { border-bottom: none; width: 30px; }
        
        .letter-pool {
            display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;
        }
        .tile-btn {
            width: 60px; height: 60px; background: white; border: 2px solid #f0f0f0;
            border-radius: 18px; font-size: 2rem; font-weight: bold; color: #555;
            cursor: pointer; transition: all 0.2s; box-shadow: 0 8px 15px rgba(0,0,0,0.05);
            display: flex; align-items: center; justify-content: center; user-select: none;
        }
        .tile-btn:hover { transform: translateY(-4px); border-color: var(--primary); color: var(--primary); box-shadow: 0 12px 20px rgba(114, 9, 183, 0.15); }
        .tile-btn.used { opacity: 0; pointer-events: none; transform: scale(0.8); }

        /* Media Queries Update */
        @media (max-width: 768px) {
            .letter-slot { width: 40px; height: 50px; font-size: 1.8rem; }
            .tile-btn { width: 45px; height: 45px; font-size: 1.5rem; }
        }
        .quiz-header-info { 
            display: flex; justify-content: space-between; border-bottom: 2px solid #f7f7f7; 
            padding-bottom: 25px; margin-bottom: 35px; font-weight: 700; color: #888; font-size: 1.1rem; 
        }
        .q-text { font-size: 2rem; font-weight: 800; margin-bottom: 50px; text-align: center; color: var(--dark); line-height: 1.4; }
        .q-options { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }
        .q-btn { 
            padding: 30px 25px; border: 3px solid #f0f2f5; background: white; border-radius: 25px; 
            font-size: 1.3rem; cursor: pointer; transition: 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            text-align: center; font-weight: 600; color: #555; display: flex; align-items: center; justify-content: center;
        }
        .q-btn:hover { border-color: var(--primary); background: #fdfaff; color: var(--primary); transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .q-btn.correct { background: var(--success); border-color: var(--success); color: white; box-shadow: 0 10px 20px rgba(6, 214, 160, 0.3); }
        .q-btn.wrong { background: var(--error); border-color: var(--error); color: white; opacity: 0.8; }

        .quiz-final { text-align: center; padding: 40px; }
        .trophy { font-size: 8rem; margin-bottom: 20px; display: block; animation: bounce 2s infinite; }
        .final-title { font-size: 3rem; color: var(--dark); margin-bottom: 15px; font-weight: 800; }
        .final-score { font-size: 4rem; font-weight: 900; color: var(--secondary); margin-bottom: 50px; text-shadow: 3px 3px 0 rgba(0,0,0,0.1); }
        
        .retry-btn { 
            padding: 20px 60px; background: var(--primary); color: white; border: none; 
            border-radius: 60px; font-size: 1.5rem; font-weight: bold; cursor: pointer; 
            box-shadow: 0 15px 30px rgba(114, 9, 183, 0.4); transition: 0.3s; 
        }
        .retry-btn:hover { transform: scale(1.05); background: var(--primary-light); }

        /* --- LESSON 7: READING ENHANCEMENTS --- */
        .vocab-highlight {
            color: #2563eb;
            font-weight: bold;
            font-size: 1.4rem;
            text-decoration: underline;
            text-decoration-color: #93c5fd;
            text-decoration-thickness: 2px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .vocab-highlight:hover {
            color: #1d4ed8;
            text-decoration-thickness: 3px;
            transform: scale(1.05);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Media Queries */
        @media (max-width: 768px) {
            .vocab-grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; }
            .card-icon { font-size: 3.5rem; }
            .card-word { font-size: 1.3rem; }
            .card-trans { font-size: 1.1rem; }
            .main-title { font-size: 2.5rem; }
            .sub-title { font-size: 1.5rem; }
            .nav-tabs-container { flex-direction: column; align-items: stretch; margin-top: -30px; }
            .nav-tab { justify-content: center; }
            .game-container { padding: 25px; }
            .word-display { font-size: 2.8rem; letter-spacing: 5px; }
            .options-container { gap: 10px; }
            .option-btn { width: 55px; height: 55px; font-size: 1.8rem; }
            .q-options { grid-template-columns: 1fr; }
            .matching-grid { gap: 15px; }
            .match-card { padding: 15px; font-size: 1rem; height: 70px; }
        }

        /* Celebration & Balloons */
        .celebration-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 1000; display: none;
            flex-direction: column; align-items: center; justify-content: center;
            animation: fadeIn 0.5s;
        }
        .celeb-content {
            background: white; padding: 50px; border-radius: 40px; text-align: center;
            max-width: 600px; width: 90%; position: relative;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
            animation: bounceIn 0.8s;
        }
        .celeb-title { font-size: 3.5rem; color: var(--primary); margin-bottom: 20px; font-family: 'Fredoka'; }
        .celeb-msg { font-size: 1.5rem; color: #555; margin-bottom: 30px; font-weight: 600; }
        .celeb-btn {
            background: linear-gradient(45deg, var(--secondary), var(--primary));
            color: white; border: none; padding: 15px 40px; font-size: 1.4rem;
            border-radius: 50px; cursor: pointer; transition: 0.3s; font-weight: bold;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .celeb-btn:hover { transform: scale(1.1); box-shadow: 0 15px 35px rgba(0,0,0,0.3); }

        .balloon {
            position: absolute; bottom: -20px; background-color: #ff4081;
            width: 30px; height: 40px; border-radius: 50%; opacity: 0.9;
            animation: floatUp 4s ease-in infinite;
        }
        /* GRAMMAR LESSON 2 */
        .grammar-chart-container {
            overflow-x: auto; margin-bottom: 50px; background: white; 
            border-radius: 30px; padding: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.05);
        }
        .grammar-table {
            width: 100%; border-collapse: collapse; min-width: 600px;
        }
        .grammar-table th, .grammar-table td {
            padding: 18px; text-align: center; border-bottom: 1px solid #eee;
            font-size: 1.1rem;
        }
        .grammar-table th {
            background: var(--primary); color: white; font-family: 'Tajawal';
        }
        .grammar-table tr:last-child td { border-bottom: none; }
        .grammar-table tr:hover { background: #f9f9f9; }
        
        .grammar-badge {
            background: var(--secondary); color: white; padding: 5px 15px; 
            border-radius: 20px; font-weight: bold; font-size: 0.9rem;
        }

        /* Pronoun Sorter */
        .sort-container {
            display: flex; gap: 15px; justify-content: center; margin-bottom: 50px; flex-wrap: wrap;
        }
        .sort-bucket {
            width: 45%; max-width: 200px; min-height: 200px; background: white; border-radius: 20px;
            border: 3px dashed #ccc; padding: 15px; text-align: center;
            transition: all 0.3s;
        }
        .sort-bucket.drag-over { background: #f0f7ff; border-color: var(--primary); transform: scale(1.05); }
        .bucket-title { font-size: 2rem; font-weight: 800; color: var(--primary); margin-bottom: 20px; }
        
        .pronoun-pool {
            display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-bottom: 30px;
        }
        .draggable-item {
            background: var(--accent); color: var(--dark); padding: 12px 25px;
            border-radius: 15px; font-weight: bold; cursor: grab; font-size: 1.2rem;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
            touch-action: none; /* Critical for mobile dragging */
            user-select: none;
            position: relative; /* For touch movement */
            margin: 5px;
            display: inline-block;
        }
        .draggable-item.dragging { opacity: 0.5; }

        /* Dialogue Exercise */
        .dialogue-box {
            background: white; padding: 40px; border-radius: 30px; max-width: 800px; margin: 0 auto 50px;
            position: relative; border-left: 8px solid var(--secondary);
        }
        .dialogue-line {
            display: flex; gap: 15px; margin-bottom: 20px; align-items: flex-start;
        }
        .speaker-avatar {
            width: 50px; height: 50px; background: #ddd; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
            flex-shrink: 0;
        }
        .speaker-text {
            background: #f4f6f8; padding: 15px 25px; border-radius: 0 20px 20px 20px;
            position: relative; font-size: 1.2rem; flex-grow: 1;
        }
        .d-input {
            border: none; border-bottom: 2px solid var(--primary); background: transparent;
            font-size: 1.2rem; color: var(--primary); width: 100px; text-align: center; font-weight: bold;
            outline: none;
        }
        .d-input:focus { border-bottom-color: var(--secondary); }
        .d-input.correct { color: var(--success); border-bottom-color: var(--success); }
        .d-input.wrong { color: var(--error); border-bottom-color: var(--error); }

        /* Lesson 3 & 4 Styles */
        .reading-vocab-bar {
            display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 30px; justify-content: center;
        }
        .d-input {
            border: 2px solid #ddd; border-radius: 8px; padding: 5px 10px; font-size: 1rem; width: 120px;
            text-align: center; background: white; cursor: pointer;
        }
        .d-input.correct { border-color: #06d6a0; background: #d1fae5; color: #065f46; }
        .d-input.wrong { border-color: #ef476f; background: #fee2e2; color: #991b1b; }

        .vocab-chip {
            background: white; padding: 8px 15px; border-radius: 20px; font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05); transition: transform 0.2s; cursor: pointer;
            border: 1px solid #eee; display: flex; align-items: center; gap: 8px; font-size: 1rem;
        }
        .vocab-chip:hover { transform: scale(1.05); border-color: var(--primary); }
        
        .story-container-pro {
            background: white; border-radius: 30px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.08); margin-bottom: 50px;
        }
        .story-controls {
            background: #f8f9fa; padding: 15px; border-bottom: 1px solid #eee; display: flex; justify-content: flex-end; gap: 10px;
        }
        .story-text-content {
            padding: 40px; font-size: 1.3rem; line-height: 1.8; color: #333; text-align: left;
        }
        .highlight-word {
            color: var(--secondary); font-weight: bold; cursor: pointer; position: relative;
            text-decoration: underline; text-decoration-style: dotted; text-decoration-color: var(--secondary);
            padding: 0 2px;
        }
        .highlight-word:hover { background: #fff0f5; border-radius: 4px; }
        
        .arabic-translation {
            display: block; color: #666; font-size: 1.1rem; margin-top: 8px; font-family: 'Tajawal';
            border-right: 4px solid var(--accent); padding-right: 15px; margin-right: 5px; display: none;
            background: #fcfcfc; padding: 10px; border-radius: 8px;
        }
        .arabic-translation.show { display: block; animation: animate__fadeIn 0.5s; }

        .story-highlight-box {
            background: linear-gradient(135deg, #e0f7fa 0%, #fff 100%); border-radius: 25px;
            padding: 30px; display: flex; gap: 20px; align-items: flex-start; margin-bottom: 40px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05); border-left: 6px solid #00bcd4;
        }
        .highlight-icon { font-size: 3rem; background: rgba(255,255,255,0.8); padding: 15px; border-radius: 50%; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .highlight-content h3 { margin: 0 0 10px 0; color: #00838f; }

        .tf-game-container {
            display: grid; gap: 15px; max-width: 800px; margin: 0 auto 50px;
        }
        .tf-card {
            background: white; padding: 20px; border-radius: 15px; display: flex; justify-content: space-between;
            align-items: center; box-shadow: 0 4px 10px rgba(0,0,0,0.03); border: 1px solid #f0f0f0;
            transition: transform 0.2s;
        }
        .tf-card:hover { transform: translateY(-2px); }
        .tf-card p { margin: 0; font-size: 1.1rem; font-weight: 500; width: 70%; text-align: left; }
        .tf-buttons { display: flex; gap: 10px; }
        .tf-btn {
            border: none; padding: 8px 20px; border-radius: 12px; font-weight: bold; cursor: pointer; opacity: 0.7;
            transition: all 0.2s; font-size: 1rem;
        }
        .tf-btn.true { background: #d1fae5; color: #065f46; }
        .tf-btn.false { background: #fee2e2; color: #991b1b; }
        .tf-btn:hover { opacity: 1; transform: scale(1.05); }
        .tf-btn.selected-true { background: #10b981; color: white; opacity: 1; box-shadow: 0 0 10px #10b98166; }
        .tf-btn.selected-false { background: #ef4444; color: white; opacity: 1; box-shadow: 0 0 10px #ef444466; }
        .tf-feedback { width: 100%; margin-top: 10px; font-size: 0.95rem; display: none; }
        .tf-card.answered { flex-wrap: wrap; } 

        .discussion-box-pro {
            background: #fff8e1; border-radius: 30px; padding: 40px; border: 2px dashed #ffc107;
        }
        .discussion-item {
            background: white; border-radius: 15px; padding: 20px; margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03); display: flex; justify-content: space-between; align-items: center;
        }
        .discussion-content { text-align: left; }
        .discussion-item strong { color: #d35400; display: block; margin-bottom: 5px; font-size: 1.1rem; }
    </style>
</head>
<body>
    
    <!-- Celebration Overlay -->
    <div id="celebration-overlay" class="celebration-overlay">
        <canvas id="canvas-confetti" style="position: absolute; top: 0; left: 0; pointer-events: none;"></canvas>
        <div class="celeb-content">
            <h1 class="celeb-title">Fantastic! üåü</h1>
            <p class="celeb-msg">You are a Movie Star! <br> Keep up the great work!</p>
            <button onclick="closeCelebration()" class="celeb-btn">Play Again</button>
        </div>
    </div>
    <a href="/" class="back-btn" title="Back to Home">
        <i class="fas fa-arrow-left" style="font-size: 1.2rem;"></i>
    </a>

    <!-- Navigation Dropdown -->
    <button class="nav-dropdown-btn" onclick="toggleNav()">
        <i class="fas fa-bars"></i> ÿßŸÑŸÇÿßÿ¶ŸÖÿ©
    </button>
    <div id="navDropdown" class="nav-dropdown-content">
        <a href="/top-goal-6-unit-1/" class="nav-item">
            <i class="fas fa-film" style="color:#f43f5e;"></i>
            <span>ÿßŸÑÿµŸÅ ÿßŸÑÿ≥ÿßÿØÿ≥</span>
        </a>
        <a href="/grade-4-unit-1/" class="nav-item">
            <i class="fas fa-tree" style="color:#10b981;"></i>
            <span>Grade 4 - Unit 1</span>
        </a>
    </div>

    <div class="app-container">
        <!-- Header -->
        <header class="cinema-header animate__animated animate__fadeInDown">
            <div class="film-strip top"></div>
            <div class="header-content">
                <i class="fas fa-clapperboard header-decoration clapper"></i>
                <h1 class="main-title">TOP GOAL 6</h1>
                <h2 class="sub-title">Unit 1: Let's Watch a Movie! üçø</h2>
                <p class="arabic-sub">ŸáŸäÿß ŸÜÿ¥ÿßŸáÿØ ŸÅŸäŸÑŸÖÿßŸã - ÿ£ŸÜŸàÿßÿπ ÿßŸÑÿ£ŸÅŸÑÿßŸÖ ŸàÿßŸÑŸÇÿµÿµ</p>
            </div>
            <div class="header-decoration">
                <span class="film-reel">üéûÔ∏è</span>
                <span class="popcorn">Popcorn</span>
            </div>
            <div class="film-strip bottom"></div>
        </header>

        <!-- Navigation Tabs -->
        <div class="nav-tabs-container animate__animated animate__fadeInUp">
            <button onclick="switchTab('vocab')" class="nav-tab active" id="tab-vocab">
                <i class="fas fa-language"></i> ÿßŸÑŸÉŸÑŸÖÿßÿ™ (Vocabulary)
            </button>
            <button onclick="switchTab('reading')" class="nav-tab" id="tab-reading">
                <i class="fas fa-book-open"></i> ÿßŸÑŸÇÿ±ÿßÿ°ÿ© (Reading)
            </button>
            <button onclick="switchTab('games')" class="nav-tab" id="tab-games">
                <i class="fas fa-gamepad"></i> ÿßŸÑÿ£ŸÑÿπÿßÿ® (Games)
            </button>
            <button onclick="switchTab('quiz')" class="nav-tab" id="tab-quiz">
                <i class="fas fa-star"></i> ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ± (Quiz)
            </button>
            <button onclick="switchTab('grammar')" class="nav-tab" id="tab-grammar" style="background:var(--accent); color:var(--dark);">
                <i class="fas fa-chalkboard-teacher"></i> ÿßŸÑÿØÿ±ÿ≥ ÿßŸÑÿ´ÿßŸÜŸä (Grammar)
            </button>
            <button onclick="switchTab('lesson3')" class="nav-tab" id="tab-lesson3" style="background:#4cc9f0; color:white;">
                <i class="fas fa-book-reader"></i> ÿßŸÑÿØÿ±ÿ≥ ÿßŸÑÿ´ÿßŸÑÿ´ (Reading)
            </button>
            <button onclick="switchTab('lesson4')" class="nav-tab" id="tab-lesson4" style="background:#f72585; color:white;">
                <i class="fas fa-headphones"></i> ÿßŸÑÿØÿ±ÿ≥ ÿßŸÑÿ±ÿßÿ®ÿπ (Listening)
            </button>
            <button onclick="switchTab('lesson5')" class="nav-tab" id="tab-lesson5" style="background:#7209b7; color:white;">
                <i class="fas fa-pencil-alt"></i> ÿßŸÑÿØÿ±ÿ≥ ÿßŸÑÿÆÿßŸÖÿ≥ (Vocab)
            </button>
            <button onclick="switchTab('lesson6')" class="nav-tab" id="tab-lesson6" style="background:#4361ee; color:white;">
                <i class="fas fa-lightbulb"></i> ÿßŸÑÿØÿ±ÿ≥ ÿßŸÑÿ≥ÿßÿØÿ≥ (Grammar)
            </button>
            <button onclick="switchTab('lesson7')" class="nav-tab" id="tab-lesson7" style="background:#06d6a0; color:white;">
                <i class="fas fa-book"></i> ÿßŸÑÿØÿ±ÿ≥ ÿßŸÑÿ≥ÿßÿ®ÿπ (Reading)
            </button>
            <button onclick="switchTab('lesson8')" class="nav-tab" id="tab-lesson8" style="background:#ef476f; color:white;">
                <i class="fas fa-spell-check"></i> ÿßŸÑÿØÿ±ÿ≥ ÿßŸÑÿ´ÿßŸÖŸÜ (Word Work)
            </button>
            <button onclick="switchTab('lesson9')" class="nav-tab" id="tab-lesson9" style="background:#9d4edd; color:white;">
                <i class="fas fa-theater-masks"></i> ÿßŸÑÿØÿ±ÿ≥ ÿßŸÑÿ™ÿßÿ≥ÿπ (Story)
            </button>
            <button onclick="switchTab('lesson10')" class="nav-tab" id="tab-lesson10" style="background:#ff006e; color:white;">
                <i class="fas fa-trophy"></i> ÿßŸÑÿØÿ±ÿ≥ ÿßŸÑÿπÿßÿ¥ÿ± (Review)
            </button>
        </div>

        <main class="content-area">
            
            <!-- SECTION 1: VOCABULARY -->
            <div id="vocab-section" class="tab-content active animate__animated animate__fadeIn">
                <div class="vocab-grid" id="vocab-grid-container">
                    <!-- JS Injected -->
                </div>
            </div>

            <!-- SECTION 2: READING -->
            <div id="reading-section" class="tab-content animate__animated animate__fadeIn" style="display:none;">
                <div class="reading-card">
                    <div class="reading-icon">üìñ</div>
                    <h3 class="reading-title">My Favorite Movie Genres</h3>
                    <div class="reading-text-box">
                        <p class="english-text" id="reading-text">
                            <span class="highlight-word" onclick="speakWord(this)">Sci-fi</span> is my favorite genre as it always fascinated me. <span class="highlight-word" onclick="speakWord(this)">Documentaries</span> and <span class="highlight-word" onclick="speakWord(this)">comedy</span> are my next favorite. I like to learn new things and laugh with my friends.
                        </p>
                        <hr class="separator">
                        <p class="arabic-text">
                            ÿßŸÑÿÆŸäÿßŸÑ ÿßŸÑÿπŸÑŸÖŸä ŸáŸà ÿßŸÑŸÜŸàÿπ ÿßŸÑŸÖŸÅÿ∂ŸÑ ŸÑÿØŸäÿå ÿ≠Ÿäÿ´ ÿ•ŸÜŸá ÿØÿßÿ¶ŸÖÿßŸã ŸÖÿß ŸäÿØŸáÿ¥ŸÜŸä. ÿßŸÑÿ£ŸÅŸÑÿßŸÖ ÿßŸÑŸàÿ´ÿßÿ¶ŸÇŸäÿ© ŸàÿßŸÑŸÉŸàŸÖŸäÿØŸäÿß ŸáŸä ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© ŸÑÿØŸä ÿ®ÿπÿØ ÿ∞ŸÑŸÉ. ÿ£ÿ≠ÿ® ÿ™ÿπŸÑŸÖ ÿ£ÿ¥Ÿäÿßÿ° ÿ¨ÿØŸäÿØÿ© ŸàÿßŸÑÿ∂ÿ≠ŸÉ ŸÖÿπ ÿ£ÿµÿØŸÇÿßÿ¶Ÿä.
                        </p>
                    </div>
                    <div class="reading-controls">
                        <button onclick="playReading()" class="btn-action btn-play">
                            <i class="fas fa-play"></i> ÿßÿ≥ÿ™ŸÖÿπ (Listen)
                        </button>
                        <button onclick="startReadingMic()" class="btn-action btn-mic" id="reading-mic">
                            <i class="fas fa-microphone"></i> ÿßŸÇÿ±ÿ£ (Read)
                        </button>
                    </div>
                    <div id="reading-feedback" class="feedback-msg" style="margin-top:20px; font-weight:bold;"></div>
                </div>
            </div>

            <!-- SECTION 3: GAMES -->
            <div id="games-section" class="tab-content animate__animated animate__fadeIn" style="display:none;">
                
                <!-- Game Selector -->
                <div class="games-menu">
                    <button onclick="showGame('missing-letter')" class="game-select-btn active">
                        üß© ÿßŸÑÿ≠ÿ±ŸÅ ÿßŸÑŸÜÿßŸÇÿµ
                    </button>
                    <button onclick="showGame('unscramble')" class="game-select-btn">
                        üî° ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿ≠ÿ±ŸàŸÅ
                    </button>
                     <button onclick="showGame('matching')" class="game-select-btn">
                        üîÑ ÿ™ŸàÿµŸäŸÑ ÿßŸÑŸÉŸÑŸÖÿßÿ™
                    </button>
                    <button onclick="showGame('fill-blanks')" class="game-select-btn">
                        üìù ÿ£ŸÉŸÖŸÑ ÿßŸÑÿ¨ŸÖŸÑ
                    </button>
                </div>

                <!-- Game 1: Missing Letter -->
                <div id="game-missing-letter" class="game-container active">
                    <div class="game-header">
                        <h3 class="game-title">Missing Letter</h3>
                        <p class="game-instruction">Choose the correct letter to complete the word</p>
                    </div>
                    <div id="missing-letter-area" class="game-play-area">
                        <!-- JS Injected -->
                    </div>
                </div>

                <!-- Game 2: Unscramble -->
                <div id="game-unscramble" class="game-container">
                    <div class="game-header">
                         <h3 class="game-title">Arrange Letters</h3>
                         <p class="game-instruction">Click the letters in order to spell the word</p>
                    </div>
                    <div id="unscramble-area" class="game-play-area">
                         <!-- JS Injected -->
                    </div>
                </div>

                <!-- Game 2: Matching -->
                <div id="game-matching" class="game-container">
                    <div class="game-header">
                        <h3 class="game-title">Match Words</h3>
                        <p class="game-instruction">Match the English word to its Arabic meaning</p>
                    </div>
                    <div class="matching-wrapper">
                        <div id="matching-level-indicator" class="round-indicator">Round 1 / 3</div>
                        <div id="matching-area" class="matching-grid">
                             <!-- JS Injected -->
                        </div>
                    </div>
                </div>

                <!-- Game 3: Fill Blanks -->
                <div id="game-fill-blanks" class="game-container">
                    <div class="game-header">
                        <h3 class="game-title">Complete Sentences</h3>
                        <p class="game-instruction">Select the correct word to fill in the blank</p>
                    </div>
                    <div id="fill-blanks-area" class="game-play-area">
                         <!-- JS Injected -->
                    </div>
                </div>
            </div>

            <!-- SECTION 4: QUIZ -->
            <div id="quiz-section" class="tab-content animate__animated animate__fadeIn" style="display:none;">
                <div class="quiz-wrapper">
                    <div class="quiz-header-info">
                        <span class="q-count"><i class="fas fa-question-circle"></i> Question: <span id="q-current">1</span>/10</span>
                        <span class="q-score"><i class="fas fa-star" style="color:var(--accent)"></i> Score: <span id="q-score">0</span></span>
                    </div>
                    <div id="quiz-question-container">
                        <!-- JS Injected -->
                    </div>
                </div>
            </div>

            <!-- SECTION 5: GRAMMAR LESSON 2 -->
            <div id="grammar-section" class="tab-content animate__animated animate__fadeIn" style="display:none;">
                
                <!-- 1. Explanation Table -->
                <div class="game-header">
                    <h2 class="game-title">Past Progressive (Was / Were + ing)</h2>
                    <p class="arabic-sub">ÿßŸÑŸÖÿßÿ∂Ÿä ÿßŸÑŸÖÿ≥ÿ™ŸÖÿ±: ŸÜÿ≥ÿ™ÿÆÿØŸÖŸá ŸÑŸÑÿ™ÿ≠ÿØÿ´ ÿπŸÜ ÿ£ŸÅÿπÿßŸÑ ŸÉÿßŸÜÿ™ ŸÖÿ≥ÿ™ŸÖÿ±ÿ© ŸÅŸä ŸàŸÇÿ™ ŸÖÿ≠ÿØÿØ ŸÅŸä ÿßŸÑŸÖÿßÿ∂Ÿä</p>
                </div>

                <div class="grammar-chart-container">
                     <table class="grammar-table">
                        <thead>
                            <tr>
                                <th>Subject (ÿßŸÑŸÅÿßÿπŸÑ)</th>
                                <th>Auxiliary (ŸÅÿπŸÑ ŸÖÿ≥ÿßÿπÿØ)</th>
                                <th>Verb + ing (ÿßŸÑŸÅÿπŸÑ)</th>
                                <th>Example (ŸÖÿ´ÿßŸÑ)</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>I, He, She, It</td>
                                <td><span class="grammar-badge">was</span></td>
                                <td>verb + <strong>ing</strong></td>
                                <td>I <strong>was watching</strong> a movie.<br><span class="arabic-sub" style="font-size:0.9rem">ŸÉŸÜÿ™ ÿ£ÿ¥ÿßŸáÿØ ŸÅŸäŸÑŸÖÿßŸã</span></td>
                                <td><button class="btn-icon" onclick="speak('I was watching a movie')">üîä</button></td>
                            </tr>
                            <tr>
                                <td>You, We, They</td>
                                <td><span class="grammar-badge">were</span></td>
                                <td>verb + <strong>ing</strong></td>
                                <td>They <strong>were screaming</strong>.<br><span class="arabic-sub" style="font-size:0.9rem">ŸÉÿßŸÜŸàÿß Ÿäÿµÿ±ÿÆŸàŸÜ</span></td>
                                <td><button class="btn-icon" onclick="speak('They were screaming')">üîä</button></td>
                            </tr>
                             <tr>
                                <td>Negative (ŸÜŸÅŸä)</td>
                                <td>was not (wasn't)<br>were not (weren't)</td>
                                <td>verb + <strong>ing</strong></td>
                                <td>She <strong>wasn't sleeping</strong>.<br><span class="arabic-sub" style="font-size:0.9rem">ŸÑŸÖ ÿ™ŸÉŸÜ ŸÜÿßÿ¶ŸÖÿ©</span></td>
                                <td><button class="btn-icon" onclick="speak('She was not sleeping')">üîä</button></td>
                            </tr>
                        </tbody>
                     </table>
                </div>

                <hr class="separator">

                <!-- 2. Pronoun Sorter -->
                <div class="game-header">
                    <h3 class="game-title">Sort the Pronouns</h3>
                    <p class="game-instruction">Drag the pronouns to the correct box (Was or Were)</p>
                </div>
                
                <div class="pronoun-pool" id="p-pool">
                    <div class="draggable-item" draggable="true" id="p-I" onclick="speak('I')">I</div>
                    <div class="draggable-item" draggable="true" id="p-They" onclick="speak('They')">They</div>
                    <div class="draggable-item" draggable="true" id="p-She" onclick="speak('She')">She</div>
                    <div class="draggable-item" draggable="true" id="p-We" onclick="speak('We')">We</div>
                    <div class="draggable-item" draggable="true" id="p-He" onclick="speak('He')">He</div>
                    <div class="draggable-item" draggable="true" id="p-You" onclick="speak('You')">You</div>
                    <div class="draggable-item" draggable="true" id="p-It" onclick="speak('It')">It</div>
                </div>

                <div class="sort-container">
                    <div class="sort-bucket" id="bucket-was">
                        <div class="bucket-title">WAS</div>
                        <div class="bucket-content"></div>
                    </div>
                    <div class="sort-bucket" id="bucket-were">
                        <div class="bucket-title">WERE</div>
                        <div class="bucket-content"></div>
                    </div>
                </div>

                <div style="text-align:center; margin-bottom:50px;">
                    <button class="btn-action btn-play" onclick="checkPronounSort()">‚úÖ Check Sorting</button>
                    <div id="sort-feedback" class="feedback-msg" style="margin-top:10px;"></div>
                </div>

                <hr class="separator">

                <!-- 3. Dialogue -->
                <div class="game-header">
                    <h3 class="game-title">Complete the Dialogue</h3>
                    <p class="game-instruction">Fill in: was, were, wasn't, or verb+ing</p>
                </div>

                <div class="dialogue-box">
                    <div class="dialogue-line">
                        <div class="speaker-avatar" style="background:#ffb7b2">üë©</div>
                        <div class="speaker-text">
                            <strong>Mona:</strong> Hi! Why didn't you answer when I called yesterday?
                            <button class="btn-icon" onclick="speak('Hi! Why didn\'t you answer when I called yesterday?')" style="float:right">üîä</button>
                            <div class="arabic-sub" style="margin-top:5px; color:#666;">ŸÖÿ±ÿ≠ÿ®ÿßŸã! ŸÑŸÖÿßÿ∞ÿß ŸÑŸÖ ÿ™ÿ¨Ÿäÿ®Ÿä ÿπŸÜÿØŸÖÿß ÿßÿ™ÿµŸÑÿ™ ÿ®ŸÉ ÿßŸÑÿ®ÿßÿ±ÿ≠ÿ©ÿü</div>
                        </div>
                    </div>
                    <div class="dialogue-line">
                        <div class="speaker-avatar" style="background:#b5ead7">üëß</div>
                        <div class="speaker-text">
                            <strong>Nura:</strong> I'm sorry! I 
                            <select class="d-input" data-ans="was">
                                <option value="">...</option>
                                <option value="was">was</option>
                                <option value="were">were</option>
                                <option value="wasn't">wasn't</option>
                                <option value="weren't">weren't</option>
                            </select> 
                            watching a movie!
                            <button class="btn-icon" onclick="speak('I am sorry! I was watching a movie!')" style="float:right">üîä</button>
                            <div class="arabic-sub" style="margin-top:5px; color:#666;">ÿ£ŸÜÿß ÿ¢ÿ≥ŸÅÿ©! ŸÉŸÜÿ™ ÿ£ÿ¥ÿßŸáÿØ ŸÅŸäŸÑŸÖÿßŸã!</div>
                        </div>
                    </div>
                    <div class="dialogue-line">
                        <div class="speaker-avatar" style="background:#ffb7b2">üë©</div>
                        <div class="speaker-text">
                            <strong>Mona:</strong> Oh great! What 
                            <select class="d-input" data-ans="were">
                                <option value="">...</option>
                                <option value="was">was</option>
                                <option value="were">were</option>
                                <option value="wasn't">wasn't</option>
                                <option value="weren't">weren't</option>
                            </select> 
                            you watching?
                            <button class="btn-icon" onclick="speak('Oh great! What were you watching?')" style="float:right">üîä</button>
                            <div class="arabic-sub" style="margin-top:5px; color:#666;">ÿ£ŸàŸá ÿ±ÿßÿ¶ÿπ! ŸÖÿßÿ∞ÿß ŸÉŸÜÿ™ ÿ™ÿ¥ÿßŸáÿØŸäŸÜÿü</div>
                        </div>
                    </div>
                    <div class="dialogue-line">
                        <div class="speaker-avatar" style="background:#b5ead7">üëß</div>
                        <div class="speaker-text">
                            <strong>Nura:</strong> An old sci-fi movie. But I 
                            <select class="d-input" data-ans="wasn't">
                                <option value="">...</option>
                                <option value="was">was</option>
                                <option value="were">were</option>
                                <option value="wasn't">wasn't</option>
                                <option value="weren't">weren't</option>
                            </select> 
                            really enjoying it.
                            <button class="btn-icon" onclick="speak('An old sci-fi movie. But I wasn\'t really enjoying it.')" style="float:right">üîä</button>
                            <div class="arabic-sub" style="margin-top:5px; color:#666;">ŸÅŸäŸÑŸÖ ÿÆŸäÿßŸÑ ÿπŸÑŸÖŸä ŸÇÿØŸäŸÖ. ŸÑŸÉŸÜŸä ŸÑŸÖ ÿ£ŸÉŸÜ ÿ£ÿ≥ÿ™ŸÖÿ™ÿπ ÿ®Ÿá ÿ≠ŸÇÿßŸã.</div>
                        </div>
                    </div>
                     <div class="dialogue-line">
                        <div class="speaker-avatar" style="background:#ffb7b2">üë©</div>
                        <div class="speaker-text">
                             Why 
                             <select class="d-input" data-ans="were">
                                <option value="">...</option>
                                <option value="was">was</option>
                                <option value="were">were</option>
                                <option value="wasn't">wasn't</option>
                                <option value="weren't">weren't</option>
                            </select> 
                             you calling?
                             <button class="btn-icon" onclick="speak('Why were you calling?')" style="float:right">üîä</button>
                             <div class="arabic-sub" style="margin-top:5px; color:#666;">ŸÑŸÖÿßÿ∞ÿß ŸÉŸÜÿ™ ÿ™ÿ™ÿµŸÑŸäŸÜÿü</div>
                        </div>
                    </div>
                </div>

                <div style="text-align:center; margin-bottom:50px;">
                    <button class="btn-action btn-play" onclick="checkDialogue()">‚úÖ Check Answers</button>
                </div>

                <hr class="separator">

                <!-- 4. Grammar Quiz -->
                <div class="game-header">
                    <h3 class="game-title">Grammar Quiz üìù</h3>
                    <p class="game-instruction">Test your knowledge! (Score out of 10)</p>
                </div>
                
                 <div class="quiz-wrapper" id="grammar-quiz-wrapper">
                    <div class="quiz-header-info">
                        <span class="q-count"><i class="fas fa-question-circle"></i> Question: <span id="gq-current">1</span>/10</span>
                        <span class="q-score"><i class="fas fa-star" style="color:var(--accent)"></i> Score: <span id="gq-score">0</span></span>
                    </div>
                    <div id="grammar-quiz-container">
                        <!-- JS Injected -->
                    </div>
                </div>

            </div>

            </div>

            <!-- SECTION 6: LESSON 3 READING -->
            <div id="lesson3-section" class="tab-content animate__animated animate__fadeIn" style="display:none;">
                <div class="game-header">
                    <h2 class="game-title">The Book Presentation üìö</h2>
                    <p class="arabic-sub">ÿπÿ±ÿ∂ ÿßŸÑŸÉÿ™ÿßÿ® - ŸÇÿµÿ© Ÿàÿ£ÿ≥ÿ¶ŸÑÿ©</p>
                </div>
                
                <!-- Vocab Pre-teach -->
                <div class="reading-vocab-bar" id="l3-vocab-bar">
                    <!-- JS Injected -->
                </div>

                <!-- Story Container -->
                <div class="story-container-pro">
                    <div class="story-controls">
                        <button onclick="toggleStoryTranslation()" class="btn-action small"><i class="fas fa-language"></i> Toggle Translation</button>
                        <button onclick="speakStory()" class="btn-action small btn-play"><i class="fas fa-volume-up"></i> Read Story</button>
                    </div>
                    <div class="story-text-content" id="l3-story-text">
                        <!-- JS Injected -->
                    </div>
                </div>

                <hr class="separator">

                <!-- Comprehension Questions -->
                 <div class="game-header">
                    <h3 class="game-title">Comprehension Check üß†</h3>
                    <p class="game-instruction">Answer the questions about the story</p>
                </div>
                <div class="quiz-wrapper" id="l3-quiz-wrapper">
                    <!-- JS Injected -->
                </div>
            </div>

            <!-- SECTION 7: LESSON 4 LISTENING -->
            <div id="lesson4-section" class="tab-content animate__animated animate__fadeIn" style="display:none;">
                 <div class="game-header">
                    <h2 class="game-title">Jayden and the Bear üêª</h2>
                    <p class="arabic-sub">ŸÇÿµÿ© ÿ¨ÿßŸäÿØŸÜ ŸàÿßŸÑÿØÿ® - ÿßÿ≥ÿ™ŸÖÿπ Ÿàÿ£ÿ¨ÿ®</p>
                </div>

                <!-- Story Highlights/Summary -->
                <div class="story-highlight-box">
                    <div class="highlight-icon">üèïÔ∏è</div>
                    <div class="highlight-content">
                        <h3>Story Summary (ŸÖŸÑÿÆÿµ ÿßŸÑŸÇÿµÿ©)</h3>
                        <p>Jayden was walking in the forest while talking to his friend on the phone. A bear was walking behind him! He went to his cousin Victoria's house but she wasn't there. He found a bear in her bed! It was like "Goldilocks and the Three Bears".</p>
                        <button onclick="speak(this.previousElementSibling.innerText)" class="btn-icon">üîä</button>
                    </div>
                </div>

                <hr class="separator">

                <!-- Main Dynamic Content -->
                <div class="tf-game-container" id="l4-tf-container" style="max-width:1000px;">
                    <!-- JS Injected -->
                </div>
            </div>

            <!-- SECTION 8: LESSON 5 VOCABULARY II -->
            <div id="lesson5-section" class="tab-content animate__animated animate__fadeIn" style="display:none;">
                <div class="game-header">
                    <h2 class="game-title">Making Your Storyboard üìù</h2>
                    <p class="arabic-sub">ÿ•ŸÜÿ¥ÿßÿ° ŸÑŸàÿ≠ÿ© ÿßŸÑŸÇÿµÿ© - ÿßŸÑŸÖŸÅÿ±ÿØÿßÿ™ ŸàÿßŸÑÿÆÿ∑Ÿàÿßÿ™</p>
                </div>

                <!-- Main Content Container l5 -->
                <div style="max-width:1000px; margin:0 auto;">
                    
                    <!-- 1. Storyboard Steps (Comic Style) -->
                    <div class="steps-container" id="l5-steps" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:20px; margin-bottom:50px;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- 2. Vocab Practice -->
                    <div class="game-header">
                        <h3 class="game-title">Key Vocabulary üîë</h3>
                        <p class="game-instruction">Listen, Point, and Say</p>
                    </div>
                    <div class="reading-vocab-bar" id="l5-vocab-bar" style="justify-content:center; gap:15px;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- 3. Fill Blanks -->
                    <div class="game-header">
                        <h3 class="game-title">Unscramble the Story ‚úçÔ∏è</h3>
                        <p class="game-instruction">Fill in the blanks with words from Exercise 1</p>
                    </div>
                    <div class="story-container-pro" style="background:#f0f8ff; border:2px solid #bde0fe;"> 
                        <div class="story-text-content" id="l5-fill-story" style="font-size:1.4rem; line-height:2.2;">
                            <!-- JS Injected -->
                        </div>
                        <div style="text-align:center; padding-bottom:30px;">
                            <button class="btn-action btn-play" onclick="checkL5Fill()">‚úÖ Check Answers</button>
                        </div>
                    </div>

                    <hr class="separator">

                    <!-- 4. Activity 4 & Short Story -->
                   <div class="game-header">
                        <h3 class="game-title">Read, Act & Check üé≠</h3>
                        <p class="game-instruction">Tell a short story using the new words!</p>
                    </div>

                    <div style="display:flex; gap:30px; flex-wrap:wrap; margin-bottom:50px;">
                        <!-- Challenge Box -->
                        <div style="flex:1; min-width:300px; background:#fff3cd; border-radius:20px; padding:30px; border:2px dashed #ffc107;">
                            <h4 style="color:#d35400; font-size:1.5rem; margin-bottom:15px;">Challenge üåü</h4>
                            <ul style="list-style:none; padding:0; font-size:1.1rem; line-height:1.8;">
                                <li>‚ú® Tell a short story (ÿ™ÿ≠ÿØÿ´ ÿπŸÜ ŸÇÿµÿ© ŸÇÿµŸäÿ±ÿ©)</li>
                                <li>‚ú® Use as many new words as possible (ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ£ŸÉÿ®ÿ± ÿπÿØÿØ ŸÖŸÖŸÉŸÜ ŸÖŸÜ ÿßŸÑŸÉŸÑŸÖÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ©)</li>
                                <li>‚ú® Compete against your classmates (ÿ™ŸÜÿßŸÅÿ≥ ŸÖÿπ ÿ≤ŸÖŸÑÿßÿ¶ŸÉ)</li>
                            </ul>
                        </div>

                        <!-- Example Story Box -->
                        <div class="story-highlight-box" style="flex:1; min-width:300px; flex-direction:column; align-items:flex-start; margin:0; background:white; border-left:6px solid var(--primary);">
                            <h4 style="color:var(--primary); font-size:1.6rem; margin-bottom:15px;">An Example of a Short Story üìñ</h4>
                            <p style="font-size:1.4rem; color:#444; line-height:1.8; margin-bottom:20px;" id="l5-short-story-text">
                                One evening, Amjad and Faisal felt <span class="highlight-word">brave</span> and curious. They <span class="highlight-word">whispered</span> to each other about sleeping in the park. They <span class="highlight-word">decided</span> to stay there overnight, thinking it would be fun. But suddenly, animals <span class="highlight-word">appeared</span> from the bushes! The boys got <span class="highlight-word">scared</span> and <span class="highlight-word">wished</span> they were safe at home in their beds. In the <span class="highlight-word">end</span>, they ran back home and promised never to sleep outside again.
                            </p>
                            <button class="btn-action small btn-play" onclick="speak(document.getElementById('l5-short-story-text').innerText)">üîä Listen to Story</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION 9: LESSON 6 GRAMMAR II -->
            <div id="lesson6-section" class="tab-content animate__animated animate__fadeIn" style="display:none;">
                 <div class="game-header">
                    <h2 class="game-title">Making Suggestions üí°</h2>
                    <p class="arabic-sub">ÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿßŸÇÿ™ÿ±ÿßÿ≠ÿßÿ™ - Why don't / How about</p>
                </div>

                <!-- Main Content Container -->
                <div style="max-width:1000px; margin:0 auto;">

                    <!-- 1. Grammar Chart -->
                    <div class="grammar-chart-container">
                        <table class="grammar-table" id="l6-grammar-table-main">
                            <thead>
                                <tr>
                                    <th style="font-size:1.3rem;">Expression (ÿßŸÑÿ™ÿπÿ®Ÿäÿ±)</th>
                                    <th style="font-size:1.3rem;">Form (ÿßŸÑÿµŸäÿ∫ÿ©)</th>
                                    <th style="font-size:1.3rem;">Example (ŸÖÿ´ÿßŸÑ)</th>
                                    <th style="font-size:1.3rem;">Action</th>
                                </tr>
                            </thead>
                            <tbody id="l6-grammar-table">
                                <!-- JS Injected -->
                            </tbody>
                        </table>
                    </div>

                    <hr class="separator">

                    <!-- 2. Read and Match -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">üë• Read and Match</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ÿßŸÇÿ±ÿ£ Ÿàÿ∑ÿßÿ®ŸÇ - Match each person with their suggestion</p>
                    </div>

                    <div id="l6-match-container" style="margin-bottom:50px;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- 3. Important Notes Box -->
                    <div style="background:#e0f2fe; border-left:6px solid var(--primary); padding:25px; border-radius:15px; margin-bottom:40px;">
                        <h4 style="color:var(--primary); font-size:1.5rem; margin-bottom:15px;">üìò Important Notes (ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ŸáÿßŸÖÿ©)</h4>
                        <ul style="font-size:1.3rem; line-height:2; margin:0;">
                            <li>üîµ We use <strong>Why don't we</strong> before an action in the <span style="background:#fef3c7; padding:2px 8px; border-radius:5px;">base form</span></li>
                            <li>üü¢ We use <strong>How/What about</strong> before an action with <span style="background:#fef3c7; padding:2px 8px; border-radius:5px;">-ing</span></li>
                            <li>üü° All three expressions are used for making suggestions</li>
                        </ul>
                    </div>

                    <!-- 4. Scrambled Sentences -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">üß© Order the Words</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ÿ±ÿ™ÿ® ÿßŸÑŸÉŸÑŸÖÿßÿ™ ŸÑÿ™ŸÉŸàŸäŸÜ ÿ¨ŸÖŸÑ - Arrange the words to make a correct suggestion</p>
                    </div>
                    
                    <div id="l6-unscramble-container" class="game-play-area" style="max-width:900px; margin:0 auto;">
                        <!-- JS Injected -->
                    </div>
                </div>

            </div>

            <!-- SECTION 10: LESSON 7 READING -->
            <div id="lesson7-section" class="tab-content animate__animated animate__fadeIn" style="display:none;">
                 <div class="game-header">
                    <h2 class="game-title">Reading: My Favorite Movie Scenes üìñ</h2>
                    <p class="arabic-sub">ÿßŸÑŸÇÿ±ÿßÿ°ÿ© - ŸÖÿ¥ÿßŸáÿØ ÿ£ŸÅŸÑÿßŸÖŸä ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©</p>
                </div>

                <div style="max-width:1000px; margin:0 auto;">
                    
                    <!-- 1. Pre-Reading Questions -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">üëÄ Look and Discuss</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ÿßŸÜÿ∏ÿ± ŸàŸÜÿßŸÇÿ¥ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ŸÖÿπ ÿ≤ŸÖŸäŸÑŸÉ</p>
                    </div>
                    <div id="l7-pre-questions" style="display:grid; gap:20px; margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- 2. Reading Passage -->
                    <div class="reading-passage" id="l7-reading-passage" style="background:#ffffff; padding:35px; border-radius:15px; font-size:1.3rem; line-height:2; box-shadow:0 4px 15px rgba(0,0,0,0.05); margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- 3. Read and Complete -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">‚úçÔ∏è Read and Complete</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ÿßŸÇÿ±ÿ£ ÿ´ŸÖ ÿ£ŸÉŸÖŸÑ</p>
                    </div>
                    <div id="l7-complete-activity" style="margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- 4. Speed Reading Challenge -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">‚ö° Speed Reading Challenge</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ÿ™ÿ≠ÿØŸä ÿßŸÑŸÇÿ±ÿßÿ°ÿ© ÿßŸÑÿ≥ÿ±Ÿäÿπÿ©</p>
                    </div>
                    <div id="l7-speed-reading" style="margin-bottom:40px; text-align:center;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- 5. Comprehension Quiz -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">üìù Comprehension Quiz</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑŸÅŸáŸÖ</p>
                    </div>
                    <div id="l7-quiz-container" style="margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- 6. Post-Reading Discussion -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">üí¨ Discuss the Questions</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ŸÜÿßŸÇÿ¥ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ŸÖÿπ ÿ≤ŸÖŸäŸÑŸÉ</p>
                    </div>
                    <div id="l7-post-questions" style="margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                </div>
            </div>

            <!-- SECTION 11: LESSON 8 WORD WORK -->
            <div id="lesson8-section" class="tab-content animate__animated animate__fadeIn" style="display:none;">
                <div class="game-header">
                    <h2 class="game-title">Word Work and Writing üìù</h2>
                    <p class="arabic-sub">ÿπŸÖŸÑ ÿßŸÑŸÉŸÑŸÖÿßÿ™ ŸàÿßŸÑŸÉÿ™ÿßÿ®ÿ©</p>
                </div>

                <div style="max-width:1000px; margin:0 auto;">
                    
                    <!-- 1. Vocabulary Chart -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">üìö Vocabulary Chart</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑŸÉŸÑŸÖÿßÿ™ ŸÅŸä ÿßŸÑŸÜÿµ ŸàÿßŸÉŸÖŸÑ ÿßŸÑÿ¨ÿØŸàŸÑ</p>
                    </div>
                    <div id="l8-vocab-table-container" style="margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- 2. Movie Scene Questions -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">üé¨ About Your Favorite Scene</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ÿßŸÉÿ™ÿ® Ÿàÿßÿ±ÿ≥ŸÖ - ÿßÿ¨ÿ® ÿπŸÑŸâ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ©</p>
                    </div>
                    <div id="l8-scene-questions" style="margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- 3. Blog Post Builder -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">‚úçÔ∏è Write Your Blog Post</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ÿßŸÉÿ™ÿ® ŸÖŸÜÿ¥Ÿàÿ± ÿßŸÑŸÖÿØŸàŸÜÿ© ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ</p>
                    </div>
                    <div id="l8-blog-builder" style="margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                </div>
            </div>

            <!-- SECTION 12: LESSON 9 STORY STRUCTURE -->
            <div id="lesson9-section" class="tab-content animate__animated animate__fadeIn" style="display:none;">
                <div class="game-header">
                    <h2 class="game-title">Story Structure: The Writing Roller Coaster üé¢</h2>
                    <p class="arabic-sub">ŸÇÿ∑ÿßÿ± ÿßŸÑŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ≥ÿ±Ÿäÿπ - ŸáŸäŸÉŸÑ ÿßŸÑŸÇÿµÿ©</p>
                </div>

                <div style="max-width:1100px; margin:0 auto;">
                    
                    <!-- 1. Three Acts Infographic -->
                    <div id="l9-three-acts-info" style="margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- 2. Story Planner -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">üìñ Plan Your Story</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ÿ™ÿ∞ŸÉÿ± ŸàÿÆÿ∑ÿ∑ ÿ´ŸÖ ŸÇÿØŸÖ - ÿÆÿ∑ÿ∑ ŸÇÿµÿ™ŸÉ</p>
                    </div>
                    <div id="l9-story-planner" style="margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- 3. Story Structure Quiz -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">‚ùì Story Structure Quiz</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ÿßÿÆÿ™ÿ®ÿßÿ± ŸáŸäŸÉŸÑ ÿßŸÑŸÇÿµÿ©</p>
                    </div>
                    <div id="l9-structure-quiz" style="margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                </div>
            </div>

            <!-- SECTION 13: LESSON 10 UNIT REVIEW -->
            <div id="lesson10-section" class="tab-content animate__animated animate__fadeIn" style="display:none;">
                <div class="game-header">
                    <h2 class="game-title">Unit Review Game üéÆ</h2>
                    <p class="arabic-sub">ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑŸàÿ≠ÿØÿ© - ÿßŸÑÿπÿ® Ÿàÿ£ÿ¨ÿ®</p>
                </div>

                <div style="max-width:1100px; margin:0 auto;">
                    
                    <!-- Game Board -->
                    <div id="l10-game-board" style="margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                    <hr class="separator">

                    <!-- Project Section -->
                    <div class="game-header">
                        <h3 class="game-title" style="font-size:1.8rem;">üé® Project: Create a Movie Poster</h3>
                        <p class="game-instruction" style="font-size:1.3rem;">ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ - ÿ£ŸÜÿ¥ÿ¶ ŸÖŸÑÿµŸÇ ŸÅŸäŸÑŸÖ</p>
                    </div>
                    <div id="l10-project" style="margin-bottom:40px;">
                        <!-- JS Injected -->
                    </div>

                </div>
            </div>

        </main>
    </div>

    <!-- SCRIPTS -->
    <script>
        // --- DATA ---
        const vocabList = [
            { en: "fairy tale", ar: "ÿ≠ŸÉÿßŸäÿ© ÿÆŸäÿßŸÑŸäÿ©", icon: "üßö‚Äç‚ôÄÔ∏è" },
            { en: "animation", ar: "ÿ±ÿ≥ŸàŸÖ ŸÖÿ™ÿ≠ÿ±ŸÉÿ©", icon: "üé®" },
            { en: "western", ar: "ÿ£ŸÅŸÑÿßŸÖ ÿßŸÑÿ∫ÿ±ÿ®", icon: "ü§†" },
            { en: "mystery", ar: "ÿ∫ŸÖŸàÿ∂", icon: "üïµÔ∏è‚Äç‚ôÇÔ∏è" },
            { en: "comedy", ar: "ŸÉŸàŸÖŸäÿØŸäÿß", icon: "üòÇ" },
            { en: "cartoon", ar: "ŸÉÿ±ÿ™ŸàŸÜ", icon: "üì∫" },
            { en: "documentary", ar: "Ÿàÿ´ÿßÿ¶ŸÇŸä", icon: "üåç" },
            { en: "drama", ar: "ÿØÿ±ÿßŸÖÿß", icon: "üé≠" },
            { en: "horror", ar: "ÿ±ÿπÿ®", icon: "üëª" },
            { en: "sci-fi", ar: "ÿÆŸäÿßŸÑ ÿπŸÑŸÖŸä", icon: "üëΩ" },
            { en: "play", ar: "ŸÖÿ≥ÿ±ÿ≠Ÿäÿ©", icon: "üé¨" },
            { en: "musical", ar: "ŸÖŸàÿ≥ŸäŸÇŸä", icon: "üéµ" },
            { en: "thriller", ar: "ÿ•ÿ´ÿßÿ±ÿ©", icon: "üò±" }
        ];

        const quizQuestions = [
            { q: "What genre is about space and aliens?", options: ["western", "sci-fi", "comedy", "drama"], correct: 1 },
            { q: "A funny movie is called a __________.", options: ["horror", "thriller", "comedy", "mystery"], correct: 2 },
            { q: "A movie about cowboys and horses.", options: ["western", "fairy tale", "musical", "play"], correct: 0 },
            { q: "A story with magic and princesses.", options: ["documentary", "fairy tale", "sci-fi", "thriller"], correct: 1 },
            { q: "A film that gives facts about real life.", options: ["cartoon", "animation", "documentary", "horror"], correct: 2 },
            { q: "Cinderella is a __________.", options: ["fairy tale", "western", "sci-fi", "documentary"], correct: 0 },
            { q: "Which genre makes you scared?", options: ["comedy", "musical", "horror", "play"], correct: 2 },
            { q: "A movie with lots of singing and dancing.", options: ["western", "musical", "mystery", "drama"], correct: 1 },
            { q: "Sherlock Holmes is a __________ movie.", options: ["sci-fi", "mystery", "comedy", "cartoon"], correct: 1 },
            { q: "SpongeBob is a __________.", options: ["documentary", "cartoon", "thriller", "horror"], correct: 1 }
        ];

        const fillBlanksData = [
            { sentence: "I like _____ movies because they are funny.", options: ["horror", "comedy"], correct: "comedy" },
            { sentence: "_____ movies are about real life.", options: ["documentary", "sci-fi"], correct: "documentary" },
            { sentence: "Aliens are in _____ movies.", options: ["western", "sci-fi"], correct: "sci-fi" },
            { sentence: "I watched a scary _____ last night.", options: ["musical", "horror"], correct: "horror" }
        ];

        // --- LESSON 2 GRAMMAR DATA ---
        const pronounData = {
            "was": ["I", "He", "She", "It"],
            "were": ["You", "We", "They"]
        };

        const grammarQuestions = [
            { q: "I _____ reading a book yesterday.", options: ["was", "were", "is", "are"], correct: 0 },
            { q: "They _____ playing football.", options: ["was", "were", "am", "is"], correct: 1 },
            { q: "_____ she sleeping?", options: ["Were", "Was", "Are", "Do"], correct: 1 },
            { q: "We were _____ TV.", options: ["watch", "watched", "watching", "watches"], correct: 2 },
            { q: "Why _____ you crying?", options: ["was", "were", "is", "did"], correct: 1 },
            { q: "He was _____ his homework.", options: ["doing", "do", "did", "done"], correct: 0 },
            { q: "The boys _____ not listening.", options: ["was", "were", "is", "am"], correct: 1 },
            { q: "It _____ raining all night.", options: ["were", "was", "are", "be"], correct: 1 },
            { q: "What were you _____?", options: ["eating", "ate", "eat", "eats"], correct: 0 },
            { q: "I _____ not feeling well.", options: ["were", "was", "are", "can"], correct: 1 }
        ];

        let gQuizIndex = 0;
        let gQuizScore = 0;

        // --- PREPARE GAMES DATA ---
        
        // Missing Letter Data Generator (Fixes space issue)
        const missingLetterData = vocabList.map(item => {
            const originalWord = item.en;
            const targetWord = originalWord; // Keep lowercase
            
            // Find indices that are NOT spaces
            const validIndices = [];
            for (let i = 0; i < targetWord.length; i++) {
                if (targetWord[i] !== ' ') validIndices.push(i);
            }
            
            // Pick random valid index
            const missingIndex = validIndices[Math.floor(Math.random() * validIndices.length)];
            const correctChar = targetWord[missingIndex];
            
            // Generate options
            const options = [correctChar];
            while(options.length < 3) {
                const randChar = String.fromCharCode(97 + Math.floor(Math.random() * 26)); // Lowercase a-z
                if(!options.includes(randChar)) options.push(randChar);
            }
            
            // Generate display string
            let displayString = "";
            for (let i = 0; i < targetWord.length; i++) {
                if (i === missingIndex) displayString += "_";
                else displayString += targetWord[i];
            }

            return {
                word: targetWord,
                correct: correctChar,
                options: options.sort(() => Math.random() - 0.5),
                displayWord: displayString
            };
        });

        // --- STATE ---
        let currentQuizIndex = 0;
        let quizScore = 0;
        let currentMissingIndex = 0;
        let currentUnscrambleIndex = 0;
        
        let matchingRound = 0;
        const matchingItemsPerRound = 5;
        let currentRoundMatches = 0; // successfully matched pairs in current round
        let totalRoundItems = 0;

        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            renderVocab();
            renderMissingLetter();
            renderUnscramble();
            renderMatching(0);
            renderFillBlanks();
            renderQuiz();
            initDraggablePronouns(); // Init Grammar Game
            renderGrammarQuiz();     // Init Grammar Quiz
        });

        // --- NAV ---
        function toggleNav() {
            const dropdown = document.getElementById('navDropdown');
            dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
        }

        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.nav-tab').forEach(el => el.classList.remove('active'));
            
            const selectedContent = document.getElementById(tabId + '-section');
            selectedContent.style.display = 'block';
            document.getElementById('tab-' + tabId).classList.add('active');
            
            // Re-trigger animation
            selectedContent.classList.remove('animate__fadeIn');
            void selectedContent.offsetWidth; 
            selectedContent.classList.add('animate__fadeIn');
        }

        // --- RENDER VOCAB ---
        function renderVocab() {
            const container = document.getElementById('vocab-grid-container');
            container.innerHTML = vocabList.map(item => `
                <div class="vocab-card">
                    <div class="card-icon">${item.icon}</div>
                    <div class="card-word">${item.en}</div>
                    <div class="card-trans">${item.ar}</div>
                    <div class="card-actions">
                        <button onclick="speak('${item.en}')" class="btn-icon" title="Listen">üîä</button>
                        <button onclick="checkPronunciation('${item.en}', this)" class="btn-icon btn-mic" title="Speak">üé§</button>
                    </div>
                </div>
            `).join('');
        }

        // --- SPEECH ---
        function speak(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                utterance.rate = 0.9;
                window.speechSynthesis.speak(utterance);
            }
        }

        function checkPronunciation(targetWord, btn) {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                alert("Speech recognition is not supported in this browser. Please use Google Chrome or Edge.");
                return;
            }
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            const recognition = new SpeechRecognition();
            recognition.lang = 'en-US';
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;

            btn.classList.add('listening');
            recognition.start();

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript.toLowerCase();
                const target = targetWord.toLowerCase();
                btn.classList.remove('listening');
                console.log(`Heard: ${transcript}, Target: ${target}`);

                if (transcript.includes(target) || target.includes(transcript)) { 
                    btn.classList.add('correct');
                    playSound('success');
                    setTimeout(() => { btn.classList.remove('correct'); }, 2000);
                } else {
                    btn.classList.add('wrong');
                    playSound('error');
                    setTimeout(() => { btn.classList.remove('wrong'); }, 2000);
                }
            };

            recognition.onerror = (e) => {
                btn.classList.remove('listening');
                console.error(e.error);
            };
        }

        function speakWord(el) { speak(el.innerText); }
        function playReading() { speak(document.getElementById('reading-text').innerText); }

        // --- GAME UTIL ---
        function showGame(gameId) {
            document.querySelectorAll('.game-container').forEach(el => {
                el.classList.remove('active');
                setTimeout(() => { if(!el.classList.contains('active')) el.style.display = 'none'; }, 200);
            });
            document.querySelectorAll('.game-select-btn').forEach(el => el.classList.remove('active'));
            
            const target = document.getElementById('game-' + gameId);
            target.style.display = 'block';
            setTimeout(() => target.classList.add('active'), 10);
            
            document.querySelector(`button[onclick="showGame('${gameId}')"]`).classList.add('active');
        }

        function showCelebration() {
            const overlay = document.getElementById('celebration-overlay');
            overlay.style.display = 'flex';
            playSound('win');
            createBalloons();
        }

        function closeCelebration() {
            document.getElementById('celebration-overlay').style.display = 'none';
            // Clear balloons
            document.querySelectorAll('.balloon').forEach(el => el.remove());
        }

        function createBalloons() {
            const colors = ['#f72585', '#7209b7', '#3a0ca3', '#4361ee', '#4cc9f0', '#ffd166', '#06d6a0'];
            for(let i=0; i<30; i++) {
                const b = document.createElement('div');
                b.className = 'balloon';
                b.style.left = Math.random() * 100 + 'vw';
                b.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                b.style.animationDuration = (Math.random() * 2 + 3) + 's';
                b.style.animationDelay = Math.random() + 's';
                document.getElementById('celebration-overlay').appendChild(b);
            }
        }

        function playSound(type) {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);
            
            if (type === 'success') {
                // Happy high pitch
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(600, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, ctx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.1, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.5);
                osc.start();
                osc.stop(ctx.currentTime + 0.5);
            } else if (type === 'pop') {
                // Bubble pop sound (New)
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(400, ctx.currentTime + 0.05);
                gain.gain.setValueAtTime(0.1, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.1);
                osc.start();
                osc.stop(ctx.currentTime + 0.1);
            } else if (type === 'win') {
                // Victory fanfare
                const now = ctx.currentTime;
                // Note 1
                const osc1 = ctx.createOscillator();
                const gain1 = ctx.createGain();
                osc1.connect(gain1); gain1.connect(ctx.destination);
                osc1.frequency.setValueAtTime(523.25, now); // C
                gain1.gain.setValueAtTime(0.2, now); gain1.gain.linearRampToValueAtTime(0, now+2);
                osc1.start(now); osc1.stop(now+2);
                
                // Note 3
                 const osc2 = ctx.createOscillator();
                const gain2 = ctx.createGain();
                osc2.connect(gain2); gain2.connect(ctx.destination);
                osc2.frequency.setValueAtTime(659.25, now+0.2); // E
                gain2.gain.setValueAtTime(0.2, now+0.2); gain2.gain.linearRampToValueAtTime(0, now+2.2);
                osc2.start(now+0.2); osc2.stop(now+2.2);

                 // Note 5
                 const osc3 = ctx.createOscillator();
                const gain3 = ctx.createGain();
                osc3.connect(gain3); gain3.connect(ctx.destination);
                osc3.frequency.setValueAtTime(783.99, now+0.4); // G
                gain3.gain.setValueAtTime(0.2, now+0.4); gain3.gain.linearRampToValueAtTime(0, now+2.4);
                osc3.start(now+0.4); osc3.stop(now+2.4);

            } else {
                // Error (low buzz)
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(100, ctx.currentTime + 0.2);
                gain.gain.setValueAtTime(0.1, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.4);
                osc.start();
                osc.stop(ctx.currentTime + 0.5);
            }
        }

        // --- GAME 1: MISSING LETTER ---
        function renderMissingLetter() {
            const container = document.getElementById('missing-letter-area');
            if (currentMissingIndex >= missingLetterData.length) {
                container.innerHTML = `<div class="quiz-final"><h3>Done!</h3></div>`; // Temp placeholder, real celebration triggered below
                showCelebration();
                // Reset for next time
                container.innerHTML = `
                    <div class="quiz-final">
                        <span class="trophy">üèÜ</span>
                        <h3>Complete!</h3>
                        <button onclick="currentMissingIndex=0;renderMissingLetter()" class="retry-btn">Play Again</button>
                    </div>`;
                return;
            }

            const data = missingLetterData[currentMissingIndex];
            container.innerHTML = `
                <div class="word-display animate__animated animate__fadeIn">${data.displayWord}</div>
                <div class="options-container">
                    ${data.options.map(opt => `
                        <button onclick="checkMissing('${opt}')" class="option-btn ripple">${opt}</button>
                    `).join('')}
                </div>
                <div style="margin-top:30px; color:#aaa; font-size:0.9rem;">Word ${currentMissingIndex + 1} / ${missingLetterData.length}</div>
            `;
        }

        window.checkMissing = function(selected) {
            const data = missingLetterData[currentMissingIndex];
            if (selected === data.correct) {
                playSound('success');
                currentMissingIndex++;
                setTimeout(renderMissingLetter, 300);
            } else {
                playSound('error');
            }
        };

        // --- GAME 1.5: UNSCRAMBLE ---
        
        // Prepare Unscramble Data
        const unscrambleData = vocabList.map(item => {
            const word = item.en; // already lowercase
            // Create tiles: split by character, keep spaces as placeholders
            const letters = word.split('').filter(c => c !== ' ');
            const scrambled = [...letters].sort(() => Math.random() - 0.5);
            return {
                target: word,
                scrambled: scrambled
            };
        });

        let currentInput = []; // array of {char, tileIndex}

        function renderUnscramble() {
            const container = document.getElementById('unscramble-area');
            if (currentUnscrambleIndex >= unscrambleData.length) {
                showCelebration();
                container.innerHTML = `
                    <div class="quiz-final">
                        <span class="trophy">üéâ</span>
                        <h3>All Words Arranged!</h3>
                        <button onclick="currentUnscrambleIndex=0;renderUnscramble()" class="retry-btn">Play Again</button>
                    </div>`;
                return;
            }

            const data = unscrambleData[currentUnscrambleIndex];
            currentInput = [];
            
            // Build Slots
            let slotsHtml = '';
            for (let char of data.target) {
                if (char === ' ') {
                    slotsHtml += `<div class="letter-slot space"></div>`;
                } else {
                    slotsHtml += `<div class="letter-slot" id="slot-${currentInput.length + document.querySelectorAll('.letter-slot:not(.space)').length}"></div>`; 
                    // This ID logic is tricky in template literal loop, simplified below
                }
            }
            
            // Simpler slot generation
            const targetChars = data.target.split('');
            const slots = targetChars.map((char, i) => {
                if (char === ' ') return `<div class="letter-slot space"></div>`;
                return `<div class="letter-slot" data-index="${i}"></div>`;
            }).join('');

            // Build Tiles
            const tiles = data.scrambled.map((char, i) => `
                <button onclick="clickTile('${char}', ${i}, this)" class="tile-btn" id="tile-${i}">${char}</button>
            `).join('');

            container.innerHTML = `
                <div class="scramble-slots" id="u-slots">
                    ${slots}
                </div>
                <div class="letter-pool" id="u-pool">
                    ${tiles}
                </div>
                <div style="margin-top:30px; color:#aaa; font-size:0.9rem;">Word ${currentUnscrambleIndex + 1} / ${unscrambleData.length}</div>
                <button onclick="resetUnscramble()" style="margin-top:15px; padding:8px 20px; border-radius:15px; border:1px solid #ddd; background:#fff; cursor:pointer;">Reset Word</button>
            `;
        }

        window.clickTile = function(char, tileIdx, btn) {
            if (btn.classList.contains('used')) return;
            
            const data = unscrambleData[currentUnscrambleIndex];
            const targetArray = data.target.split('');
            
            // Find next empty slot (skipping spaces)
            const slots = document.querySelectorAll('#u-slots .letter-slot:not(.space)');
            let nextSlotIndex = currentInput.length;
            
            if (nextSlotIndex < slots.length) {
                // Add to input
                currentInput.push({ char: char, tileIdx: tileIdx });
                
                // Update UI
                const slot = slots[nextSlotIndex];
                slot.textContent = char;
                slot.classList.add('filled');
                btn.classList.add('used');
                playSound('pop'); // New sound

                // Check if full
                if (currentInput.length === slots.length) {
                    checkUnscrambleResult();
                }
            }
        };

        window.resetUnscramble = function() {
            currentInput = [];
             renderUnscramble();
        };

        function checkUnscrambleResult() {
            const data = unscrambleData[currentUnscrambleIndex];
            const userInput = currentInput.map(x => x.char).join('');
            const targetNoSpaces = data.target.replace(/ /g, '');
            
            if (userInput === targetNoSpaces) {
                playSound('success');
                currentUnscrambleIndex++;
                setTimeout(renderUnscramble, 1000);
            } else {
                playSound('error');
                // Shake slots
                const slots = document.getElementById('u-slots');
                slots.style.animation = 'shake 0.4s';
                setTimeout(() => {
                    slots.style.animation = '';
                    resetUnscramble();
                }, 600);
            }
        }

        // --- GAME 2: MATCHING (ROUNDS) ---
        function renderMatching(round) {
            matchingRound = round;
            const startIdx = round * matchingItemsPerRound;
            const endIdx = startIdx + matchingItemsPerRound;
            const items = vocabList.slice(startIdx, endIdx);
            
            if (items.length === 0) {
                 showCelebration();
                 document.getElementById('matching-area').parentElement.innerHTML = `
                    <div class="quiz-final">
                        <span class="trophy">üèÜ</span>
                        <h3>Matching Completed!</h3>
                        <button onclick="location.reload()" class="retry-btn">Reset</button>
                    </div>
                 `;
                 return;
            }

            totalRoundItems = items.length;
            currentRoundMatches = 0;
            
            const totalRounds = Math.ceil(vocabList.length / matchingItemsPerRound);
            document.getElementById('matching-level-indicator').innerText = `Round ${round + 1} / ${totalRounds}`;

            const enItems = [...items].sort(() => Math.random() - 0.5);
            const arItems = [...items].sort(() => Math.random() - 0.5);

            const html = `
                <div class="col-wrapper">
                    ${enItems.map(i => `<div class="match-card en" data-id="${i.en}" onclick="selectMatch(this, 'en')">${i.en}</div>`).join('')}
                </div>
                <div class="col-wrapper">
                    ${arItems.map(i => `<div class="match-card ar" data-id="${i.en}" onclick="selectMatch(this, 'ar')">${i.ar}</div>`).join('')}
                </div>
            `;
            document.getElementById('matching-area').innerHTML = html;
        }

        let selectedEn = null;
        let selectedAr = null;

        window.selectMatch = function(btn, type) {
            if (btn.classList.contains('matched')) return;

            if (type === 'en') {
                if (selectedEn) selectedEn.classList.remove('selected');
                selectedEn = btn;
            } else {
                if (selectedAr) selectedAr.classList.remove('selected');
                selectedAr = btn;
            }
            btn.classList.add('selected');

            if (selectedEn && selectedAr) {
                if (selectedEn.dataset.id === selectedAr.dataset.id) {
                    // MATCH!
                    selectedEn.classList.add('matched');
                    selectedAr.classList.add('matched');
                    playSound('success');
                    selectedEn = null;
                    selectedAr = null;
                    currentRoundMatches++;
                    if (currentRoundMatches === totalRoundItems) {
                        setTimeout(() => {
                            playSound('success');
                            renderMatching(matchingRound + 1);
                        }, 1000);
                    }
                } else {
                    // NO MATCH
                    playSound('error');
                    setTimeout(() => {
                        if (selectedEn) selectedEn.classList.remove('selected');
                        if (selectedAr) selectedAr.classList.remove('selected');
                        selectedEn = null;
                        selectedAr = null;
                    }, 600);
                }
            }
        };

        // --- GAME 3: FILL BLANKS ---
        function renderFillBlanks() {
            const container = document.getElementById('fill-blanks-area');
            container.innerHTML = fillBlanksData.map((item, idx) => `
                <div class="fill-blank-card" id="fb-${idx}">
                    <p class="sentence">${item.sentence.replace('_____', '<span class="blank">____</span>')}</p>
                    <div class="fb-options">
                        ${item.options.map(opt => `
                            <button onclick="checkFillBlank(${idx}, '${opt}', this)" class="fb-btn">${opt}</button>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        window.checkFillBlank = function(idx, selected, btn) {
            const data = fillBlanksData[idx];
            const card = document.getElementById(`fb-${idx}`);
            const blank = card.querySelector('.blank');
            if (selected === data.correct) {
                blank.textContent = selected;
                blank.classList.add('filled');
                btn.classList.add('correct');
                playSound('success');
                // Disable all buttons in this card
                card.querySelectorAll('.fb-btn').forEach(b => b.disabled = true);
            } else {
                btn.classList.add('wrong');
                playSound('error');
            }
        };

        // --- QUIZ ---
        function renderQuiz() {
            if (currentQuizIndex >= quizQuestions.length) {
                document.getElementById('quiz-question-container').innerHTML = `
                    <div class="quiz-final">
                        <span class="trophy">üèÜ</span>
                        <h3 class="final-title">Quiz Completed!</h3>
                        <div class="final-score">Score: ${quizScore} / ${quizQuestions.length}</div>
                        <button onclick="location.reload()" class="retry-btn">Reset Lesson</button>
                    </div>
                `;
                return;
            }
            const q = quizQuestions[currentQuizIndex];
            const html = `
                <h3 class="q-text animate__animated animate__fadeIn">${q.q}</h3>
                <div class="q-options animate__animated animate__fadeInUp">
                    ${q.options.map((opt, idx) => `
                        <button onclick="answerQuiz(${idx}, this)" class="q-btn">${opt}</button>
                    `).join('')}
                </div>
            `;
            document.getElementById('quiz-question-container').innerHTML = html;
            document.getElementById('q-current').textContent = currentQuizIndex + 1;
        }

        window.answerQuiz = function(idx, btn) {
            const q = quizQuestions[currentQuizIndex];
            const buttons = document.querySelectorAll('.q-btn');
            buttons.forEach(b => b.disabled = true);
            
            if (idx === q.correct) {
                btn.classList.add('correct');
                quizScore++;
                document.getElementById('q-score').textContent = quizScore;
                playSound('success');
            } else {
                btn.classList.add('wrong');
                buttons[q.correct].classList.add('correct');
                playSound('error');
            }
            setTimeout(() => {
                currentQuizIndex++;
                renderQuiz();
            }, 1500);
        };

        // --- LESSON 2 JS ---

        // 1. Pronoun Sorter
        // 1. Pronoun Sorter (Mobile & Desktop)
        function initDraggablePronouns() {
            const draggables = document.querySelectorAll('.draggable-item');
            const buckets = document.querySelectorAll('.sort-bucket');

            // --- DESKTOP EVENTS ---
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', () => { draggable.classList.add('dragging'); });
                draggable.addEventListener('dragend', () => { draggable.classList.remove('dragging'); });
                
                // --- MOBILE TOUCH EVENTS ---
                draggable.addEventListener('touchstart', handleTouchStart, {passive: false});
                draggable.addEventListener('touchmove', handleTouchMove, {passive: false});
                draggable.addEventListener('touchend', handleTouchEnd);
            });

            buckets.forEach(bucket => {
                bucket.addEventListener('dragover', e => {
                    e.preventDefault();
                    bucket.classList.add('drag-over');
                });
                bucket.addEventListener('dragleave', () => { bucket.classList.remove('drag-over'); });
                bucket.addEventListener('drop', e => {
                    e.preventDefault();
                    bucket.classList.remove('drag-over');
                    const draggable = document.querySelector('.dragging');
                    if(draggable) {
                        bucket.querySelector('.bucket-content').appendChild(draggable);
                        playSound('pop');
                    }
                });
            });

            // --- TOUCH LOGIC ---
            let touchDragItem = null;
            let touchStartX = 0;
            let touchStartY = 0;
            let initialTransform = '';

            function handleTouchStart(e) {
                if (!e.target.classList.contains('draggable-item')) return;
                
                touchDragItem = e.target;
                e.preventDefault(); // Stop scrolling
                
                // Visual feedback
                touchDragItem.classList.add('dragging');
                touchDragItem.style.position = 'relative'; 
                touchDragItem.style.zIndex = '1000';
                touchDragItem.style.transition = 'none'; // Instant movement
                
                const touch = e.touches[0];
                touchStartX = touch.clientX;
                touchStartY = touch.clientY;
                initialTransform = touchDragItem.style.transform;
            }

            function handleTouchMove(e) {
                if (!touchDragItem) return;
                e.preventDefault();
                
                const touch = e.touches[0];
                const deltaX = touch.clientX - touchStartX;
                const deltaY = touch.clientY - touchStartY;
                
                // Move element
                touchDragItem.style.transform = `translate(${deltaX}px, ${deltaY}px)`;
            }

            function handleTouchEnd(e) {
                if (!touchDragItem) return;
                
                // 1. Temporarily hide to find element below
                touchDragItem.style.display = 'none';
                const touch = e.changedTouches[0];
                const elemBelow = document.elementFromPoint(touch.clientX, touch.clientY);
                touchDragItem.style.display = 'inline-block'; // Restore (was flex/block etc based on CSS)
                
                // 2. Check overlap
                const bucket = elemBelow ? elemBelow.closest('.sort-bucket') : null;
                
                if (bucket) {
                    // SUCCESS DROP
                    bucket.querySelector('.bucket-content').appendChild(touchDragItem);
                    playSound('pop');
                    
                    // Add nice interaction
                    bucket.classList.add('drag-over');
                    setTimeout(() => bucket.classList.remove('drag-over'), 300);
                }
                
                // 3. Cleanup Styles
                touchDragItem.classList.remove('dragging');
                touchDragItem.style.position = '';
                touchDragItem.style.zIndex = '';
                touchDragItem.style.transform = '';
                touchDragItem.style.transition = '';
                
                touchDragItem = null;
            }
        }

        function checkPronounSort() {
            let correct = 0;
            const wasContainer = document.getElementById('bucket-was').querySelector('.bucket-content');
            const wereContainer = document.getElementById('bucket-were').querySelector('.bucket-content');
            
            // Check WAS
            [...wasContainer.children].forEach(el => {
                if (pronData.was.includes(el.innerText)) correct++;
                else el.style.backgroundColor = '#ef476f';
            });
             // Check WERE
            [...wereContainer.children].forEach(el => {
                if (pronData.were.includes(el.innerText)) correct++;
                else el.style.backgroundColor = '#ef476f';
            });

            const pronData = {
                "was": ["I", "He", "She", "It"],
                "were": ["You", "We", "They"]
            };
            
            // Reset colors if correct
            const allItems = document.querySelectorAll('.draggable-item');
            let isAllCorrect = true;
            allItems.forEach(el => {
                const parentId = el.parentElement.parentElement.id; // bucket-was or bucket-were
                const word = el.innerText;
                const shouldBe = pronData.was.includes(word) ? 'bucket-was' : 'bucket-were';
                
                if (parentId === shouldBe) {
                    el.style.backgroundColor = '#06d6a0'; // green
                    el.style.color = 'white';
                } else {
                    el.style.backgroundColor = '#ef476f'; // red
                    el.style.color = 'white';
                    isAllCorrect = false;
                }
            });

            if (isAllCorrect) {
                 document.getElementById('sort-feedback').innerHTML = '<span style="color:green; font-weight:bold;">Excellent! All Correct!</span>';
                 playSound('success');
            } else {
                 document.getElementById('sort-feedback').innerHTML = '<span style="color:red; font-weight:bold;">Some mistakes. Try again!</span>';
                 playSound('error');
            }
        }

        // 2. Dialogue
        function checkDialogue() {
            let allCorrect = true;
            document.querySelectorAll('.d-input').forEach(inp => {
                if (inp.value.toLowerCase().trim() === inp.dataset.ans) {
                    inp.classList.add('correct');
                    inp.classList.remove('wrong');
                } else {
                    inp.classList.add('wrong');
                    inp.classList.remove('correct');
                    allCorrect = false;
                }
            });
            if (allCorrect) {
                playSound('success');
                showCelebration();
            } else {
                playSound('error');
            }
        }

        // 3. Grammar Quiz
        function renderGrammarQuiz() {
            if (gQuizIndex >= grammarQuestions.length) {
                const percentage = (gQuizScore / grammarQuestions.length) * 10;
                document.getElementById('grammar-quiz-container').innerHTML = `
                    <div class="quiz-final">
                        <span class="trophy">üéì</span>
                        <h3 class="final-title">Grammar Master!</h3>
                        <div class="final-score">Score: ${gQuizScore} / 10</div>
                        <p class="celeb-msg">You know your Past Progressive!</p>
                        <button onclick="location.reload()" class="retry-btn">Finish Lesson</button>
                    </div>
                `;
                showCelebration();
                return;
            }
            const q = grammarQuestions[gQuizIndex];
            const html = `
                <h3 class="q-text animate__animated animate__fadeIn" style="font-size:1.8rem;">${gQuizIndex+1}. ${q.q}</h3>
                <div class="q-options animate__animated animate__fadeInUp">
                    ${q.options.map((opt, idx) => `
                        <button onclick="answerGrammarQuiz(${idx}, this)" class="q-btn">${opt}</button>
                    `).join('')}
                </div>
            `;
            document.getElementById('grammar-quiz-container').innerHTML = html;
            document.getElementById('gq-current').textContent = gQuizIndex + 1;
        }

        window.answerGrammarQuiz = function(idx, btn) {
            const q = grammarQuestions[gQuizIndex];
            const buttons = document.querySelectorAll('#grammar-quiz-container .q-btn');
            buttons.forEach(b => b.disabled = true);
            
            if (idx === q.correct) {
                btn.classList.add('correct');
                gQuizScore++;
                document.getElementById('gq-score').textContent = gQuizScore;
                playSound('success');
            } else {
                btn.classList.add('wrong');
                buttons[q.correct].classList.add('correct');
                playSound('error');
            }
            setTimeout(() => {
                gQuizIndex++;
                renderGrammarQuiz();
            }, 1500);
        };

    </script>
    <script>
        // --- LESSON 3 & 4 DATA & LOGIC ---

        const vocabListL3 = [
            { en: "school", ar: "ŸÖÿØÿ±ÿ≥ÿ©", icon: "üè´" },
            { en: "presentation", ar: "ÿπÿ±ÿ∂", icon: "üìä" },
            { en: "exercise", ar: "ÿ™ŸÖÿ±ŸäŸÜ", icon: "üí™" },
            { en: "agree", ar: "ŸäŸàÿßŸÅŸÇ", icon: "ü§ù" },
            { en: "bookcase", ar: "ÿÆÿ≤ÿßŸÜÿ© ŸÉÿ™ÿ®", icon: "üìö" },
            { en: "mystery", ar: "ÿ∫ŸÖŸàÿ∂", icon: "üïµÔ∏è" },
            { en: "dinner", ar: "ÿπÿ¥ÿßÿ°", icon: "üçΩÔ∏è" },
            { en: "dog", ar: "ŸÉŸÑÿ®", icon: "üêï" },
            { en: "plot", ar: "ÿ≠ÿ®ŸÉÿ©", icon: "üìù" },
            { en: "reading", ar: "ŸÇÿ±ÿßÿ°ÿ©", icon: "üìñ" },
            { en: "fairy tale", ar: "ÿ≠ŸÉÿßŸäÿ© ÿÆŸäÿßŸÑŸäÿ©", icon: "üßö" },
            { en: "story", ar: "ŸÇÿµÿ©", icon: "üìú" },
            { en: "pizza", ar: "ÿ®Ÿäÿ™ÿ≤ÿß", icon: "üçï" }
        ];

        const storyContentL3 = `
            <p>Connor and Kai were arguing. They only had two days until their <span class="highlight-word" onclick="speak('presentation')">presentation</span>, and they couldn't <span class="highlight-word" onclick="speak('agree')">agree</span> on a book to present.</p>
            <span class="arabic-translation">ŸÉÿßŸÜ ŸÉŸàŸÜŸàÿ± ŸàŸÉÿßŸä Ÿäÿ™ÿ¨ÿßÿØŸÑÿßŸÜ. ŸÑŸÖ Ÿäÿ™ÿ®ŸÇ ŸÑÿØŸäŸáŸÖÿß ÿ≥ŸàŸâ ŸäŸàŸÖŸäŸÜ ÿ≠ÿ™Ÿâ ÿπÿ±ÿ∂ŸáŸÖÿß ÿßŸÑÿ™ŸÇÿØŸäŸÖŸäÿå ŸàŸÑŸÖ Ÿäÿ™ŸÖŸÉŸÜÿß ŸÖŸÜ ÿßŸÑÿßÿ™ŸÅÿßŸÇ ÿπŸÑŸâ ŸÉÿ™ÿßÿ® ŸÑÿ™ŸÇÿØŸäŸÖŸá.</span>
            
            <p>"I was <span class="highlight-word" onclick="speak('reading')">reading</span> this one last summer ‚Äî it's a <span class="highlight-word" onclick="speak('fairy tale')">fairy tale</span>. The <span class="highlight-word" onclick="speak('plot')">plot</span> is..." started Kai.</p>
            <span class="arabic-translation">"ŸÉŸÜÿ™ ÿ£ŸÇÿ±ÿ£ Ÿáÿ∞ÿß ÿßŸÑŸÉÿ™ÿßÿ® ÿßŸÑÿµŸäŸÅ ÿßŸÑŸÖÿßÿ∂Ÿä ‚Äî ÿ•ŸÜŸá ÿ≠ŸÉÿßŸäÿ© ÿÆŸäÿßŸÑŸäÿ©. ÿßŸÑÿ≠ÿ®ŸÉÿ© ŸáŸä..." ÿ®ÿØÿ£ ŸÉÿßŸä.</span>

            <p>"No, no," said Connor. "I don't want to present a fairy tale. What about this musical I was watching last night?"</p>
            <span class="arabic-translation">"ŸÑÿßÿå ŸÑÿßÿå" ŸÇÿßŸÑ ŸÉŸàŸÜŸàÿ±. "ŸÑÿß ÿ£ÿ±ŸäÿØ ÿ™ŸÇÿØŸäŸÖ ÿ≠ŸÉÿßŸäÿ© ÿÆŸäÿßŸÑŸäÿ©. ŸÖÿßÿ∞ÿß ÿπŸÜ Ÿáÿ∞Ÿá ÿßŸÑŸÖÿ≥ÿ±ÿ≠Ÿäÿ© ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸäÿ© ÿßŸÑÿ™Ÿä ŸÉŸÜÿ™ ÿ£ÿ¥ÿßŸáÿØŸáÿß ÿßŸÑŸÑŸäŸÑÿ© ÿßŸÑŸÖÿßÿ∂Ÿäÿ©ÿü"</span>

            <p>Kai took a deep breath. "But we're supposed to present a book," said Kai. "Not a musical, or a play, or a movie."</p>
            <span class="arabic-translation">ÿ£ÿÆÿ∞ ŸÉÿßŸä ŸÜŸÅÿ≥ÿßŸã ÿπŸÖŸäŸÇÿßŸã. ŸÇÿßŸÑ ŸÉÿßŸä: "ŸÑŸÉŸÜ ŸÖŸÜ ÿßŸÑŸÖŸÅÿ™ÿ±ÿ∂ ÿ£ŸÜ ŸÜŸÇÿØŸÖ ŸÉÿ™ÿßÿ®ÿßŸãÿå ŸàŸÑŸäÿ≥ ŸÖÿ≥ÿ±ÿ≠Ÿäÿ© ŸÖŸàÿ≥ŸäŸÇŸäÿ© ÿ£Ÿà ŸÖÿ≥ÿ±ÿ≠Ÿäÿ© ÿ£Ÿà ŸÅŸäŸÑŸÖÿßŸã."</span>

            <p>But Connor didn't like books. He preferred watching movies.</p>
            <span class="arabic-translation">ŸÑŸÉŸÜ ŸÉŸàŸÜŸàÿ± ŸÑŸÖ Ÿäÿ≠ÿ® ÿßŸÑŸÉÿ™ÿ®. ŸÉÿßŸÜ ŸäŸÅÿ∂ŸÑ ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿ£ŸÅŸÑÿßŸÖ.</span>

            <p>"I have an idea," said Kai. He took out a book from the <span class="highlight-word" onclick="speak('bookcase')">bookcase</span> and showed it to Connor.</p>
            <span class="arabic-translation">ŸÇÿßŸÑ ŸÉÿßŸä: "ŸÑÿØŸä ŸÅŸÉÿ±ÿ©". ÿ£ÿÆÿ±ÿ¨ ŸÉÿ™ÿßÿ®ÿßŸã ŸÖŸÜ ÿÆÿ≤ÿßŸÜÿ© ÿßŸÑŸÉÿ™ÿ® Ÿàÿ£ÿ±ÿßŸá ŸÑŸÉŸàŸÜŸàÿ±.</span>

            <p>"I was reading this book last year. Do you remember I was talking about it all the time? It's about a real-life <span class="highlight-word" onclick="speak('mystery')">mystery</span>, and there is a documentary about it. You should watch the documentary and see what you think."</p>
            <span class="arabic-translation">"ŸÉŸÜÿ™ ÿ£ŸÇÿ±ÿ£ Ÿáÿ∞ÿß ÿßŸÑŸÉÿ™ÿßÿ® ÿßŸÑÿπÿßŸÖ ÿßŸÑŸÖÿßÿ∂Ÿä. ŸáŸÑ ÿ™ÿ∞ŸÉÿ± ÿ£ŸÜŸÜŸä ŸÉŸÜÿ™ ÿ£ÿ™ÿ≠ÿØÿ´ ÿπŸÜŸá ÿ∑ŸàÿßŸÑ ÿßŸÑŸàŸÇÿ™ÿü ÿ•ŸÜŸá ŸäÿØŸàÿ± ÿ≠ŸàŸÑ ŸÑÿ∫ÿ≤ ŸàÿßŸÇÿπŸäÿå ŸàŸäŸàÿ¨ÿØ ŸÅŸäŸÑŸÖ Ÿàÿ´ÿßÿ¶ŸÇŸä ÿπŸÜŸá. Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ÿ¥ÿßŸáÿØ ÿßŸÑŸÅŸäŸÑŸÖ ÿßŸÑŸàÿ´ÿßÿ¶ŸÇŸä Ÿàÿ™ÿÆÿ®ÿ±ŸÜŸä ÿ±ÿ£ŸäŸÉ."</span>

            <p>Connor looked at the cover. He liked mystery movies, and he liked documentaries. He decided to try it.</p>
            <span class="arabic-translation">ŸÜÿ∏ÿ± ŸÉŸàŸÜŸàÿ± ÿ•ŸÑŸâ ÿßŸÑÿ∫ŸÑÿßŸÅ. ŸÉÿßŸÜ Ÿäÿ≠ÿ® ÿ£ŸÅŸÑÿßŸÖ ÿßŸÑÿ∫ŸÖŸàÿ∂ ŸàŸäÿ≠ÿ® ÿßŸÑÿ£ŸÅŸÑÿßŸÖ ÿßŸÑŸàÿ´ÿßÿ¶ŸÇŸäÿ©. ŸÇÿ±ÿ± ÿ™ÿ¨ÿ±ÿ®ÿ™Ÿá.</span>
            
            <p>When Connor came to <span class="highlight-word" onclick="speak('school')">school</span> the next day, he was smiling.</p>
            <span class="arabic-translation">ÿπŸÜÿØŸÖÿß ÿ¨ÿßÿ° ŸÉŸàŸÜŸàÿ± ÿ•ŸÑŸâ ÿßŸÑŸÖÿØÿ±ÿ≥ÿ© ŸÅŸä ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ™ÿßŸÑŸäÿå ŸÉÿßŸÜ Ÿäÿ®ÿ™ÿ≥ŸÖ.</span>

            <p>"I loved the documentary!" he said when he saw Kai. "When I was watching it, I decided to read the book ‚Äî I was reading it all night!" Connor took out three more books from his backpack and showed them to Kai. "I found a drama about the same <span class="highlight-word" onclick="speak('story')">story</span>, and there is a cartoon, too!"</p>
            <span class="arabic-translation">"ŸÑŸÇÿØ ÿ£ÿ≠ÿ®ÿ®ÿ™ ÿßŸÑŸÅŸäŸÑŸÖ ÿßŸÑŸàÿ´ÿßÿ¶ŸÇŸä!" ŸÇÿßŸÑ ÿπŸÜÿØŸÖÿß ÿ±ÿ£Ÿâ ŸÉÿßŸä. "ÿπŸÜÿØŸÖÿß ŸÉŸÜÿ™ ÿ£ÿ¥ÿßŸáÿØŸáÿå ŸÇÿ±ÿ±ÿ™ ŸÇÿ±ÿßÿ°ÿ© ÿßŸÑŸÉÿ™ÿßÿ® ‚Äî ŸÉŸÜÿ™ ÿ£ŸÇÿ±ÿ£Ÿá ÿ∑ŸàÿßŸÑ ÿßŸÑŸÑŸäŸÑ!" ÿ£ÿÆÿ±ÿ¨ ŸÉŸàŸÜŸàÿ± ÿ´ŸÑÿßÿ´ÿ© ŸÉÿ™ÿ® ÿ£ÿÆÿ±Ÿâ ŸÖŸÜ ÿ≠ŸÇŸäÿ®ÿ™Ÿá Ÿàÿ£ÿ±ÿßŸáÿß ŸÑŸÉÿßŸä. "Ÿàÿ¨ÿØÿ™ ÿØÿ±ÿßŸÖÿß ÿ≠ŸàŸÑ ŸÜŸÅÿ≥ ÿßŸÑŸÇÿµÿ©ÿå ŸàŸáŸÜÿßŸÉ ŸÉÿ±ÿ™ŸàŸÜ ÿ£Ÿäÿ∂ÿßŸã!"</span>

            <p>Kai was happy they found a book that Connor was interested in. "I think our presentation will be great!" he said.</p>
            <span class="arabic-translation">ŸÉÿßŸÜ ŸÉÿßŸä ÿ≥ÿπŸäÿØÿßŸã ŸÑÿ£ŸÜŸáŸÖ Ÿàÿ¨ÿØŸàÿß ŸÉÿ™ÿßÿ®ÿßŸã ŸäŸáÿ™ŸÖ ÿ®Ÿá ŸÉŸàŸÜŸàÿ±. ŸÇÿßŸÑ: "ÿ£ÿπÿ™ŸÇÿØ ÿ£ŸÜ ÿπÿ±ÿ∂ŸÜÿß ÿ≥ŸäŸÉŸàŸÜ ÿ±ÿßÿ¶ÿπÿßŸã!"</span>
        `;

        const comprehensionQ = [
            { q: "What were Kai and Connor doing for homework?", options: ["Playing a game", "Preparing a presentation", "Watching a movie"], correct: 1 },
            { q: "Why weren't they happy at the start?", options: ["They were arguing", "They were hungry", "They were tired"], correct: 0 },
            { q: "How was Kai acting?", options: ["He was angry", "He was trying to stay calm", "He was crying"], correct: 1 },
            { q: "What was Connor doing the night before?", options: ["Reading a book", "Sleeping", "Watching a musical"], correct: 2 },
            { q: "What did Kai ask Connor to do?", options: ["Watch a documentary", "Eat pizza", "Walk the dog"], correct: 0 },
            { q: "Why was Connor smiling at school?", options: ["He liked the documentary and book", "He got an A+", "It was a holiday"], correct: 0 },
            { q: "How do you know Connor was excited?", options: ["He was dancing", "He was carrying more books", "He was singing"], correct: 1 }
        ];

        const listeningTFDataFinal = [
             { text: "Liliana was telling a comedy story.", ar: "ŸÉÿßŸÜÿ™ ŸÑŸäŸÑŸäÿßŸÜÿß ÿ™ÿ±ŸàŸä ŸÇÿµÿ© ŸÉŸàŸÖŸäÿØŸäÿ©.", isTrue: false, correction: "She was telling a fairy tale." },
             { text: "The story started in Jayden's house.", ar: "ÿ®ÿØÿ£ÿ™ ÿßŸÑŸÇÿµÿ© ŸÅŸä ŸÖŸÜÿ≤ŸÑ ÿ¨ÿßŸäÿØŸÜ.", isTrue: true, correction: "" },
             { text: "Jayden was going to visit his dad, who was sick.", ar: "ŸÉÿßŸÜ ÿ¨ÿßŸäÿØŸÜ ŸÅŸä ÿ∑ÿ±ŸäŸÇŸá ŸÑÿ≤Ÿäÿßÿ±ÿ© ŸàÿßŸÑÿØŸá ÿßŸÑŸÖÿ±Ÿäÿ∂.", isTrue: false, correction: "He was going to visit his cousin." },
             { text: "When Jayden was walking in the forest, a bear was talking on the phone.", ar: "ÿπŸÜÿØŸÖÿß ŸÉÿßŸÜ ÿ¨ÿßŸäÿØŸÜ ŸäŸÖÿ¥Ÿä ŸÅŸä ÿßŸÑÿ∫ÿßÿ®ÿ©ÿå ŸÉÿßŸÜ ÿßŸÑÿØÿ® Ÿäÿ™ÿ≠ÿØÿ´ ÿ®ÿßŸÑŸáÿßÿ™ŸÅ.", isTrue: false, correction: "A bear was watching him." },
             { text: "Jayden got to Victoria's house and found the bear in her bed.", ar: "ŸàÿµŸÑ ÿ¨ÿßŸäÿØŸÜ ÿ•ŸÑŸâ ŸÖŸÜÿ≤ŸÑ ŸÅŸäŸÉÿ™Ÿàÿ±Ÿäÿß ŸàŸàÿ¨ÿØ ÿßŸÑÿØÿ® ŸÅŸä ÿ≥ÿ±Ÿäÿ±Ÿáÿß.", isTrue: false, correction: "He found nobody there." },
             { text: "Jayden was talking to the bear on the phone.", ar: "ŸÉÿßŸÜ ÿ¨ÿßŸäÿØŸÜ Ÿäÿ™ÿ≠ÿØÿ´ ÿ•ŸÑŸâ ÿßŸÑÿØÿ® ÿ®ÿßŸÑŸáÿßÿ™ŸÅ.", isTrue: true, correction: "" },
             { text: "The bear was sick.", ar: "ŸÉÿßŸÜ ÿßŸÑÿØÿ® ŸÖÿ±Ÿäÿ∂ÿßŸã.", isTrue: false, correction: "The bear was pretending to be sick." },
             { text: "Jayden found the bear in the forest with Victoria's phone and hat.", ar: "Ÿàÿ¨ÿØ ÿ¨ÿßŸäÿØŸÜ ÿßŸÑÿØÿ® ŸÅŸä ÿßŸÑÿ∫ÿßÿ®ÿ© ŸÖÿπ Ÿáÿßÿ™ŸÅ ŸàŸÇÿ®ÿπÿ© ŸÅŸäŸÉÿ™Ÿàÿ±Ÿäÿß.", isTrue: true, correction: "" },
             { text: "The bear scared the family away.", ar: "ÿ£ÿÆÿßŸÅ ÿßŸÑÿØÿ® ÿßŸÑÿπÿßÿ¶ŸÑÿ©.", isTrue: false, correction: "The family scared the bear away." }
        ];

        const vocabListL4 = [
            { en: "fairy tale", ar: "ÿ≠ŸÉÿßŸäÿ© ÿÆÿ±ÿßŸÅŸäÿ©", icon: "üßö" },
            { en: "comedy", ar: "ŸÉŸàŸÖŸäÿØŸäÿß", icon: "üòÇ" },
            { en: "bear", ar: "ÿØÿ®", icon: "üêª" },
            { en: "forest", ar: "ÿ∫ÿßÿ®ÿ©", icon: "üå≤" },
            { en: "cousin", ar: "ÿßÿ®ŸÜ ÿπŸÖ / ÿßÿ®ŸÜ ÿÆÿßŸÑ", icon: "üë¶" },
            { en: "sick", ar: "ŸÖÿ±Ÿäÿ∂", icon: "ü§í" },
            { en: "pretend", ar: "Ÿäÿ™ÿ∏ÿßŸáÿ±", icon: "üé≠" },
            { en: "scare", ar: "ŸäÿÆŸäŸÅ", icon: "üò±" },
            { en: "recognize", ar: "Ÿäÿ™ÿπÿ±ŸÅ ÿπŸÑŸâ", icon: "üßê" },
            { en: "similar", ar: "ŸÖÿ¥ÿßÿ®Ÿá", icon: "üîÑ" }
        ];

        const l4Questions = [
            { 
                q: "Do you recognize the story?", 
                qAr: "ŸáŸÑ ÿ™ÿπÿ±ŸÅ Ÿáÿ∞Ÿá ÿßŸÑŸÇÿµÿ©ÿü",
                a: "Yes, the story seems familiar.",
                aAr: "ŸÜÿπŸÖÿå ÿßŸÑŸÇÿµÿ© ÿ™ÿ®ÿØŸà ŸÖÿ£ŸÑŸàŸÅÿ©."
            },
            { 
                q: "Which fairy tale is it similar to?", 
                qAr: "ÿ£Ÿä ÿ≠ŸÉÿßŸäÿ© ÿÆÿ±ÿßŸÅŸäÿ© ÿ™ÿ¥ÿ®Ÿá Ÿáÿ∞Ÿá ÿßŸÑŸÇÿµÿ©ÿü",
                a: "It's similar to 'Goldilocks and the Three Bears'.",
                aAr: "ÿ•ŸÜŸáÿß ÿ™ÿ¥ÿ®Ÿá 'ÿ¨ŸàŸÑÿØŸäŸÑŸàŸÉÿ≥ ŸàÿßŸÑÿØÿ®ÿ®ÿ© ÿßŸÑÿ´ŸÑÿßÿ´ÿ©'."
            },
            { 
                q: "What is similar? What is different?", 
                qAr: "ŸÖÿß ÿ£Ÿàÿ¨Ÿá ÿßŸÑÿ¥ÿ®Ÿá ŸàÿßŸÑÿßÿÆÿ™ŸÑÿßŸÅÿü",
                a: "Similarities: There's a bear involved in both stories.<br>Differences: Jayden is the main character in this story whereas Goldilocks is the main character in the 'Three Bears'.",
                aAr: "ÿ£Ÿàÿ¨Ÿá ÿßŸÑÿ¥ÿ®Ÿá: ŸäŸàÿ¨ÿØ ÿØÿ® ŸÅŸä ŸÉŸÑÿ™ÿß ÿßŸÑŸÇÿµÿ™ŸäŸÜ.<br>ÿßŸÑÿßÿÆÿ™ŸÑÿßŸÅÿßÿ™: ÿ¨ÿßŸäÿØŸÜ ŸáŸà ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑŸÇÿµÿ© ÿ®ŸäŸÜŸÖÿß ÿ¨ŸàŸÑÿØŸäŸÑŸàŸÉÿ≥ ŸáŸä ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ŸÅŸä 'ÿßŸÑÿØÿ®ÿ®ÿ© ÿßŸÑÿ´ŸÑÿßÿ´ÿ©'."
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
             initLesson3();
             renderLesson4();
        });

        function initLesson3() {
            const vocabContainer = document.getElementById('l3-vocab-bar');
            vocabContainer.innerHTML = vocabListL3.map(w => `
                <div class="vocab-chip" onclick="speak('${w.en}')">
                    <span class="icon">${w.icon}</span>
                    <span>${w.en}</span>
                </div>
            `).join('');

            document.getElementById('l3-story-text').innerHTML = storyContentL3;

            const quizContainer = document.getElementById('l3-quiz-wrapper');
            let qHtml = '';
            comprehensionQ.forEach((q, idx) => {
                qHtml += `
                    <div style="margin-bottom:20px; background:#f9f9f9; padding:15px; border-radius:10px;">
                        <p style="font-weight:bold; margin-bottom:10px;">${idx+1}. ${q.q}</p>
                        <div style="display:flex; gap:10px; flex-wrap:wrap;">
                            ${q.options.map((opt, oIdx) => `
                                <button onclick="checkL3Quiz(${idx}, ${oIdx}, this)" class="tf-btn" data-q="${idx}">${opt}</button>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            quizContainer.innerHTML = qHtml;
        }

        function toggleStoryTranslation() {
            document.querySelectorAll('.arabic-translation').forEach(el => el.classList.toggle('show'));
        }

        function speakStory() {
            const tempDiv = document.createElement("div");
            tempDiv.innerHTML = storyContentL3;
            tempDiv.querySelectorAll('.arabic-translation').forEach(e => e.remove());
            speak(tempDiv.innerText);
        }

        window.checkL3Quiz = function(qIdx, oIdx, btn) {
            const q = comprehensionQ[qIdx];
             btn.parentElement.querySelectorAll('button').forEach(b => {
                 b.classList.remove('selected-true', 'selected-false');
                 b.style.background = ''; b.style.color = '';
             });

            if (oIdx === q.correct) {
                btn.classList.add('selected-true');
                playSound('success');
            } else {
                btn.classList.add('selected-false');
                playSound('error');
            }
        };


        function renderLesson4() {
             const container = document.getElementById('l4-tf-container');
             
             // 0. Voice Control
             let html = `
                <div style="text-align:center; margin-bottom:20px; padding:15px; background:#fff; border-radius:30px; box-shadow:0 5px 15px rgba(0,0,0,0.05);">
                    <label style="font-weight:bold; color:var(--primary); margin-right:10px;">Voice Tone:</label>
                    <select id="voice-select" onchange="updateVoice()" style="padding:8px 15px; border-radius:15px; border:1px solid #ddd; outline:none;">
                        <option value="1">Normal Speed</option>
                        <option value="0.8">Slower (0.8x)</option>
                        <option value="1.2">Faster (1.2x)</option>
                    </select>
                </div>
             `;

             // 1. Vocabulary Section
             html += `<div class="reading-vocab-bar" style="justify-content:center; margin-bottom:40px;">`;
             vocabListL4.forEach(w => {
                 html += `
                    <div class="vocab-chip animate__animated animate__zoomIn" onclick="speak('${w.en}')" style="flex-direction:column; padding:15px; min-width:110px;">
                        <span style="font-size:2rem;">${w.icon}</span>
                        <span style="color:var(--primary);">${w.en}</span>
                        <span style="font-family:'Tajawal'; font-size:0.9rem; color:#666;">${w.ar}</span>
                    </div>
                 `;
             });
             html += `</div>`;

             // 2. T/F Section
             html += `<h3 style="text-align:center; color:var(--dark); margin-bottom:25px; font-size: 1.8rem;">Listen & Correct (ÿßÿ≥ÿ™ŸÖÿπ Ÿàÿµÿ≠ÿ≠)</h3>`;
             html += `<div style="display:grid; gap:20px; max-width:900px; margin:0 auto 40px;">`;
             listeningTFDataFinal.forEach((item, idx) => {
                 html += `
                    <div class="tf-card animate__animated animate__fadeInUp" id="tf-card-${idx}" style="animation-delay:${idx*0.1}s; flex-direction:column; align-items:flex-start; padding: 25px;">
                        <div style="width:100%; display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                            <div>
                                <p style="font-weight:700; font-size:1.5rem; color:#2d3748; margin-bottom:8px;">${idx+1}. ${item.text} <button class="btn-icon small" style="display:inline-flex; width:40px; height:40px; font-size:1.2rem;" onclick="speak('${item.text.replace(/'/g, "\\'")}')">üîä</button></p>
                                <p style="font-family:'Tajawal'; color:#718096; font-size:1.3rem; margin:0;">${item.ar}</p>
                            </div>
                            <div class="tf-buttons">
                                <button onclick="checkTF(${idx}, true, this)" class="tf-btn true" style="padding:15px 35px; font-size:1.3rem;"> T </button>
                                <button onclick="checkTF(${idx}, false, this)" class="tf-btn false" style="padding:15px 35px; font-size:1.3rem;"> F </button>
                            </div>
                        </div>
                        <div id="tf-feedback-${idx}" class="tf-feedback" style="font-size:1.2rem;"></div>
                    </div>
                 `;
             });
             html += `</div>`;

             // 3. Discussion Section
             html += `<div class="discussion-box-pro animate__animated animate__fadeIn" style="max-width:900px; margin:0 auto 40px;">
                        <h3 style="text-align:center; color:#d35400; margin-bottom:25px; font-size:1.8rem;">üó£Ô∏è Let's Discuss (ŸáŸäÿß ŸÜÿ™ŸÜÿßŸÇÿ¥)</h3>
                        ${l4Questions.map((q, i) => `
                            <div class="discussion-item" style="flex-direction:column; align-items:flex-start; padding: 25px;">
                                <div style="width:100%; margin-bottom:15px;">
                                    <strong style="color:var(--primary); font-size:1.6rem;">Q${i+1}: ${q.q} <button class="btn-icon small" style="display:inline-flex; width:35px; height:35px;" onclick="speak('${q.q.replace(/'/g, "\\'")}')">üîä</button></strong>
                                    <p style="font-family:'Tajawal'; color:#666; font-size:1.4rem; margin-top:5px;">${q.qAr}</p>
                                </div>
                                <div style="background:#f8f9fa; padding:20px; border-radius:15px; width:100%; border-left:5px solid var(--success);">
                                    <p style="font-weight:bold; color:#2d3748; margin-bottom:8px; font-size:1.4rem;">Answer: ${q.a} <button class="btn-icon small" style="display:inline-flex; width:35px; height:35px;" onclick="speak('${q.a.replace(/'/g, "\\'").replace(/<br>/g, ". ")}')">üîä</button></p>
                                    <p style="font-family:'Tajawal'; color:#718096; font-size:1.3rem;">${q.aAr}</p>
                                </div>
                            </div>
                        `).join('')}
                      </div>`;

             // 4. Big Icons
             html += `
                <div style="display:flex; justify-content:center; gap:50px; margin-top:50px; padding:30px; border-top:2px dashed #eee;">
                    <div style="text-align:center;" class="animate__animated animate__bounceIn">
                        <div style="font-size:5rem; cursor:pointer; transition:transform 0.3s;" onmouseover="this.style.transform='scale(1.2)'" onmouseout="this.style.transform='scale(1)'" onclick="speak('Listening Section')">üéß</div>
                        <span style="font-family:'Tajawal'; font-weight:bold; display:block; margin-top:10px; color:#555;">Listening</span>
                    </div>
                    <div style="text-align:center;" class="animate__animated animate__bounceIn" style="animation-delay:0.2s;">
                        <div style="font-size:5rem; cursor:pointer; transition:transform 0.3s;" onmouseover="this.style.transform='scale(1.2)'" onmouseout="this.style.transform='scale(1)'" onclick="startReadingMic()">üéôÔ∏è</div>
                        <span style="font-family:'Tajawal'; font-weight:bold; display:block; margin-top:10px; color:#555;">Speaking</span>
                    </div>
                </div>
             `;

             container.innerHTML = html;
        }

        let voiceRate = 1;
        window.updateVoice = function() {
            voiceRate = parseFloat(document.getElementById('voice-select').value);
        };

        // Audio Context & Fallbacks
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        // Robust TTS Function
        let voices = [];
        window.speechSynthesis.onvoiceschanged = () => {
             voices = window.speechSynthesis.getVoices();
        };

        window.speak = function(text, rate = 1) {
             if (!window.speechSynthesis) {
                 console.error("Browser does not support TTS.");
                 return;
             }
             
             // Cancel previous
             window.speechSynthesis.cancel();
             
             const utterance = new SpeechSynthesisUtterance(text);
             utterance.lang = 'en-GB'; // British English
             utterance.volume = 1.0; // ÿ£ÿπŸÑŸâ ŸÖÿ≥ÿ™ŸàŸâ ÿµŸàÿ™
             
             // Attempt to find a British English voice
             if (voices.length === 0) voices = window.speechSynthesis.getVoices();
             const britishVoice = voices.find(v => v.lang === 'en-GB') || 
                                  voices.find(v => v.lang.startsWith('en-') && v.name.includes('UK')) ||
                                  voices.find(v => v.lang.startsWith('en-') && v.name.includes('British')) ||
                                  voices.find(v => v.lang.startsWith('en'));
             if (britishVoice) {
                 utterance.voice = britishVoice;
                 console.log('Using voice:', britishVoice.name);
             }
             
             // Use global rate if not provided, or argument (optimized for faster response)
             const globalRate = typeof voiceRate !== 'undefined' ? voiceRate : 0.95;
             utterance.rate = rate !== 1 ? rate : globalRate;
             
             window.speechSynthesis.speak(utterance);
        };
        
        // Missing playSound shim
        window.playSound = function(type) {
             console.log("Playing sound:", type);
             // Optional: Use TTS as fallback for success/error if no files
             // if (type === 'success') new Audio('/static/sounds/success.mp3').play().catch(() => {});
             // if (type === 'error') new Audio('/static/sounds/error.mp3').play().catch(() => {});
             
             // For now, logging prevents crash. The user asked about *words* (TTS).
        };

        window.checkTF = function(idx, isTrue, btn) {
            const data = listeningTFDataFinal[idx];
            const feedback = document.getElementById(`tf-feedback-${idx}`);
            const card = document.getElementById(`tf-card-${idx}`);
            
            card.querySelectorAll('button').forEach(b => b.disabled = true);

            if (isTrue === data.isTrue) {
                btn.style.background = "#10b981"; btn.style.color = "white"; // Green
                btn.style.opacity = "1";
                btn.style.transform = "scale(1.1)";
                playSound('success');
                feedback.innerHTML = `<span style="color:green; font-weight:bold;">Correct!</span> ` + (data.correction ? ' (' + data.correction + ')' : "");
                feedback.style.display = 'block';
                showPointsFeedback(10);
            } else {
                btn.style.background = "#ef4444"; btn.style.color="white"; // Red
                playSound('error');
                feedback.innerHTML = `<span style="color:red; font-weight:bold;">Wrong!</span> ${data.correction ? '<br>Correction: ' + data.correction : '<br>It is ' + (data.isTrue?'True':'False')}`;
                feedback.style.display = 'block';
            }
        };

        // --- LESSON 5 & 6 DATA & LOGIC ---
        
        const storyboardSteps = [
            { id: 1, title: "2. Who & When?", ar: "ŸÖŸÜ ŸàŸÖÿ™Ÿâÿü", icon: "üë•", detail: "Who are your <b>characters</b>?<br>When do they <b>appear</b>?", imgInfo: "Vicky & Elena" },
            { id: 2, title: "4. How & Are?", ar: "ŸÉŸäŸÅ ŸàŸáŸÑÿü", icon: "ü•π", detail: "How do they <b>feel</b>?<br>Are they <b>alone</b>?", imgInfo: "Happy/Sad/Scared" },
            { id: 3, title: "3. What?", ar: "ŸÖÿßÿ∞ÿß ŸäŸÅÿπŸÑŸàŸÜÿü", icon: "üèÉ", detail: "What do they do?<br><b>Whisper, Wish, Decide</b>", imgInfo: "Actions" },
            { id: 4, title: "1. The 3 Acts", ar: "ÿßŸÑŸÅÿµŸàŸÑ ÿßŸÑÿ´ŸÑÿßÿ´ÿ©", icon: "üé¨", detail: "Beginning, Main Events, Ending.<br>How does it <b>end</b>?", imgInfo: "Timeline" }
        ];

        const vocabListL5 = [
            { en: "characters", ar: "ÿ¥ÿÆÿµŸäÿßÿ™", icon: "üë•" },
            { en: "appear", ar: "Ÿäÿ∏Ÿáÿ±", icon: "üëÄ" },
            { en: "feel", ar: "Ÿäÿ¥ÿπÿ±", icon: "‚ù§Ô∏è" },
            { en: "alone", ar: "Ÿàÿ≠ŸäÿØ", icon: "üë§" },
            { en: "whisper", ar: "ŸäŸáŸÖÿ≥", icon: "ü§´" },
            { en: "wish", ar: "Ÿäÿ™ŸÖŸÜŸâ", icon: "üå†" },
            { en: "decide", ar: "ŸäŸÇÿ±ÿ±", icon: "ü§î" },
            { en: "act", ar: "ŸÅÿµŸÑ (ŸÖÿ≥ÿ±ÿ≠Ÿä)", icon: "üé≠" },
            { en: "end", ar: "ŸÜŸáÿßŸäÿ©", icon: "üèÅ" }
        ];

        const fillStoryL5 = `
            I <select class="d-select" data-ans="feel"></select> well now, but the story and its <select class="d-select" data-ans="characters"></select> are scary. 
            The worst <select class="d-select" data-ans="act"></select> is the one with kids <select class="d-select" data-ans="alone"></select> in the park. 
            First, they <select class="d-select" data-ans="decided"></select> to sleep there, but when the animals <select class="d-select" data-ans="appeared"></select> they <select class="d-select" data-ans="wished"></select> they were at home in their beds.
        `;
        // Simplified text based on image exercise 3

        const grammarSuggestionsData = [
            { expr: "Why don't + Subject + Verb", form: "Why don't you...", ex: "Why don't you tell me about your characters?", ar: "ŸÑŸÖÿßÿ∞ÿß ŸÑÿß ÿ™ÿÆÿ®ÿ±ŸÜŸä ÿπŸÜ ÿ¥ÿÆÿµŸäÿßÿ™ŸÉÿü" },
            { expr: "Why don't + we + Verb", form: "Why don't we...", ex: "Why don't we draw a storyboard?", ar: "ŸÑŸÖÿßÿ∞ÿß ŸÑÿß ŸÜÿ±ÿ≥ŸÖ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÇÿµÿ©ÿü" },
            { expr: "How about + Verb(+ing)", form: "How about...", ex: "How about ending the story with a fight?", ar: "ŸÖÿß ÿ±ÿ£ŸäŸÉ ÿ£ŸÜ ŸÜŸÜŸáŸä ÿßŸÑŸÇÿµÿ© ÿ®ŸÇÿ™ÿßŸÑÿü" },
            { expr: "What about + Verb(+ing)", form: "What about...", ex: "What about asking the teacher for help?", ar: "ŸÖÿß ÿ±ÿ£ŸäŸÉ ÿ£ŸÜ ŸÜÿ∑ŸÑÿ® ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÖŸÜ ÿßŸÑŸÖÿπŸÑŸÖÿü" }
        ];

        const unscrambleDataL6 = [
            { target: "Why don't we work on our storyboard?", parts: ["Why", "don't", "we", "work", "on", "our", "storyboard?"], ar: "ŸÑŸÖÿßÿ∞ÿß ŸÑÿß ŸÜÿπŸÖŸÑ ÿπŸÑŸâ ŸÖÿÆÿ∑ÿ∑ ÿßŸÑŸÇÿµÿ© ÿßŸÑÿÆÿßÿµ ÿ®ŸÜÿßÿü" },
            { target: "How about meeting at my house?", parts: ["meeting", "How", "at", "house?", "my", "about"], ar: "ŸÖÿß ÿ±ÿ£ŸäŸÉ ÿ£ŸÜ ŸÜŸÑÿ™ŸÇŸä ŸÅŸä ÿ®Ÿäÿ™Ÿäÿü" },
            { target: "What about inviting my sister?", parts: ["sister?", "about", "inviting", "my", "What"], ar: "ŸÖÿß ÿ±ÿ£ŸäŸÉ ÿ£ŸÜ ŸÜÿØÿπŸà ÿ£ÿÆÿ™Ÿäÿü" },
            { target: "Why don't I come to your house instead?", parts: ["come", "don't", "house", "I", "to", "Why", "instead?", "your"], ar: "ŸÑŸÖÿßÿ∞ÿß ŸÑÿß ÿ¢ÿ™Ÿä ÿ•ŸÑŸâ ŸÖŸÜÿ≤ŸÑŸÉ ÿ®ÿØŸÑÿßŸã ŸÖŸÜ ÿ∞ŸÑŸÉÿü" },
            { target: "How about ending the musical with a beautiful song?", parts: ["ending", "with", "song?", "How", "about", "musical", "beautiful", "the", "a"], ar: "ŸÖÿß ÿ±ÿ£ŸäŸÉ ÿ£ŸÜ ŸÜŸÜŸáŸä ÿßŸÑŸÖÿ≥ÿ±ÿ≠Ÿäÿ© ÿßŸÑÿ∫ŸÜÿßÿ¶Ÿäÿ© ÿ®ÿ£ÿ∫ŸÜŸäÿ© ÿ¨ŸÖŸäŸÑÿ©ÿü" }
        ];

        const readAndMatchL6 = [
            { name: "Ian", nameAr: "ÿ•ŸäÿßŸÜ", color: "#ff9800", question: "Why don't we draw a storyboard?", questionAr: "ŸÑŸÖÿßÿ∞ÿß ŸÑÿß ŸÜÿ±ÿ≥ŸÖ ŸÖÿÆÿ∑ÿ∑ ÿßŸÑŸÇÿµÿ©ÿü" },
            { name: "Matt", nameAr: "ŸÖÿßÿ™", color: "#e91e63", question: "What about writing a story about us?", questionAr: "ŸÖÿß ÿ±ÿ£ŸäŸÉ ÿ£ŸÜ ŸÜŸÉÿ™ÿ® ŸÇÿµÿ© ÿπŸÜÿßÿü" },
            { name: "Jon", nameAr: "ÿ¨ŸàŸÜ", color: "#8bc34a", question: "How about making a comedy?", questionAr: "ŸÖÿß ÿ±ÿ£ŸäŸÉ ÿ£ŸÜ ŸÜÿπŸÖŸÑ ŸÇÿµÿ© ŸÉŸàŸÖŸäÿØŸäÿ©ÿü" }
        ];

        // --- LESSON 7: READING DATA ---

        const l7PreQuestions = [
            { q: "1. Where might you find this text?", qAr: "ÿ£ŸäŸÜ ŸÇÿØ ÿ™ÿ¨ÿØ Ÿáÿ∞ÿß ÿßŸÑŸÜÿµÿü", answer: "on a website", answerAr: "ÿπŸÑŸâ ŸÖŸàŸÇÿπ ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä" },
            { q: "2. What do you think it is about?", qAr: "ŸÖÿß ÿ±ÿ£ŸäŸÉ ÿπŸÖÿß Ÿäÿ™ÿ≠ÿØÿ´ÿü", answer: "movies", answerAr: "ÿ£ŸÅŸÑÿßŸÖ" },
            { q: "3. Who do you think it is for?", qAr: "ŸÑŸÖŸÜ ŸáŸà ŸÖŸàÿ¨Ÿáÿü", answer: "the author of the blog", answerAr: "ŸÉÿßÿ™ÿ® ÿßŸÑŸÖÿØŸàŸÜÿ©" }
        ];

        const l7ReadingPassage = `
            <h3 style="color:var(--primary); font-size:2rem; margin-bottom:20px; text-align:center;">My Favorite Movie Scenes üé¨</h3>
            <p>Welcome again to my movie blog, where I share everything I love (and hate!) about movies. Why don't we get started? Today, I'm talking about my favorite movie scene. Yesterday I was watching a new <span class="vocab-highlight">comedy</span>. My favorite <span class="vocab-highlight">comedian</span> was playing one of the characters ‚Äì he was making me <span class="vocab-highlight">laugh</span> so much! I decided my favorite scene was when the character was whispering a big secret, but a microphone was switched on and everybody was listening! The great thing about this scene is that we were watching the disaster happen, but the character didn't know. Everyone in the movie theater was laughing and shouting at the character ‚Äì of course, he couldn't hear us. I didn't want the movie to end! One thing I didn't like was the other <span class="vocab-highlight">actors</span> ‚Äì they were <span class="vocab-highlight">acting</span> badly. But it was still a great film.</p>
            
            <p>What about discussing the new <span class="vocab-highlight">documentary</span> about a real-life <span class="vocab-highlight">mystery</span>? Well, I didn't enjoy it as much as I thought I would. It's great that they were trying to <span class="vocab-highlight">document</span> an important story ‚Äì I didn't enjoy it, though, because the plot was <span class="vocab-highlight">mysterious</span>, but I didn't understand what was going on. It was strange. By the second half, I wasn't watching anymore. So, those were my thoughts ‚Äì why don't you write a comment to tell me what you think?</p>
        `;

        const l7CompleteSentences = [
            { text: "The text is part of ___", options: ["a blog about movies", "a book review"], answer: 0, ar: "ÿßŸÑŸÜÿµ ÿ¨ÿ≤ÿ° ŸÖŸÜ ___" },
            { text: "This entry discusses ___", options: ["the author's favorite movie scene and a new documentary", "a comedy show"], answer: 0, ar: "Ÿáÿ∞ÿß ÿßŸÑŸÖÿØÿÆŸÑ ŸäŸÜÿßŸÇÿ¥ ___" },
            { text: "Yesterday the author watched ___", options: ["a new comedy", "a horror film"], answer: 0, ar: "ÿ®ÿßŸÑÿ£ŸÖÿ≥ ÿ¥ÿßŸáÿØ ÿßŸÑŸÉÿßÿ™ÿ® ___" },
            { text: "In her favorite scene,  ___", options: ["the comedian was whispering a big secret, but a microphone was switched on", "the actor was singing"], answer: 0, ar: "ŸÅŸä ŸÖÿ¥ŸáÿØŸáÿß ÿßŸÑŸÖŸÅÿ∂ŸÑÿå ___" },
            { text: "To show she liked it, the author used words and phrases like ___", options: ["favorite, laugh so much, the great thing about, I didn't want the movie to end", "boring, terrible"], answer: 0, ar: "ŸÑŸÑÿ™ÿπÿ®Ÿäÿ± ÿπŸÜ ÿ•ÿπÿ¨ÿßÿ®Ÿáÿß ÿßÿ≥ÿ™ÿÆÿØŸÖ ŸÉŸÑŸÖÿßÿ™ ŸÖÿ´ŸÑ ___" },
            { text: "To show she was excited, she used punctuation like ___", options: ["exclamation points", "question marks"], answer: 0, ar: "ŸÑŸÑÿ™ÿπÿ®Ÿäÿ± ÿπŸÜ ÿ≠ŸÖÿßÿ≥Ÿáÿß ÿßÿ≥ÿ™ÿÆÿØŸÖÿ™ ÿπŸÑÿßŸÖÿ™ ÿ™ÿ±ŸÇŸäŸÖ ŸÖÿ´ŸÑ ___" },
            { text: "To show she didn't like some scenes, she used words and phrases like ___", options: ["One thing I didn't like, acting badly, I didn't enjoy it, didn't feel excited, strange", "wonderful, amazing"], answer: 0, ar: "ŸÑŸÑÿ™ÿπÿ®Ÿäÿ± ÿπŸÜ ÿπÿØŸÖ ÿ•ÿπÿ¨ÿßÿ®Ÿáÿß ÿßÿ≥ÿ™ÿÆÿØŸÖÿ™ ŸÉŸÑŸÖÿßÿ™ ŸÖÿ´ŸÑ ___" },
            { text: "We know the author didn't like the new documentary because ___", options: ["by the second half, she wasn't watching anymore", "she loved it"], answer: 0, ar: "ŸÜÿπÿ±ŸÅ ÿ£ŸÜ ÿßŸÑŸÉÿßÿ™ÿ® ŸÑŸÖ Ÿäÿπÿ¨ÿ®Ÿá ÿßŸÑŸÅŸäŸÑŸÖ ÿßŸÑŸàÿ´ÿßÿ¶ŸÇŸä ŸÑÿ£ŸÜŸá ___" }
        ];

        const l7SpeedReading = [
            { 
                text: "Yesterday I was watching a new comedy. My favorite comedian was playing one of the characters ‚Äì he was making me laugh so much!", 
                time: 15, 
                ar: "ÿ®ÿßŸÑÿ£ŸÖÿ≥ ŸÉŸÜÿ™ ÿ£ÿ¥ÿßŸáÿØ ŸÅŸäŸÑŸÖ ŸÉŸàŸÖŸäÿØŸä ÿ¨ÿØŸäÿØ. ŸÉÿßŸÜ ŸÖŸÖÿ´ŸÑŸä ÿßŸÑŸÉŸàŸÖŸäÿØŸä ÿßŸÑŸÖŸÅÿ∂ŸÑ ŸäŸÑÿπÿ® ÿØŸàÿ± ÿ•ÿ≠ÿØŸâ ÿßŸÑÿ¥ÿÆÿµŸäÿßÿ™ - ŸÉÿßŸÜ Ÿäÿ¨ÿπŸÑŸÜŸä ÿ£ÿ∂ÿ≠ŸÉ ŸÉÿ´Ÿäÿ±ÿßŸã!"
            },
            { 
                text: "I decided my favorite scene was when the character was whispering a big secret, but a microphone was switched on, and everybody was listening!", 
                time: 12, 
                ar: "ŸÇÿ±ÿ±ÿ™ ÿ£ŸÜ ŸÖÿ¥ŸáÿØŸä ÿßŸÑŸÖŸÅÿ∂ŸÑ ŸÉÿßŸÜ ÿπŸÜÿØŸÖÿß ŸÉÿßŸÜÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿ™ŸáŸÖÿ≥ ÿ®ÿ≥ÿ± ŸÉÿ®Ÿäÿ±ÿå ŸÑŸÉŸÜ ÿßŸÑŸÖŸäŸÉÿ±ŸàŸÅŸàŸÜ ŸÉÿßŸÜ ŸÖŸÅÿ™Ÿàÿ≠ÿßŸãÿå ŸàÿßŸÑÿ¨ŸÖŸäÿπ ŸÉÿßŸÜŸàÿß Ÿäÿ≥ÿ™ŸÖÿπŸàŸÜ!"
            }
        ];

        const l7Quiz = [
            { 
                q: "What type of text is this?", 
                qAr: "ŸÖÿß ŸÜŸàÿπ Ÿáÿ∞ÿß ÿßŸÑŸÜÿµÿü",
                options: ["A blog post", "A movie review", "A news article", "A story"],
                optionsAr: ["ŸÖŸÜÿ¥Ÿàÿ± ŸÖÿØŸàŸÜÿ©", "ŸÖÿ±ÿßÿ¨ÿπÿ© ŸÅŸäŸÑŸÖ", "ŸÖŸÇÿßŸÑ ÿ•ÿÆÿ®ÿßÿ±Ÿä", "ŸÇÿµÿ©"],
                answer: 0
            },
            { 
                q: "What was the author watching yesterday?", 
                qAr: "ŸÖÿßÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÉÿßÿ™ÿ® Ÿäÿ¥ÿßŸáÿØ ÿ®ÿßŸÑÿ£ŸÖÿ≥ÿü",
                options: ["A new comedy", "A documentary", "A western", "A horror film"],
                optionsAr: ["ŸÉŸàŸÖŸäÿØŸäÿß ÿ¨ÿØŸäÿØÿ©", "Ÿàÿ´ÿßÿ¶ŸÇŸä", "ŸÅŸäŸÑŸÖ ÿ∫ÿ±ÿ®Ÿä", "ŸÅŸäŸÑŸÖ ÿ±ÿπÿ®"],
                answer: 0
            },
            { 
                q: "Who was in the author's favorite scene?", 
                qAr: "ŸÖŸÜ ŸÉÿßŸÜ ŸÅŸä ÿßŸÑŸÖÿ¥ŸáÿØ ÿßŸÑŸÖŸÅÿ∂ŸÑ ŸÑŸÑŸÉÿßÿ™ÿ®ÿü",
                options: ["The comedian", "The director", "The villain", "The hero"],
                optionsAr: ["ÿßŸÑŸÖŸÖÿ´ŸÑ ÿßŸÑŸÉŸàŸÖŸäÿØŸä", "ÿßŸÑŸÖÿÆÿ±ÿ¨", "ÿßŸÑÿ¥ÿ±Ÿäÿ±", "ÿßŸÑÿ®ÿ∑ŸÑ"],
                answer: 0
            },
            { 
                q: "What happened in the favorite scene?", 
                qAr: "ŸÖÿßÿ∞ÿß ÿ≠ÿØÿ´ ŸÅŸä ÿßŸÑŸÖÿ¥ŸáÿØ ÿßŸÑŸÖŸÅÿ∂ŸÑÿü",
                options: ["A character whispered a secret with the microphone on", "A character fell down", "A character sang a song", "A character cried"],
                optionsAr: ["ŸáŸÖÿ≥ ÿ¥ÿÆÿµ ÿ®ÿ≥ÿ± ŸàÿßŸÑŸÖŸäŸÉÿ±ŸàŸÅŸàŸÜ ŸÖŸÅÿ™Ÿàÿ≠", "ÿ≥ŸÇÿ∑ÿ™ ÿ¥ÿÆÿµŸäÿ©", "ÿ∫ŸÜÿ™ ÿ¥ÿÆÿµŸäÿ© ÿ£ÿ∫ŸÜŸäÿ©", "ÿ®ŸÉÿ™ ÿ¥ÿÆÿµŸäÿ©"],
                answer: 0
            },
            { 
                q: "How did the author feel about the comedy?", 
                qAr: "ŸÉŸäŸÅ ÿ¥ÿπÿ± ÿßŸÑŸÉÿßÿ™ÿ® ÿ™ÿ¨ÿßŸá ÿßŸÑŸÉŸàŸÖŸäÿØŸäÿßÿü",
                options: ["She loved it", "She hated it", "She was bored", "She was scared"],
                optionsAr: ["ÿ£ÿ≠ÿ®ÿ™Ÿá", "ŸÉÿ±Ÿáÿ™Ÿá", "ÿ¥ÿπÿ±ÿ™ ÿ®ÿßŸÑŸÖŸÑŸÑ", "ÿ¥ÿπÿ±ÿ™ ÿ®ÿßŸÑÿÆŸàŸÅ"],
                answer: 0
            },
            { 
                q: "What didn't the author like about the movie?", 
                qAr: "ŸÖÿß ÿßŸÑÿ∞Ÿä ŸÑŸÖ Ÿäÿπÿ¨ÿ® ÿßŸÑŸÉÿßÿ™ÿ® ŸÅŸä ÿßŸÑŸÅŸäŸÑŸÖÿü",
                options: ["The other actors were acting badly", "It was too long", "It was too short", "It was scary"],
                optionsAr: ["ÿßŸÑŸÖŸÖÿ´ŸÑŸàŸÜ ÿßŸÑÿ¢ÿÆÿ±ŸàŸÜ ŸÉÿßŸÜŸàÿß ŸäŸÖÿ´ŸÑŸàŸÜ ÿ®ÿ¥ŸÉŸÑ ÿ≥Ÿäÿ¶", "ŸÉÿßŸÜ ÿ∑ŸàŸäŸÑÿßŸã ÿ¨ÿØÿßŸã", "ŸÉÿßŸÜ ŸÇÿµŸäÿ±ÿßŸã ÿ¨ÿØÿßŸã", "ŸÉÿßŸÜ ŸÖÿÆŸäŸÅÿßŸã"],
                answer: 0
            },
            { 
                q: "What did the author watch second?", 
                qAr: "ŸÖÿßÿ∞ÿß ÿ¥ÿßŸáÿØ ÿßŸÑŸÉÿßÿ™ÿ® ÿ´ÿßŸÜŸäÿßŸãÿü",
                options: ["A documentary about a mystery", "A comedy", "A cartoon", "A drama"],
                optionsAr: ["Ÿàÿ´ÿßÿ¶ŸÇŸä ÿπŸÜ ŸÑÿ∫ÿ≤", "ŸÉŸàŸÖŸäÿØŸäÿß", "ŸÉÿ±ÿ™ŸàŸÜ", "ÿØÿ±ÿßŸÖÿß"],
                answer: 0
            },
            { 
                q: "How did the author feel about the documentary?", 
                qAr: "ŸÉŸäŸÅ ÿ¥ÿπÿ± ÿßŸÑŸÉÿßÿ™ÿ® ÿ™ÿ¨ÿßŸá ÿßŸÑŸàÿ´ÿßÿ¶ŸÇŸäÿü",
                options: ["She didn't enjoy it", "She loved it", "She was excited", "She laughed a lot"],
                optionsAr: ["ŸÑŸÖ ÿ™ÿ≥ÿ™ŸÖÿ™ÿπ ÿ®Ÿá", "ÿ£ÿ≠ÿ®ÿ™Ÿá", "ŸÉÿßŸÜÿ™ ŸÖÿ™ÿ≠ŸÖÿ≥ÿ©", "ÿ∂ÿ≠ŸÉÿ™ ŸÉÿ´Ÿäÿ±ÿßŸã"],
                answer: 0
            }
        ];

        const l7PostQuestions = [
            { 
                q: "1. Did you enjoy the author's movie scene?", 
                qAr: "ŸáŸÑ ÿßÿ≥ÿ™ŸÖÿ™ÿπÿ™ ÿ®ŸÖÿ¥ŸáÿØ ÿßŸÑŸÅŸäŸÑŸÖ ŸÑŸÑŸÉÿßÿ™ÿ®ÿü",
                answer: "Yes, I do!  ÿ≠ÿ≥ÿ® ÿßŸÑÿ∑ÿßŸÑÿ®",
                answerAr: "ŸÜÿπŸÖÿå ÿ£ŸÜÿß ŸÉÿ∞ŸÑŸÉ!"
            },
            { 
                q: "2. What happens in it, and why is it your favorite?", 
                qAr: "ŸÖÿßÿ∞ÿß ÿ≠ÿØÿ´ ŸÅŸäŸáÿå ŸàŸÑŸÖÿßÿ∞ÿß ŸáŸà ŸÖŸÅÿ∂ŸÑŸÉ ÿü",
                answer: "A funny character slips on a banana and everyone laughs. It's my favorite because it's silly and fun!",
                answerAr: "ÿ¥ÿÆÿµŸäÿ© ŸÖÿ∂ÿ≠ŸÉÿ© ÿ™ŸÜÿ≤ŸÑŸÇ ÿπŸÑŸâ ŸÖŸàÿ≤ÿ© ŸàÿßŸÑÿ¨ŸÖŸäÿπ Ÿäÿ∂ÿ≠ŸÉ. ÿ•ŸÜŸá ŸÖŸÅÿ∂ŸÑŸä ŸÑÿ£ŸÜŸá ÿ≥ÿÆŸäŸÅ ŸàŸÖŸÖÿ™ÿπ!"
            },
            { 
                q: "3. How did you feel when you were watching it?", 
                qAr: "ŸÉŸäŸÅ ÿ¥ÿπÿ±ÿ™ ÿπŸÜÿØŸÖÿß ŸÉŸÜÿ™ ÿ™ÿ¥ÿßŸáÿØŸáÿü",
                answer: "I felt happy and laughed a lot!",
                answerAr: "ÿ¥ÿπÿ±ÿ™ ÿ®ÿßŸÑÿ≥ÿπÿßÿØÿ© Ÿàÿ∂ÿ≠ŸÉÿ™ ŸÉÿ´Ÿäÿ±ÿßŸã!"
            }
        ];

        // ==================== LESSON 8: WORD WORK DATA ====================

        const l8VocabChart = [
            { word: "comedy", wordAr: "ŸÉŸàŸÖŸäÿØŸäÿß", class: "noun", classAr: "ÿßÿ≥ŸÖ", meaning: "a type of story that makes you laugh", meaningAr: "ŸÜŸàÿπ ÿßŸÑŸÇÿµÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ¨ÿπŸÑŸÉ ÿ™ÿ∂ÿ≠ŸÉ" },
            { word: "comedian", wordAr: "ŸÉŸàŸÖŸäÿØŸä", class: "noun", classAr: "ÿßÿ≥ŸÖ", meaning: "a person who acts in a comedy or tells jokes", meaningAr: "ÿ¥ÿÆÿµ ŸäŸÖÿ´ŸÑ ŸÅŸä ŸÉŸàŸÖŸäÿØŸäÿß ÿ£Ÿà Ÿäÿ±ŸàŸä ÿßŸÑŸÜŸÉÿßÿ™" },
            { word: "documentary", wordAr: "Ÿàÿ´ÿßÿ¶ŸÇŸä", class: "noun", classAr: "ÿßÿ≥ŸÖ", meaning: "a type of movie that tells real events", meaningAr: "ŸÜŸàÿπ ŸÖŸÜ ÿßŸÑÿ£ŸÅŸÑÿßŸÖ Ÿäÿ≠ŸÉŸä ÿ£ÿ≠ÿØÿßÿ´ ÿ≠ŸÇŸäŸÇŸäÿ©" },
            { word: "document", wordAr: "Ÿàÿ´ŸäŸÇÿ©", class: "verb", classAr: "ŸÅÿπŸÑ", meaning: "to record and keep facts about real events", meaningAr: "ÿ™ÿ≥ÿ¨ŸäŸÑ ŸàÿßŸÑÿßÿ≠ÿ™ŸÅÿßÿ∏ ÿ®ÿ≠ŸÇÿßÿ¶ŸÇ ÿπŸÜ ÿ£ÿ≠ÿØÿßÿ´ ÿ≠ŸÇŸäŸÇŸäÿ©" },
            { word: "mystery", wordAr: "ÿ∫ŸÖŸàÿ∂", class: "noun", classAr: "ÿßÿ≥ŸÖ", meaning: "an unexplained event", meaningAr: "ÿ≠ÿØÿ´ ÿ∫Ÿäÿ± ŸÖŸÅÿ≥ÿ±" },
            { word: "mysterious", wordAr: "ÿ∫ÿßŸÖÿ∂", class: "adjective", classAr: "ÿµŸÅÿ©", meaning: "unexplained, or unexplainable", meaningAr: "ÿ∫Ÿäÿ± ŸÖŸÅÿ≥ÿ± ÿ£Ÿà ÿ∫Ÿäÿ± ŸÇÿßÿ®ŸÑ ŸÑŸÑÿ™ŸÅÿ≥Ÿäÿ±" },
            { word: "actor", wordAr: "ŸÖŸÖÿ´ŸÑ", class: "noun", classAr: "ÿßÿ≥ŸÖ", meaning: "a person who plays a part in a movie or play", meaningAr: "ÿ¥ÿÆÿµ ŸäŸÑÿπÿ® ÿØŸàÿ± ŸÅŸä ŸÅŸäŸÑŸÖ ÿ£Ÿà ŸÖÿ≥ÿ±ÿ≠Ÿäÿ©" },
            { word: "act", wordAr: "ŸäŸÖÿ´ŸÑ", class: "verb", classAr: "ŸÅÿπŸÑ", meaning: "to play a part in a movie or play", meaningAr: "ŸäŸÑÿπÿ® ÿØŸàÿ± ŸÅŸä ŸÅŸäŸÑŸÖ ÿ£Ÿà ŸÖÿ≥ÿ±ÿ≠Ÿäÿ©" }
        ];

        const l8SceneQuestions = [
            { 
                q: "What happens in the scene?",
                qAr: "ŸÖÿßÿ∞ÿß Ÿäÿ≠ÿØÿ´ ŸÅŸä ÿßŸÑŸÖÿ¥ŸáÿØÿü",
                options: [
                    "When Elsa sings 'Let It Go'",
                    "A car chase scene",
                    "A funny dance",
                    "A scary monster appears"
                ],
                optionsAr: ["ÿπŸÜÿØŸÖÿß ÿ™ÿ∫ŸÜŸä ÿ•ŸÑÿ≥ÿß 'ÿØÿπŸáÿß ÿ™ÿ∞Ÿáÿ®'", "ŸÖÿ¥ŸáÿØ ŸÖÿ∑ÿßÿ±ÿØÿ© ÿ®ÿßŸÑÿ≥Ÿäÿßÿ±ÿ©", "ÿ±ŸÇÿµÿ© ŸÖÿ∂ÿ≠ŸÉÿ©", "Ÿäÿ∏Ÿáÿ± Ÿàÿ≠ÿ¥ ŸÖÿÆŸäŸÅ"]
            },
            {
                q: "What kind of story is it?",
                qAr: "ŸÖÿß ŸÜŸàÿπ ÿßŸÑŸÇÿµÿ©ÿü",
                options: ["An adventure story", "A comedy", "A horror story", "A mystery"],
                optionsAr: ["ŸÇÿµÿ© ŸÖÿ∫ÿßŸÖÿ±ÿ©", "ŸÉŸàŸÖŸäÿØŸäÿß", "ŸÇÿµÿ© ÿ±ÿπÿ®", "ÿ∫ŸÖŸàÿ∂"]
            },
            {
                q: "What do you like about it?",
                qAr: "ŸÖÿß ÿßŸÑÿ∞Ÿä Ÿäÿπÿ¨ÿ®ŸÉ ŸÅŸäŸáÿü",
                options: [
                    "I like the exciting actions and the brave characters",
                    "I like the funny jokes",
                    "I like the scary moments",
                    "I like the sad ending"
                ],
                optionsAr: ["ÿ£ÿ≠ÿ® ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑŸÖÿ´Ÿäÿ±ÿ© ŸàÿßŸÑÿ¥ÿÆÿµŸäÿßÿ™ ÿßŸÑÿ¥ÿ¨ÿßÿπÿ©", "ÿ£ÿ≠ÿ® ÿßŸÑŸÜŸÉÿßÿ™ ÿßŸÑŸÖÿ∂ÿ≠ŸÉÿ©", "ÿ£ÿ≠ÿ® ÿßŸÑŸÑÿ≠ÿ∏ÿßÿ™ ÿßŸÑŸÖÿÆŸäŸÅÿ©", "ÿ£ÿ≠ÿ® ÿßŸÑŸÜŸáÿßŸäÿ© ÿßŸÑÿ≠ÿ≤ŸäŸÜÿ©"]
            },
            {
                q: "Is there anything you don't like?",
                qAr: "ŸáŸÑ ŸäŸàÿ¨ÿØ ÿ¥Ÿäÿ° ŸÑŸÖ Ÿäÿπÿ¨ÿ®ŸÉÿü",
                options: [
                    "I didn't like the scary monster part",
                    "It was too long",
                    "The music was bad",
                    "Nothing, I loved it all"
                ],
                optionsAr: ["ŸÑŸÖ Ÿäÿπÿ¨ÿ®ŸÜŸä ÿ¨ÿ≤ÿ° ÿßŸÑŸàÿ≠ÿ¥ ÿßŸÑŸÖÿÆŸäŸÅ", "ŸÉÿßŸÜ ÿ∑ŸàŸäŸÑÿßŸã ÿ¨ÿØÿßŸã", "ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ŸÉÿßŸÜÿ™ ÿ≥Ÿäÿ¶ÿ©", "ŸÑÿß ÿ¥Ÿäÿ°ÿå ÿ£ÿ≠ÿ®ÿ®ÿ™ ŸÉŸÑ ÿ¥Ÿäÿ°"]
            }
        ];

        const l8UsefulExpressions = [
            "Why don't we...",
            "What I loved was...",
            "The great thing about...",
            "One thing I didn't like was...",
            "My favorite movie scene is from...",
            "It's a great movie to watch",
            "I didn't want the movie to end!"
        ];

        const l8BlogOptions = {
            movies: ["Frozen Kingdom", "The Lion King", "Spider-Man", "Toy Story", "Moana", "Brave"],
            moviesAr: ["ÿßŸÑŸÖŸÖŸÑŸÉÿ© ÿßŸÑŸÖÿ™ÿ¨ŸÖÿØÿ©", "ÿßŸÑÿ£ÿ≥ÿØ ÿßŸÑŸÖŸÑŸÉ", "ÿßŸÑÿ±ÿ¨ŸÑ ÿßŸÑÿπŸÜŸÉÿ®Ÿàÿ™", "ŸÇÿµÿ© ŸÑÿπÿ®ÿ©", "ŸÖŸàÿßŸÜÿß", "ÿ¥ÿ¨ÿßÿπÿ©"],
            sceneDescriptions: [
                "when Elsa sings 'Let It Go'",
                "when Simba becomes king",
                "when Spider-Man saves the city",
                "when Woody and Buzz become friends"
            ],
            sceneDescriptionsAr: [
                "ÿπŸÜÿØŸÖÿß ÿ™ÿ∫ŸÜŸä ÿ•ŸÑÿ≥ÿß 'ÿØÿπŸáÿß ÿ™ÿ∞Ÿáÿ®'",
                "ÿπŸÜÿØŸÖÿß Ÿäÿµÿ®ÿ≠ ÿ≥ŸäŸÖÿ®ÿß ŸÖŸÑŸÉÿßŸã",
                "ÿπŸÜÿØŸÖÿß ŸäŸÜŸÇÿ∞ ÿßŸÑÿ±ÿ¨ŸÑ ÿßŸÑÿπŸÜŸÉÿ®Ÿàÿ™ ÿßŸÑŸÖÿØŸäŸÜÿ©",
                "ÿπŸÜÿØŸÖÿß Ÿäÿµÿ®ÿ≠ ŸàŸàÿØŸä Ÿàÿ®ÿßÿ≤ ÿ£ÿµÿØŸÇÿßÿ°"
            ],
            whatLoved: [
                "the amazing animation",
                "the exciting action scenes",
                "the funny characters",
                "the beautiful music"
            ],
            whatLovedAr: [
                "ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖÿ™ÿ≠ÿ±ŸÉÿ© ÿßŸÑŸÖÿ∞ŸáŸÑÿ©",
                "ŸÖÿ¥ÿßŸáÿØ ÿßŸÑÿ£ŸÉÿ¥ŸÜ ÿßŸÑŸÖÿ´Ÿäÿ±ÿ©",
                "ÿßŸÑÿ¥ÿÆÿµŸäÿßÿ™ ÿßŸÑŸÖÿ∂ÿ≠ŸÉÿ©",
                "ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ÿßŸÑÿ¨ŸÖŸäŸÑÿ©"
            ],
            whatDisliked: [
                "the scary monster",
                "some parts were too slow",
                "the ending was sad",
                "nothing, I loved it all"
            ],
            whatDislikedAr: [
                "ÿßŸÑŸàÿ≠ÿ¥ ÿßŸÑŸÖÿÆŸäŸÅ",
                "ÿ®ÿπÿ∂ ÿßŸÑÿ£ÿ¨ÿ≤ÿßÿ° ŸÉÿßŸÜÿ™ ÿ®ÿ∑Ÿäÿ¶ÿ© ÿ¨ÿØÿßŸã",
                "ÿßŸÑŸÜŸáÿßŸäÿ© ŸÉÿßŸÜÿ™ ÿ≠ÿ≤ŸäŸÜÿ©",
                "ŸÑÿß ÿ¥Ÿäÿ°ÿå ÿ£ÿ≠ÿ®ÿ®ÿ™ ŸÉŸÑ ÿ¥Ÿäÿ°"
            ]
        };

        // ==================== LESSON 9: STORY STRUCTURE DATA ====================

        const l9ThreeActs = [
            {
                act: "Act I",
                actAr: "ÿßŸÑŸÅÿµŸÑ ÿßŸÑÿ£ŸàŸÑ",
                title: "Context and the start of the journey",
                titleAr: "ÿßŸÑÿ≥ŸäÿßŸÇ Ÿàÿ®ÿØÿßŸäÿ© ÿßŸÑÿ±ÿ≠ŸÑÿ©",
                icon: "üé¨",
                color: "#10b981",
                description: "In the first act, we meet the main character and their world. How was the character living before their journey began? What were their dreams and wishes?",
                descriptionAr: "ŸÅŸä ÿßŸÑŸÅÿµŸÑ ÿßŸÑÿ£ŸàŸÑÿå ŸÜŸÑÿ™ŸÇŸä ÿ®ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ŸàÿπÿßŸÑŸÖŸáŸÖ. ŸÉŸäŸÅ ŸÉÿßŸÜÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿ™ÿπŸäÿ¥ ŸÇÿ®ŸÑ ÿ£ŸÜ ÿ™ÿ®ÿØÿ£ ÿ±ÿ≠ŸÑÿ™ŸáŸÖÿü ŸÖÿß ŸáŸä ÿ£ÿ≠ŸÑÿßŸÖŸáŸÖÿü",
                questions: [
                    "We met the main character and their world. It was like getting ready for an adventure.",
                    "ÿπÿØÿØ ÿ™ÿ≠ÿ™ŸàŸä ÿßŸÑŸÇÿµÿ© ÿπŸÑŸâ ÿ´ŸÑÿßÿ´ÿ© ŸÅÿµŸàŸÑ"
                ]
            },
            {
                act: "Act II",
                actAr: "ÿßŸÑŸÅÿµŸÑ ÿßŸÑÿ´ÿßŸÜŸä",
                title: "Rising tension",
                titleAr: "ÿ™ÿµÿßÿπÿØ ÿßŸÑÿ™Ÿàÿ™ÿ±",
                icon: "‚ö°",
                color: "#ef4444",
                description: "In the middle, act 2, there was more action. The main character was facing more obstacles and enemies and everything was appearing. Maybe they were lying on a beach before something terrible happened.",
                descriptionAr: "ŸÅŸä ÿßŸÑŸÅÿµŸÑ ÿßŸÑÿ´ÿßŸÜŸä ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´. ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ŸÉÿßŸÜÿ™ ÿ™Ÿàÿßÿ¨Ÿá ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿπŸÇÿ®ÿßÿ™ ŸàÿßŸÑÿ£ÿπÿØÿßÿ°",
                questions: [
                    "In the second act: There was more action.",
                    "The character faced more obstacles, and enemies appeared. Tension was rising!"
                ]
            },
            {
                act: "Act III",
                actAr: "ÿßŸÑŸÅÿµŸÑ ÿßŸÑÿ´ÿßŸÑÿ´",
                title: "Climax and Resolution",
                titleAr: "ÿßŸÑÿ∞ÿ±Ÿàÿ© ŸàÿßŸÑÿ≠ŸÑ",
                icon: "üèÜ",
                color: "#3b82f6",
                description: "In all the stories, the third act had the most important event. This is called the climax. After the climax, came the resolution. That's when we learned how the characters were living after their adventure.",
                descriptionAr: "ŸÅŸä ÿ¨ŸÖŸäÿπ ÿßŸÑŸÇÿµÿµÿå ÿßŸÑŸÅÿµŸÑ ÿßŸÑÿ´ÿßŸÑÿ´ ŸÉÿßŸÜ ŸÑÿØŸäŸá ÿßŸÑÿ≠ÿØÿ´ ÿßŸÑÿ£ŸáŸÖ. ÿ®ÿπÿØ ÿßŸÑÿ∞ÿ±Ÿàÿ©ÿå ÿ¨ÿßÿ° ÿßŸÑÿ≠ŸÑ. ÿπŸÜÿØŸáÿß ÿ™ÿπŸÑŸÖŸÜÿß ŸÉŸäŸÅ ŸÉÿßŸÜÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿßÿ™ ÿ™ÿπŸäÿ¥",
                questions: [
                    "The climax: The most important events happened.",
                    "The resolution: We learned how the characters were living after their adventure."
                ]
            }
        ];

        const l9StoryPlannerOptions = {
            storyNames: ["The Lost Hat", "The Missing Toy", "The Magic Book", "The Brave Cat", "The Secret Garden"],
            storyNamesAr: ["ÿßŸÑŸÇÿ®ÿπÿ© ÿßŸÑŸÖŸÅŸÇŸàÿØÿ©", "ÿßŸÑŸÑÿπÿ®ÿ© ÿßŸÑŸÖŸÅŸÇŸàÿØÿ©", "ÿßŸÑŸÉÿ™ÿßÿ® ÿßŸÑÿ≥ÿ≠ÿ±Ÿä", "ÿßŸÑŸÇÿ∑ ÿßŸÑÿ¥ÿ¨ÿßÿπ", "ÿßŸÑÿ≠ÿØŸäŸÇÿ© ÿßŸÑÿ≥ÿ±Ÿäÿ©"],
            storyTypes: ["Comedy", "Adventure", "Mystery", "Fantasy"],
            storyTypesAr: ["ŸÉŸàŸÖŸäÿØŸäÿß", "ŸÖÿ∫ÿßŸÖÿ±ÿ©", "ÿ∫ŸÖŸàÿ∂", "ÿÆŸäÿßŸÑ"],
            characters: [
                "Jack the boy",
                "Junior the dog",
                "Grandma",
                "A brave girl",
                "A funny cat",
                "A wise owl"
            ],
            charactersAr: ["ÿ¨ÿßŸÉ ÿßŸÑŸàŸÑÿØ", "ÿ¨ŸàŸÜŸäŸàÿ± ÿßŸÑŸÉŸÑÿ®", "ÿßŸÑÿ¨ÿØÿ©", "ŸÅÿ™ÿßÿ© ÿ¥ÿ¨ÿßÿπÿ©", "ŸÇÿ∑ÿ© ŸÖÿ∂ÿ≠ŸÉÿ©", "ÿ®ŸàŸÖÿ© ÿ≠ŸÉŸäŸÖÿ©"],
            actIOptions: [
                "Jack loses his favorite hat while walking Junior in the park",
                "A boy finds a mysterious book in the library",
                "A girl discovers a hidden door in her house"
            ],
            actIOptionsAr: [
                "ŸäŸÅŸÇÿØ ÿ¨ÿßŸÉ ŸÇÿ®ÿπÿ™Ÿá ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸÖÿ¥Ÿä ŸÖÿπ ÿ¨ŸàŸÜŸäŸàÿ± ŸÅŸä ÿßŸÑÿ≠ÿØŸäŸÇÿ©",
                "Ÿäÿ¨ÿØ ÿµÿ®Ÿä ŸÉÿ™ÿßÿ®ÿßŸã ÿ∫ÿßŸÖÿ∂ÿßŸã ŸÅŸä ÿßŸÑŸÖŸÉÿ™ÿ®ÿ©",
                "ÿ™ŸÉÿ™ÿ¥ŸÅ ŸÅÿ™ÿßÿ© ÿ®ÿßÿ®ÿßŸã ŸÖÿÆŸÅŸäÿßŸã ŸÅŸä ŸÖŸÜÿ≤ŸÑŸáÿß"
            ],
            actIIOptions: [
                "Junior runs off chasing squirrels, and Jack finds a trail of hats leading to Grandma's house",
                "Strange things start happening when reading the book",
                "The door leads to a magical world with challenges"
            ],
            actIIOptionsAr: [
                "ŸäŸáÿ±ÿ® ÿ¨ŸàŸÜŸäŸàÿ± Ÿäÿ∑ÿßÿ±ÿØ ÿßŸÑÿ≥ŸÜÿßÿ¨ÿ®ÿå ŸàŸäÿ¨ÿØ ÿ¨ÿßŸÉ ÿ£ÿ´ÿ±ÿßŸã ŸÖŸÜ ÿßŸÑŸÇÿ®ÿπÿßÿ™",
                "ÿ™ÿ®ÿØÿ£ ÿ£ÿ¥Ÿäÿßÿ° ÿ∫ÿ±Ÿäÿ®ÿ© ŸÅŸä ÿßŸÑÿ≠ÿØŸàÿ´ ÿπŸÜÿØ ŸÇÿ±ÿßÿ°ÿ© ÿßŸÑŸÉÿ™ÿßÿ®",
                "Ÿäÿ§ÿØŸä ÿßŸÑÿ®ÿßÿ® ÿ•ŸÑŸâ ÿπÿßŸÑŸÖ ÿ≥ÿ≠ÿ±Ÿä ŸÖÿπ ÿ™ÿ≠ÿØŸäÿßÿ™"
            ],
            actIIIOptions: [
                "Jack discovers Grandma has been collecting hats for her art project, including his! They all laugh and make silly hat pictures together",
                "The boy learns the book's secret and everything returns to normal",
                "The girl defeats the final challenge and finds treasure"
            ],
            actIIIOptionsAr: [
                "ŸäŸÉÿ™ÿ¥ŸÅ ÿ¨ÿßŸÉ ÿ£ŸÜ ÿßŸÑÿ¨ÿØÿ© ŸÉÿßŸÜÿ™ ÿ™ÿ¨ŸÖÿπ ÿßŸÑŸÇÿ®ÿπÿßÿ™ ŸÑŸÖÿ¥ÿ±ŸàÿπŸáÿß ÿßŸÑŸÅŸÜŸä! Ÿäÿ∂ÿ≠ŸÉŸàŸÜ ÿ¨ŸÖŸäÿπÿßŸã",
                "Ÿäÿ™ÿπŸÑŸÖ ÿßŸÑÿµÿ®Ÿä ÿ≥ÿ± ÿßŸÑŸÉÿ™ÿßÿ® ŸàŸäÿπŸàÿØ ŸÉŸÑ ÿ¥Ÿäÿ° ÿ•ŸÑŸâ ÿ∑ÿ®Ÿäÿπÿ™Ÿá",
                "ÿ™Ÿáÿ≤ŸÖ ÿßŸÑŸÅÿ™ÿßÿ© ÿßŸÑÿ™ÿ≠ÿØŸä ÿßŸÑÿ£ÿÆŸäÿ± Ÿàÿ™ÿ¨ÿØ ÿßŸÑŸÉŸÜÿ≤"
            ]
        };

        const l9StructureQuiz = [
            {
                q: "How many acts are normally in a story?",
                qAr: "ŸÉŸÖ ÿπÿØÿØ ÿßŸÑŸÅÿµŸàŸÑ ÿπÿßÿØÿ© ŸÅŸä ÿßŸÑŸÇÿµÿ©ÿü",
                options: ["Two", "Three", "Four", "Five"],
                optionsAr: ["ÿßÿ´ŸÜÿßŸÜ", "ÿ´ŸÑÿßÿ´ÿ©", "ÿ£ÿ±ÿ®ÿπÿ©", "ÿÆŸÖÿ≥ÿ©"],
                answer: 1
            },
            {
                q: "In Act I, what do we meet?",
                qAr: "ŸÅŸä ÿßŸÑŸÅÿµŸÑ ÿßŸÑÿ£ŸàŸÑÿå ŸÖÿßÿ∞ÿß ŸÜŸÑÿ™ŸÇŸäÿü",
                options: ["The ending", "The main character and their world", "The villain", "The resolution"],
                optionsAr: ["ÿßŸÑŸÜŸáÿßŸäÿ©", "ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ŸàÿπÿßŸÑŸÖŸáŸÖ", "ÿßŸÑÿ¥ÿ±Ÿäÿ±", "ÿßŸÑÿ≠ŸÑ"],
                answer: 1
            },
            {
                q: "What happens in Act II?",
                qAr: "ŸÖÿßÿ∞ÿß Ÿäÿ≠ÿØÿ´ ŸÅŸä ÿßŸÑŸÅÿµŸÑ ÿßŸÑÿ´ÿßŸÜŸäÿü",
                options: [
                    "The story ends",
                    "Rising tension with more obstacles",
                    "We meet the characters",
                    "The resolution"
                ],
                optionsAr: ["ÿ™ŸÜÿ™ŸáŸä ÿßŸÑŸÇÿµÿ©", "ÿ™ÿµÿßÿπÿØ ÿßŸÑÿ™Ÿàÿ™ÿ± ŸÖÿπ ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿπŸÇÿ®ÿßÿ™", "ŸÜŸÑÿ™ŸÇŸä ÿ®ÿßŸÑÿ¥ÿÆÿµŸäÿßÿ™", "ÿßŸÑÿ≠ŸÑ"],
                answer: 1
            },
            {
                q: "What is the climax?",
                qAr: "ŸÖÿß ŸáŸä ÿßŸÑÿ∞ÿ±Ÿàÿ©ÿü",
                options: [
                    "The beginning of the story",
                    "The most important event in Act III",
                    "The middle of the story",
                    "When we meet characters"
                ],
                optionsAr: ["ÿ®ÿØÿßŸäÿ© ÿßŸÑŸÇÿµÿ©", "ÿßŸÑÿ≠ÿØÿ´ ÿßŸÑÿ£ŸáŸÖ ŸÅŸä ÿßŸÑŸÅÿµŸÑ ÿßŸÑÿ´ÿßŸÑÿ´", "ŸÖŸÜÿ™ÿµŸÅ ÿßŸÑŸÇÿµÿ©", "ÿπŸÜÿØŸÖÿß ŸÜŸÑÿ™ŸÇŸä ÿ®ÿßŸÑÿ¥ÿÆÿµŸäÿßÿ™"],
                answer: 1
            },
            {
                q: "What can you draw to plan a story?",
                qAr: "ŸÖÿßÿ∞ÿß ŸäŸÖŸÉŸÜŸÉ ÿ£ŸÜ ÿ™ÿ±ÿ≥ŸÖ ŸÑÿ™ÿÆÿ∑Ÿäÿ∑ ŸÇÿµÿ©ÿü",
                options: ["A storyboard", "A map", "A picture", "A poster"],
                optionsAr: ["ŸÖÿÆÿ∑ÿ∑ ÿßŸÑŸÇÿµÿ©", "ÿÆÿ±Ÿäÿ∑ÿ©", "ÿµŸàÿ±ÿ©", "ŸÖŸÑÿµŸÇ"],
                answer: 0
            }
        ];

        // ==================== LESSON 10: UNIT REVIEW DATA ====================

        const l10GameSquares = [
            { id: 1, color: "#fbbf24", q: "Name four kinds of stories", qAr: "ÿßÿ∞ŸÉÿ± ÿ£ÿ±ÿ®ÿπÿ© ÿ£ŸÜŸàÿßÿπ ŸÖŸÜ ÿßŸÑŸÇÿµÿµ", type: "checkbox", options: ["Comedy", "Horror", "Adventure", "Mystery", "Drama", "Fantasy", "Western", "Animation"], answer: [0,2,3,7], minSelect: 4 },
            { id: 2, color: "#f472b6", q: "Tell your partner what you were doing at 8 p.m. yesterday.", qAr: "ÿ£ÿÆÿ®ÿ± ÿ≤ŸÖŸäŸÑŸÉ ŸÖÿßÿ∞ÿß ŸÉŸÜÿ™ ÿ™ŸÅÿπŸÑ ŸÅŸä ÿßŸÑÿ≥ÿßÿπÿ© ÿßŸÑÿ´ÿßŸÖŸÜÿ© ŸÖÿ≥ÿßÿ° ÿ£ŸÖÿ≥", type: "dropdown", options: ["I was watching TV", "I was doing homework", "I was playing games", "I was sleeping", "I was eating dinner"], optionsAr: ["ŸÉŸÜÿ™ ÿ£ÿ¥ÿßŸáÿØ ÿßŸÑÿ™ŸÑŸÅÿßÿ≤", "ŸÉŸÜÿ™ ÿ£ÿπŸÖŸÑ ÿßŸÑŸàÿßÿ¨ÿ®", "ŸÉŸÜÿ™ ÿ£ŸÑÿπÿ®", "ŸÉŸÜÿ™ ŸÜÿßÿ¶ŸÖÿßŸã", "ŸÉŸÜÿ™ ÿ£ÿ™ŸÜÿßŸàŸÑ ÿßŸÑÿπÿ¥ÿßÿ°"] },
            { id: 3, color: "#f87171", q: "Give your partner a suggestion on how to study for an exam.", qAr: "ŸÇÿØŸÖ ŸÑÿ≤ŸÖŸäŸÑŸÉ ÿßŸÇÿ™ÿ±ÿßÿ≠ÿßŸã ÿ≠ŸàŸÑ ŸÉŸäŸÅŸäÿ© ÿßŸÑÿØÿ±ÿßÿ≥ÿ© ŸÑŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ", type: "dropdown", options: ["Why don't we make flashcards?", "How about studying together?", "What about reading our notes?", "Let's practice questions"], optionsAr: ["ŸÑŸÖÿßÿ∞ÿß ŸÑÿß ŸÜÿµŸÜÿπ ÿ®ÿ∑ÿßŸÇÿßÿ™ÿü", "ŸÖÿß ÿ±ÿ£ŸäŸÉ ÿ£ŸÜ ŸÜÿØÿ±ÿ≥ ŸÖÿπÿßŸãÿü", "ŸÖÿß ÿ±ÿ£ŸäŸÉ ÿ£ŸÜ ŸÜŸÇÿ±ÿ£ ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ŸÜÿßÿü", "ÿØÿπŸÜÿß ŸÜŸÖÿßÿ±ÿ≥ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ©"] },
            { id: 4, color: "#34d399", q: "Ask three people what they were doing at 8 p.m. last night and then tell your partner.", qAr: "ÿßÿ≥ÿ£ŸÑ ÿ´ŸÑÿßÿ´ÿ© ÿ£ÿ¥ÿÆÿßÿµ ŸÖÿßÿ∞ÿß ŸÉÿßŸÜŸàÿß ŸäŸÅÿπŸÑŸàŸÜ ŸÅŸä ÿßŸÑÿ≥ÿßÿπÿ© ÿßŸÑÿ´ÿßŸÖŸÜÿ© ŸÖÿ≥ÿßÿ° ÿ£ŸÖÿ≥ ÿ´ŸÖ ÿ£ÿÆÿ®ÿ± ÿ≤ŸÖŸäŸÑŸÉ", type: "multiple", options: ["Ahmed was watching a movie", "Sara was reading a book", "Ali was playing soccer", "Fatima was cooking"], optionsAr: ["ÿ£ÿ≠ŸÖÿØ ŸÉÿßŸÜ Ÿäÿ¥ÿßŸáÿØ ŸÅŸäŸÑŸÖÿßŸã", "ÿ≥ÿßÿ±ÿ© ŸÉÿßŸÜÿ™ ÿ™ŸÇÿ±ÿ£ ŸÉÿ™ÿßÿ®ÿßŸã", "ÿπŸÑŸä ŸÉÿßŸÜ ŸäŸÑÿπÿ® ŸÉÿ±ÿ© ÿßŸÑŸÇÿØŸÖ", "ŸÅÿßÿ∑ŸÖÿ© ŸÉÿßŸÜÿ™ ÿ™ÿ∑ÿ®ÿÆ"], minSelect: 3 },
            { id: 5, color: "#a78bfa", q: "Ask your partner what they were doing last Saturday afternoon.", qAr: "ÿßÿ≥ÿ£ŸÑ ÿ≤ŸÖŸäŸÑŸÉ: ŸÖÿßÿ∞ÿß ŸÉŸÜÿ™ ÿ™ŸÅÿπŸÑ ÿ®ÿπÿØ ÿ∏Ÿáÿ± ŸäŸàŸÖ ÿßŸÑÿ≥ÿ®ÿ™ ÿßŸÑŸÖÿßÿ∂Ÿäÿü", type: "dropdown", options: ["I was playing outside", "I was visiting family", "I was studying", "I was resting at home"], optionsAr: ["ŸÉŸÜÿ™ ÿ£ŸÑÿπÿ® ÿ®ÿßŸÑÿÆÿßÿ±ÿ¨", "ŸÉŸÜÿ™ ÿ£ÿ≤Ÿàÿ± ÿßŸÑÿπÿßÿ¶ŸÑÿ©", "ŸÉŸÜÿ™ ÿ£ÿØÿ±ÿ≥", "ŸÉŸÜÿ™ ÿ£ÿ±ÿ™ÿßÿ≠ ŸÅŸä ÿßŸÑŸÖŸÜÿ≤ŸÑ"] },
            { id: 6, color: "#60a5fa", q: "Complete the actions characters can do: w___, s___, l___", qAr: "ÿ£ŸÉŸÖŸÑ ÿßŸÑÿ£ŸÅÿπÿßŸÑ ÿßŸÑÿ™Ÿä ŸäŸÖŸÉŸÜ ÿ£ŸÜ ÿ™ŸÇŸàŸÖ ÿ®Ÿáÿß ÿßŸÑÿ¥ÿÆÿµŸäÿßÿ™", type: "fillGaps", words: ["walk", "sing", "laugh"], gaps: ["w___", "s___", "l___"] },
            { id: 7, color: "#f472b6", q: "Write three sentences about a movie scene you love.", qAr: "ÿßŸÉÿ™ÿ® ÿ´ŸÑÿßÿ´ ÿ¨ŸÖŸÑ ÿ≠ŸàŸÑ ŸÖÿ¥ŸáÿØ ŸÖŸÜ ŸÅŸäŸÑŸÖ ÿ™ÿ≠ÿ®Ÿá", type: "selectSentences", options: [
                "My favorite scene is when the hero saves the day.",
                "I love the part where they sing together.",
                "The funniest moment is when the character falls.",
                "The scariest scene is in the dark forest.",
                "I enjoyed the happy ending."
            ], optionsAr: [
                "ŸÖÿ¥ŸáÿØŸä ÿßŸÑŸÖŸÅÿ∂ŸÑ ÿπŸÜÿØŸÖÿß ŸäŸÜŸÇÿ∞ ÿßŸÑÿ®ÿ∑ŸÑ ÿßŸÑŸäŸàŸÖ",
                "ÿ£ÿ≠ÿ® ÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿ∞Ÿä Ÿäÿ∫ŸÜŸàŸÜ ŸÅŸäŸá ŸÖÿπÿßŸã",
                "ÿßŸÑŸÑÿ≠ÿ∏ÿ© ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ•ÿ∂ÿ≠ÿßŸÉÿßŸã ÿπŸÜÿØŸÖÿß ÿ™ÿ≥ŸÇÿ∑ ÿßŸÑÿ¥ÿÆÿµŸäÿ©",
                "ÿßŸÑŸÖÿ¥ŸáÿØ ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ±ÿπÿ®ÿßŸã ŸÅŸä ÿßŸÑÿ∫ÿßÿ®ÿ© ÿßŸÑŸÖÿ∏ŸÑŸÖÿ©",
                "ÿßÿ≥ÿ™ŸÖÿ™ÿπÿ™ ÿ®ÿßŸÑŸÜŸáÿßŸäÿ© ÿßŸÑÿ≥ÿπŸäÿØÿ©"
            ], minSelect: 3 },
            { id: 8, color: "#fbbf24", q: "Answer: What can you draw to plan a story?", qAr: "ÿ£ÿ¨ÿ®: ŸÖÿßÿ∞ÿß ŸäŸÖŸÉŸÜŸÉ ÿ£ŸÜ ÿ™ÿ±ÿ≥ŸÖ ŸÑÿ™ÿÆÿ∑Ÿäÿ∑ ŸÇÿµÿ©ÿü", type: "dropdown", options: ["A storyboard", "A map", "A poster", "A diagram"], optionsAr: ["ŸÖÿÆÿ∑ÿ∑ ÿßŸÑŸÇÿµÿ©", "ÿÆÿ±Ÿäÿ∑ÿ©", "ŸÖŸÑÿµŸÇ", "ÿ±ÿ≥ŸÖ ÿ®ŸäÿßŸÜŸä"], answer: 0 },
            { id: 9, color: "#60a5fa", q: "Answer: Who called Jayden on his phone?", qAr: "ÿ£ÿ¨ÿ®: ŸÖŸÜ ÿßÿ™ÿµŸÑ ÿπŸÑŸâ Ÿáÿßÿ™ŸÅŸáÿü", type: "dropdown", options: ["His friend", "His mother", "His teacher", "His brother"], optionsAr: ["ÿµÿØŸäŸÇŸá", "ŸàÿßŸÑÿØÿ™Ÿá", "ŸÖÿπŸÑŸÖŸá", "ÿ£ÿÆŸàŸá"], answer: 0 },
            { id: 10, color: "#f472b6", q: "Write three sentences about a book you dislike.", qAr: "ÿßŸÉÿ™ÿ® ÿ´ŸÑÿßÿ´ ÿ¨ŸÖŸÑ ÿ≠ŸàŸÑ ŸÉÿ™ÿßÿ® ŸÑÿß ÿ™ÿ≠ÿ®Ÿá", type: "selectSentences", options: [
                "I didn't like the slow pace.",
                "The characters were boring.",
                "The ending was disappointing.",
                "The story was confusing.",
                "It was too long."
            ], optionsAr: [
                "ŸÑŸÖ Ÿäÿπÿ¨ÿ®ŸÜŸä ÿßŸÑÿ•ŸäŸÇÿßÿπ ÿßŸÑÿ®ÿ∑Ÿäÿ°",
                "ÿßŸÑÿ¥ÿÆÿµŸäÿßÿ™ ŸÉÿßŸÜÿ™ ŸÖŸÖŸÑÿ©",
                "ÿßŸÑŸÜŸáÿßŸäÿ© ŸÉÿßŸÜÿ™ ŸÖÿÆŸäÿ®ÿ© ŸÑŸÑÿ¢ŸÖÿßŸÑ",
                "ÿßŸÑŸÇÿµÿ© ŸÉÿßŸÜÿ™ ŸÖÿ≠Ÿäÿ±ÿ©",
                "ŸÉÿßŸÜÿ™ ÿ∑ŸàŸäŸÑÿ© ÿ¨ÿØÿßŸã"
            ], minSelect: 3 },
            { id: 11, color: "#fbbf24", q: "Answer: What are the people in stories called?", qAr: "ÿ£ÿ¨ÿ®: ŸÖÿß ÿßÿ≥ŸÖ ÿßŸÑÿ£ÿ¥ÿÆÿßÿµ ŸÅŸä ÿßŸÑŸÇÿµÿµÿü", type: "dropdown", options: ["Characters", "Actors", "Heroes", "People"], optionsAr: ["ÿßŸÑÿ¥ÿÆÿµŸäÿßÿ™", "ÿßŸÑŸÖŸÖÿ´ŸÑŸàŸÜ", "ÿßŸÑÿ£ÿ®ÿ∑ÿßŸÑ", "ÿßŸÑŸÜÿßÿ≥"], answer: 0 },
            { id: 12, color: "#60a5fa", q: "In the movie blog, what is the blogger's favorite scene?", qAr: "ŸÅŸä ŸÖÿØŸàŸÜÿ© ÿßŸÑÿ£ŸÅŸÑÿßŸÖÿå ŸÖÿß ŸáŸà ÿßŸÑŸÖÿ¥ŸáÿØ ÿßŸÑŸÖŸÅÿ∂ŸÑ ŸÑÿØŸä ÿßŸÑŸÉÿßÿ™ÿ®ÿü", type: "dropdown", options: [
                "When Elsa sings 'Let It Go'",
                "The car chase",
                "The funny moment",
                "The sad ending"
            ], optionsAr: ["ÿπŸÜÿØŸÖÿß ÿ™ÿ∫ŸÜŸä ÿ•ŸÑÿ≥ÿß", "ŸÖÿ∑ÿßÿ±ÿØÿ© ÿßŸÑÿ≥Ÿäÿßÿ±ÿ©", "ÿßŸÑŸÑÿ≠ÿ∏ÿ© ÿßŸÑŸÖÿ∂ÿ≠ŸÉÿ©", "ÿßŸÑŸÜŸáÿßŸäÿ© ÿßŸÑÿ≠ÿ≤ŸäŸÜÿ©"], answer: 0 },
            { id: 13, color: "#34d399", q: "Answer: What two events happen in the third act of a story?", qAr: "ÿ£ÿ¨ÿ®: ŸÖÿß ÿßŸÑÿ≠ÿØÿ´ÿßŸÜ ÿßŸÑŸÑÿ∞ÿßŸÜ Ÿäÿ≠ÿØÿ´ÿßŸÜ ŸÅŸä ÿßŸÑŸÅÿµŸÑ ÿßŸÑÿ´ÿßŸÑÿ´ ŸÖŸÜ ÿßŸÑŸÇÿµÿ©ÿü", type: "checkbox", options: ["The climax", "The resolution", "Meeting characters", "Rising action"], optionsAr: ["ÿßŸÑÿ∞ÿ±Ÿàÿ©", "ÿßŸÑÿ≠ŸÑ", "ŸÑŸÇÿßÿ° ÿßŸÑÿ¥ÿÆÿµŸäÿßÿ™", "ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑŸÖÿ™ÿµÿßÿπÿØÿ©"], answer: [0, 1], minSelect: 2, maxSelect: 2 },
            { id: 14, color: "#f87171", q: "Ask your partner: What's your favorite type of story? Suggest a movie for them to watch.", qAr: "ÿßÿ≥ÿ£ŸÑ ÿ≤ŸÖŸäŸÑŸÉ: ŸÖÿß ŸÜŸàÿπ ÿßŸÑŸÇÿµÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑ ŸÑÿØŸäŸÉÿü ÿßŸÇÿ™ÿ±ÿ≠ ÿπŸÑŸäŸáŸÖ ŸÅŸäŸÑŸÖÿßŸã", type: "conversation", movieOptions: ["Frozen", "The Lion King", "Spiderman", "Toy Story"], movieOptionsAr: ["ŸÅÿ±Ÿàÿ≤ŸÜ", "ÿßŸÑÿ£ÿ≥ÿØ ÿßŸÑŸÖŸÑŸÉ", "ÿ≥ÿ®ÿßŸäÿØÿ±ŸÖÿßŸÜ", "ŸÇÿµÿ© ŸÑÿπÿ®ÿ©"] }
        ];

        document.addEventListener('DOMContentLoaded', () => {
             initLesson3();
             renderLesson4();
             renderLesson5();
             initLesson6();
             renderLesson7();
             renderLesson8();
             renderLesson9();
             renderLesson10();
        });

        // Switch Tab Function
        function switchTab(tabName) {
            // Hide all tab contents
            const allTabs = document.querySelectorAll('.tab-content');
            allTabs.forEach(tab => {
                tab.style.display = 'none';
                tab.classList.remove('active');
            });
            
            // Remove active class from all tab buttons  
            const allButtons = document.querySelectorAll('.nav-tab');
            allButtons.forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab content
            const tabMap = {
                'vocab': 'vocab-section',
                'reading': 'reading-section',
                'games': 'games-section',
                'quiz': 'quiz-section',
                'grammar': 'grammar-section',
                'lesson3': 'lesson3-section',
                'lesson4': 'lesson4-section',
                'lesson5': 'lesson5-section',
                'lesson6': 'lesson6-section',
                'lesson7': 'lesson7-section',
                'lesson8': 'lesson8-section',
                'lesson9': 'lesson9-section',
                'lesson10': 'lesson10-section'
            };
            
            const sectionId = tabMap[tabName];
            if (sectionId) {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.style.display = 'block';
                    section.classList.add('active');
                }
            }
            
            // Add active class to clicked button
            const activeButton = document.getElementById(`tab-${tabName}`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
        }

        // ... Existing Init 3 & 4 ...

        
         function renderLesson5() {
              // Steps
              const stepContainer = document.getElementById('l5-steps');
              stepContainer.innerHTML = storyboardSteps.map(s => `
                 <div class="vocab-card animate__animated animate__zoomIn" style="min-width:220px; text-align:center; padding:25px; box-shadow:0 8px 20px rgba(0,0,0,0.05);">
                     <div style="font-size:4rem; margin-bottom:15px;">${s.icon}</div>
                     <h3 style="color:var(--primary); font-size:1.6rem; margin-bottom:8px;">${s.title}</h3>
                     <p style="color:#666; margin-bottom:12px; font-family:'Tajawal'; font-size:1.3rem;">${s.ar}</p>
                     <div style="background:#f9fafb; padding:15px; border-radius:10px; font-size:1.2rem; color:#4a5568; line-height:1.6;">
                         ${s.detail}
                     </div>
                 </div>
              `).join('');
              
              // Vocab
              const vocabContainer = document.getElementById('l5-vocab-bar');
              vocabContainer.innerHTML = vocabListL5.map(w => `
                 <div class="vocab-chip animate__animated animate__fadeInUp" onclick="speak('${w.en}')" style="padding:15px 25px; font-size:1.3rem; border-color:var(--accent);">
                     <span style="font-size:1.8rem;">${w.icon}</span>
                     <strong>${w.en}</strong>
                     <span style="font-size:1.1rem; color:#777; margin-left:8px;">${w.ar}</span>
                     <button class="btn-icon small" style="width:30px; height:30px; font-size:1.1rem; margin-left:10px;" onclick="event.stopPropagation(); checkPronunciation('${w.en}', this)">üé§</button>
                 </div>
              `).join('');

              // Fill Story (Increased Font Size)
              const fillStoryContainer = document.getElementById('l5-fill-story');
              fillStoryContainer.innerHTML = fillStoryL5;
              fillStoryContainer.style.fontSize = "1.8rem"; // Explicitly larger
              fillStoryContainer.style.lineHeight = "2.5";

              // Populate Selects with larger font
              const l5Options = ["feel", "characters", "act", "alone", "decided", "appeared", "wished", "whisper", "end", "appear"];
              document.querySelectorAll('#l5-fill-story select').forEach(s => {
                  s.style.fontSize = "1.5rem"; // Dropdowns larger too
                  s.style.padding = "5px 10px";
                  let opts = `<option value="">Choose...</option>`;
                  l5Options.sort().forEach(w => {
                      opts += `<option value="${w}">${w}</option>`;
                  });
                  s.innerHTML = opts;
              });
         }

        window.checkL5Fill = function() {
            let allCorrect = true;
             document.querySelectorAll('#l5-fill-story .d-select').forEach(inp => {
                if(inp.value === inp.dataset.ans) {
                    inp.classList.add('correct'); inp.classList.remove('wrong');
                    inp.style.borderColor = "var(--success)";
                    inp.style.background = "#d1fae5";
                } else {
                    inp.classList.add('wrong'); inp.classList.remove('correct');
                    inp.style.borderColor = "var(--danger)";
                    allCorrect = false;
                }
             });
             if(allCorrect) { showCelebration(); } else { playSound('error'); }
        };

        function initLesson6() {
            // Grammar Table with larger fonts
            const tbody = document.getElementById('l6-grammar-table');
            tbody.innerHTML = grammarSuggestionsData.map(r => `
                <tr>
                    <td style="font-size:1.2rem;"><b>${r.expr}</b></td>
                    <td><span class="grammar-badge" style="font-size:1.1rem;">${r.form.split(' ')[0]} ${r.form.split(' ')[1] || ''}</span></td>
                    <td style="font-size:1.2rem;">${r.ex}<br><span style="font-family:'Tajawal'; font-size:1.2rem; color:#000; font-weight:bold; display:block; margin-top:8px;">${r.ar}</span></td>
                    <td><button class="btn-icon" style="width:40px; height:40px; font-size:1.2rem;" onclick="speak('${r.ex.replace(/'/g, "\\'")}')">üîä</button></td>
                </tr>
            `).join('');

            // Read and Match Activity
            const matchContainer = document.getElementById('l6-match-container');
            let matchedPairs = {};
            
            matchContainer.innerHTML = `
                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:25px;">
                    ${readAndMatchL6.map((person, idx) => `
                        <div class="vocab-card animate__animated animate__fadeInUp" style="animation-delay:${idx*0.1}s; padding:25px; border-left:5px solid ${person.color};">
                            <div style="display:flex; align-items:center; gap:15px; margin-bottom:15px;">
                                <div style="width:60px; height:60px; border-radius:50%; background:${person.color}; display:flex; align-items:center; justify-content:center; font-size:2rem; color:white; font-weight:bold;">
                                    ${person.name.charAt(0)}
                                </div>
                                <div>
                                    <h4 style="margin:0; font-size:1.5rem; color:${person.color};">${person.name}</h4>
                                    <p style="margin:0; font-family:'Tajawal'; font-size:1.2rem; color:#000; font-weight:bold;">${person.nameAr}</p>
                                </div>
                            </div>
                            <div style="background:#f9fafb; padding:15px; border-radius:10px; margin-bottom:15px;">
                                <p style="font-size:1.3rem; font-weight:600; color:#2d3748; margin:0;">${person.question}</p>
                                <p style="font-family:'Tajawal'; font-size:1.3rem; color:#000; margin-top:8px; font-weight:bold;">${person.questionAr}</p>
                            </div>
                            <button class="btn-icon" onclick="speak('${person.question.replace(/'/g, "\\'")}')" style="width:45px; height:45px; font-size:1.3rem;">üîä</button>
                        </div>
                    `).join('')}
                </div>
            `;

            // Unscramble
            renderUnscrambleL6(0);
        }

        let currentUnscrambleL6Index = 0;
        
        function renderUnscrambleL6(idx) {
             const container = document.getElementById('l6-unscramble-container');
             if(idx >= unscrambleDataL6.length) {
                 container.innerHTML = `<div class="quiz-final"><h3 style="font-size:2rem;">All Sentences Correct! üåü</h3><button class="retry-btn" onclick="renderUnscrambleL6(0)">Play Again</button></div>`;
                 showCelebration();
                 return;
             }
             const data = unscrambleDataL6[idx];
             const shuffled = [...data.parts].sort(() => Math.random() - 0.5);
             
             container.innerHTML = `
                <div style="margin-bottom:25px; text-align:center;">
                    <span style="background:linear-gradient(135deg, var(--primary), var(--accent)); color:white; padding:10px 25px; border-radius:25px; font-size:1.2rem; font-weight:bold;">Sentence ${idx+1}/${unscrambleDataL6.length}</span>
                    <p style="font-family:'Tajawal'; font-size:1.4rem; color:#000; font-weight:bold; margin-top:15px; background:#fff3cd; padding:12px 20px; border-radius:12px; display:inline-block;">${data.ar}</p>
                </div>
                <div style="background:#f8f9fa; border:3px dashed #d1d5db; border-radius:15px; padding:25px; min-height:100px; margin-bottom:25px;">
                    <p style="font-size:1.1rem; color:#6b7280; margin-bottom:10px; font-weight:600;">‚¨áÔ∏è Arrange words here:</p>
                    <div class="scramble-slots" id="l6-slots-area" style="display:flex; flex-wrap:wrap; gap:12px; min-height:60px; align-items:center; justify-content:center;">
                        <!-- Drop Zone -->
                    </div>
                </div>
                <div style="background:#ffffff; border:2px solid #e5e7eb; border-radius:15px; padding:20px;">
                    <p style="font-size:1.1rem; color:#6b7280; margin-bottom:15px; font-weight:600;">üîº Available words:</p>
                    <div class="letter-pool" id="l6-word-pool" style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center;">
                        ${shuffled.map((word, i) => `<button class="tile-btn" onclick="moveWordL6(this, '${word}')" style="font-size:1.3rem; padding:14px 22px; background:#ffffff; border:2px solid var(--primary); color:var(--primary); font-weight:600; border-radius:12px; cursor:pointer; transition: all 0.3s; box-shadow:0 2px 8px rgba(0,0,0,0.1);" onmouseover="this.style.background='var(--primary)'; this.style.color='white';" onmouseout="this.style.background='#ffffff'; this.style.color='var(--primary)';">${word}</button>`).join('')}
                    </div>
                </div>
                <div style="margin-top:30px; text-align:center; display:flex; gap:15px; justify-content:center;">
                    <button class="btn-action" style="background:#64748b; font-size:1.2rem; padding:12px 30px;" onclick="resetL6(${idx})">Reset</button>
                    <button class="btn-action btn-play" style="font-size:1.2rem; padding:12px 30px;" onclick="checkL6(${idx})">Check</button>
                </div>
             `;
        }

        window.moveWordL6 = function(btn, word) {
             const slots = document.getElementById('l6-slots-area');
             const slot = document.createElement('div');
             slot.className = 'letter-slot filled';
             slot.style.cssText = 'background:linear-gradient(135deg, var(--success), #10b981); color:white; padding:14px 22px; border-radius:12px; font-size:1.3rem; font-weight:600; cursor:pointer; margin:5px; box-shadow:0 4px 12px rgba(16, 185, 129, 0.3); transition: all 0.3s;';
             slot.textContent = word;
             slot.onclick = function() { 
                 this.remove(); 
                 btn.style.display = 'inline-block'; 
                 playSound('pop');
             };
             slot.onmouseover = function() { this.style.transform = 'scale(1.05)'; };
             slot.onmouseout = function() { this.style.transform = 'scale(1)'; };
             slots.appendChild(slot);
             btn.style.display = 'none';
             playSound('pop');
        };

        window.resetL6 = function(idx) { renderUnscrambleL6(idx); };

        window.checkL6 = function(idx) {
             const slots = document.querySelectorAll('#l6-slots-area .letter-slot');
             const sentence = Array.from(slots).map(s => s.textContent).join(' ');
             const target = unscrambleDataL6[idx].target;
             
             // Remove punctuation for easier match? Or Strict? Strict is better for grammar.
             if(sentence === target) {
                 playSound('success');
                 document.getElementById('l6-slots-area').style.background = '#d1fae5';
                 setTimeout(() => {
                     renderUnscrambleL6(idx+1);
                 }, 1000);
             } else {
                 playSound('error');
                 document.getElementById('l6-slots-area').style.animation = 'shake 0.4s';
                 setTimeout(() => { document.getElementById('l6-slots-area').style.animation = ''; }, 400);
             }
        };

        // ==================== LESSON 7: READING ====================

        function renderLesson7() {
            // 1. Pre-Reading Questions
            const preContainer = document.getElementById('l7-pre-questions');
            preContainer.innerHTML = l7PreQuestions.map((q, i) => `
                <div class="vocab-card animate__animated animate__fadeInUp" style="animation-delay:${i*0.1}s; padding:25px;">
                    <p style="font-size:1.4rem; font-weight:600; color:var(--primary); margin-bottom:10px;">${q.q}</p>
                    <p style="font-family:'Tajawal'; font-size:1.3rem; color:#000; font-weight:bold; margin-bottom:15px;">${q.qAr}</p>
                    <div style="background:#f9fafb; padding:15px; border-radius:10px; border-left:4px solid var(--success);">
                        <p style="font-size:1.3rem; color:#2d3748; margin:0;"><strong>Answer:</strong> ${q.answer}</p>
                        <p style="font-family:'Tajawal'; font-size:1.2rem; color:#666; margin-top:8px;">${q.answerAr}</p>
                    </div>
                    <button class="btn-icon" onclick="speak('${q.q.replace(/'/g, "\\'")}', 1)" style="margin-top:10px; width:45px; height:45px; font-size:1.3rem;">üîä</button>
                </div>
            `).join('');

            // 2. Reading Passage
            const passageContainer = document.getElementById('l7-reading-passage');
            passageContainer.innerHTML = l7ReadingPassage + `
                <div style="text-align:center; margin-top:25px;">
                    <button class="btn-action btn-play" onclick="speak(document.getElementById('l7-reading-passage').innerText, 0.9)" style="font-size:1.2rem; padding:12px 30px;">üîä Listen to Passage</button>
                </div>
            `;

            // 3. Read and Complete
            const completeContainer = document.getElementById('l7-complete-activity');
            completeContainer.innerHTML = `
                <div style="display:grid; gap:20px;">
                    ${l7CompleteSentences.map((s, i) => `
                        <div class="vocab-card" style="padding:20px;">
                            <p style="font-size:1.3rem; font-weight:600; color:#2d3748; margin-bottom:10px;">${i+1}. ${s.text}</p>
                            <p style="font-family:'Tajawal'; font-size:1.2rem; color:#000; font-weight:bold; margin-bottom:15px;">${s.ar}</p>
                            <div style="display:flex; flex-direction:column; gap:10px;">
                                ${s.options.map((opt, oi) => `
                                    <label class="quiz-option-label" style="display:flex; align-items:center; padding:12px; border:2px solid #e5e7eb; border-radius:10px; cursor:pointer; font-size:1.2rem; transition: all 0.3s;" onmouseover="this.style.borderColor='var(--primary)'; this.style.background='#f0f9ff';" onmouseout="if(!this.querySelector('input').checked) { this.style.borderColor='#e5e7eb'; this.style.background='white'; }">
                                        <input type="radio" name="l7-complete-${i}" value="${oi}" style="margin-right:10px; width:20px; height:20px;" ${oi === s.answer ? `data-correct="true"` : ''}>
                                        <span>${opt}</span>
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
                <div style="text-align:center; margin-top:25px;">
                    <button class="btn-action btn-play" onclick="checkL7Complete()" style="font-size:1.2rem; padding:12px 35px;">Check Answers</button>
                </div>
            `;

            // 4. Speed Reading Challenge
            renderSpeedReading(0);

            // 5. Comprehension Quiz
            const quizContainer = document.getElementById('l7-quiz-container');
            quizContainer.innerHTML = `
                <div style="display:grid; gap:25px;">
                    ${l7Quiz.map((q, i) => `
                        <div class="vocab-card" style="padding:25px;">
                            <div style="display:flex; justify-content:space-between; align-items:start; margin-bottom:15px;">
                                <div style="flex:1;">
                                    <p style="font-size:1.4rem; font-weight:600; color:var(--primary); margin-bottom:8px;">${i+1}. ${q.q}</p>
                                    <p style="font-family:'Tajawal'; font-size:1.3rem; color:#000; font-weight:bold;">${q.qAr}</p>
                                </div>
                                <button class="btn-icon small" onclick="speak('${q.q.replace(/'/g, "\\'")}', 1)" style="width:40px; height:40px; font-size:1.2rem;">üîä</button>
                            </div>
                            <div style="display:grid; gap:12px;">
                                ${q.options.map((opt, oi) => `
                                    <label class="l7-quiz-option" data-qid="${i}" style="display:block; padding:15px; border:2px solid #e5e7eb; border-radius:10px; cursor:pointer; transition: all 0.3s;" onmouseover="if(!this.classList.contains('selected')) {this.style.borderColor='var(--primary)'; this.style.background='#f0f9ff';}" onmouseout="if(!this.classList.contains('selected')) {this.style.borderColor='#e5e7eb'; this.style.background='white';}">
                                        <input type="radio" name="l7-q${i}" value="${oi}" style="margin-right:10px; width:18px; height:18px;" onchange="this.closest('.vocab-card').querySelectorAll('.l7-quiz-option').forEach(el => el.classList.remove('selected')); this.parentElement.classList.add('selected'); this.parentElement.style.borderColor='var(--accent)'; this.parentElement.style.background='#fef3c7';" ${oi === q.answer ? `data-correct="true"` : ''}>
                                        <span style="font-size:1.2rem; color:#2d3748;">${opt}</span>
                                        <span style="font-family:'Tajawal'; font-size:1.1rem; color:#666; margin-left:10px;">(${q.optionsAr[oi]})</span>
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
                <div id="l7-quiz-result" style="margin-top:25px; text-align:center;"></div>
                <div style="text-align:center; margin-top:25px;">
                    <button class="btn-action btn-play" onclick="checkL7Quiz()" style="font-size:1.3rem; padding:15px 40px;">üìù Check Quiz</button>
                </div>
            `;

            // 6. Post-Reading Discussion
            const postContainer = document.getElementById('l7-post-questions');
            postContainer.innerHTML = l7PostQuestions.map((q, i) => `
                <div class="vocab-card animate__animated animate__fadeInUp" style="animation-delay:${i*0.1}s; padding:25px; margin-bottom:20px;">
                    <p style="font-size:1.4rem; font-weight:600; color:var(--primary); margin-bottom:10px;">${q.q}</p>
                    <p style="font-family:'Tajawal'; font-size:1.3rem; color:#000; font-weight:bold; margin-bottom:15px;">${q.qAr}</p>
                    <div style="background:#e0f2fe; padding:20px; border-radius:10px; border-left:4px solid var(--primary);">
                        <p style="font-size:1.3rem; color:#2d3748; margin:0; line-height:1.8;"><strong>Sample Answer:</strong> ${q.answer}</p>
                        <p style="font-family:'Tajawal'; font-size:1.2rem; color:#000; font-weight:bold; margin-top:10px;">${q.answerAr}</p>
                    </div>
                    <button class="btn-icon" onclick="speak('${q.answer.replace(/'/g, "\\'")}', 1)" style="margin-top:10px; width:45px; height:45px; font-size:1.3rem;">üîä</button>
                </div>
            `).join('');
        }

        // Speed Reading Timer
        let speedTimer = null;
        function renderSpeedReading(idx) {
            const container = document.getElementById('l7-speed-reading');
            if (idx >= l7SpeedReading.length) {
                container.innerHTML = `
                    <div class="quiz-final animate__animated animate__bounceIn">
                        <h3 style="font-size:2rem; color:var(--success);">‚ö° Challenge Complete! üéâ</h3>
                        <p style="font-size:1.3rem; color:#666;">Great job on the speed reading!</p>
                        <button class="retry-btn" onclick="renderSpeedReading(0)">Try Again</button>
                    </div>
                `;
                return;
            }

            const challenge = l7SpeedReading[idx];
            container.innerHTML = `
                <div style="max-width:800px; margin:0 auto; padding:30px; background:#ffffff; border-radius:15px; box-shadow:0 4px 15px rgba(0,0,0,0.05);">
                    <div style="margin-bottom:20px;">
                        <span style="background:linear-gradient(135deg, #f59e0b, #d97706); color:white; padding:10px 20px; border-radius:20px; font-size:1.1rem; font-weight:bold;">Challenge ${idx+1}/${l7SpeedReading.length}</span>
                    </div>
                    <p style="font-family:'Tajawal'; font-size:1.4rem; color:#000; font-weight:bold; background:#fff3cd; padding:15px; border-radius:10px; margin-bottom:20px;">${challenge.ar}</p>
                    <div id="l7-speed-timer" style="font-size:4rem; font-weight:bold; color:var(--danger); margin:30px 0; animation: pulse 1s infinite;">${challenge.time}</div>
                    <p id="l7-speed-text" style="font-size:1.4rem; line-height:2; color:#2d3748; margin-bottom:25px; padding:20px; background:#f9fafb; border-radius:10px; display:none;">${challenge.text}</p>
                    <div style="display:flex; gap:15px; justify-content:center; align-items:center;">
                        <button class="btn-action btn-play" onclick="startSpeedTimer(${idx})" id="start-speed-btn" style="font-size:1.2rem; padding:12px 30px;">‚ñ∂Ô∏è Start Reading</button>
                        <button class="btn-icon" onclick="speak('${challenge.text.replace(/'/g, "\\'")}', 1)" style="width:50px; height:50px; font-size:1.5rem;">üîä</button>
                        <button class="btn-icon" onclick="checkPronunciation('${challenge.text.substring(0, 50).replace(/'/g, "\\'")}', this)" style="width:50px; height:50px; font-size:1.5rem;">üé§</button>
                    </div>
                </div>
            `;
        }

        window.startSpeedTimer = function(idx) {
            const challenge = l7SpeedReading[idx];
            let timeLeft = challenge.time;
            const timerDisplay = document.getElementById('l7-speed-timer');
            const textDisplay = document.getElementById('l7-speed-text');
            const startBtn = document.getElementById('start-speed-btn');
            
            textDisplay.style.display = 'block';
            startBtn.disabled = true;
            startBtn.style.opacity = '0.5';
            
            if (speedTimer) clearInterval(speedTimer);
            
            speedTimer = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(speedTimer);
                    timerDisplay.textContent = "‚è∞ Time's Up!";
                    timerDisplay.style.fontSize = '2.5rem';
                    timerDisplay.style.color = 'var(--danger)';
                    playSound('complete');
                    
                    setTimeout(() => {
                        renderSpeedReading(idx + 1);
                    }, 2000);
                }
            }, 1000);
        };

        // Check Complete Activity
        window.checkL7Complete = function() {
            let correct = 0;
            l7CompleteSentences.forEach((s, i) => {
                const selected = document.querySelector(`input[name="l7-complete-${i}"]:checked`);
                const labels = document.querySelectorAll(`input[name="l7-complete-${i}"]`);
                
                labels.forEach(input => {
                    const label = input.parentElement;
                    label.style.pointerEvents = 'none';
                    
                    if (input.dataset.correct === 'true') {
                        label.style.borderColor = 'var(--success)';
                        label.style.background = '#d1fae5';
                        if (input.checked) correct++;
                    } else if (input.checked) {
                        label.style.borderColor = 'var(--danger)';
                        label.style.background = '#fee2e2';
                    }
                });
            });
            
            if (correct === l7CompleteSentences.length) {
                showCelebration();
                playSound('success');
            }
        };

        // Check Quiz
        window.checkL7Quiz = function() {
            let correct = 0;
            let total = l7Quiz.length;
            
            l7Quiz.forEach((q, i) => {
                const selected = document.querySelector(`input[name="l7-q${i}"]:checked`);
                const labels = document.querySelectorAll(`input[name="l7-q${i}"]`);
                
                labels.forEach(input => {
                    const label = input.parentElement;
                    label.style.pointerEvents = 'none';
                    
                    if (input.dataset.correct === 'true') {
                        label.style.borderColor = 'var(--success)';
                        label.style.background = '#d1fae5';
                        label.style.fontWeight = 'bold';
                        if (input.checked) correct++;
                    } else if (input.checked) {
                        label.style.borderColor = 'var(--danger)';
                        label.style.background = '#fee2e2';
                    }
                });
            });
            
            const score = Math.round((correct / total) * 100);
            const resultContainer = document.getElementById('l7-quiz-result');
            
            let message = '';
            let messageAr = '';
            let emoji = '';
            
            if (score >= 90) {
                message = 'Excellent work! You understood the text very well!';
                messageAr = 'ÿπŸÖŸÑ ŸÖŸÖÿ™ÿßÿ≤! ŸÑŸÇÿØ ŸÅŸáŸÖÿ™ ÿßŸÑŸÜÿµ ÿ¨ŸäÿØÿßŸã ÿ¨ÿØÿßŸã!';
                emoji = 'üåü';
                showCelebration();
            } else if (score >= 70) {
                message = 'Great job! Keep practicing!';
                messageAr = 'ÿπŸÖŸÑ ÿ±ÿßÿ¶ÿπ! ÿßÿ≥ÿ™ŸÖÿ± ŸÅŸä ÿßŸÑÿ™ÿØÿ±Ÿäÿ®!';
                emoji = 'üëè';
            } else {
                message = 'Good try! Read the passage again and try once more!';
                messageAr = 'ŸÖÿ≠ÿßŸàŸÑÿ© ÿ¨ŸäÿØÿ©! ÿßŸÇÿ±ÿ£ ÿßŸÑŸÖŸÇÿ∑ÿπ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ Ÿàÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ!';
                emoji = 'üí™';
            }
            
            resultContainer.innerHTML = `
                <div class="animate__animated animate__bounceIn" style="background:linear-gradient(135deg, var(--primary), var(--accent)); color:white; padding:25px; border-radius:15px; box-shadow:0 6px 20px rgba(0,0,0,0.15);">
                    <h3 style="font-size:2rem; margin-bottom:15px;">${emoji} Your Score: ${correct}/${total} (${score}%)</h3>
                    <p style="font-size:1.3rem; margin-bottom:8px;">${message}</p>
                    <p style="font-family:'Tajawal'; font-size:1.4rem; font-weight:bold;">${messageAr}</p>
                </div>
            `;
            
            playSound(score >= 70 ? 'success' : 'error');
        };

        // ==================== LESSON 8: WORD WORK RENDERING ====================

        function renderLesson8() {
            // 1. Vocabulary Table
            const vocabTableContainer = document.getElementById('l8-vocab-table-container');
            vocabTableContainer.innerHTML = `
                <div style="overflow-x:auto;">
                    <table style="width:100%; border-collapse:collapse; background:white; border-radius:15px; overflow:hidden; box-shadow:0 4px 15px rgba(0,0,0,0.05);">
                        <thead>
                            <tr style="background:linear-gradient(135deg, var(--primary), var(--primary-dark)); color:white;">
                                <th style="padding:20px; font-size:1.4rem; text-align:center; border-right:2px solid rgba(255,255,255,0.2);">#</th>
                                <th style="padding:20px; font-size:1.4rem; border-right:2px solid rgba(255,255,255,0.2);">Word<br><span style="font-family:'Tajawal'; font-size:1.2rem;">ÿßŸÑŸÉŸÑŸÖÿ©</span></th>
                                <th style="padding:20px; font-size:1.4rem; border-right:2px solid rgba(255,255,255,0.2);">Word Class<br><span style="font-family:'Tajawal'; font-size:1.2rem;">ŸÜŸàÿπ ÿßŸÑŸÉŸÑŸÖÿ©</span></th>
                                <th style="padding:20px; font-size:1.4rem;">Meaning<br><span style="font-family:'Tajawal'; font-size:1.2rem;">ÿßŸÑŸÖÿπŸÜŸâ</span></th>
                                <th style="padding:20px; font-size:1.4rem;">üîä</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${l8VocabChart.map((item, i) => `
                                <tr style="border-bottom:1px solid #e5e7eb; ${i % 2 === 0 ? 'background:#f9fafb;' : ''}">
                                    <td style="padding:18px; font-size:1.3rem; text-align:center; font-weight:bold; color:var(--primary); border-right:1px solid #e5e7eb;">${i+1}</td>
                                    <td style="padding:18px; border-right:1px solid #e5e7eb;">
                                        <div style="font-size:1.4rem; font-weight:600; color:#2d3748;">${item.word}</div>
                                        <div style="font-family:'Tajawal'; font-size:1.2rem; color:#000; font-weight:bold; margin-top:5px;">${item.wordAr}</div>
                                    </td>
                                    <td style="padding:18px; border-right:1px solid #e5e7eb;">
                                        <span style="background:#e0f2fe; color:#0369a1; padding:8px 16px; border-radius:20px; font-size:1.1rem; font-weight:600;">${item.class}</span>
                                        <div style="font-family:'Tajawal'; font-size:1.1rem; color:#666; margin-top:5px;">${item.classAr}</div>
                                    </td>
                                    <td style="padding:18px;">
                                        <div style="font-size:1.2rem; color:#2d3748; line-height:1.6;">${item.meaning}</div>
                                        <div style="font-family:'Tajawal'; font-size:1.2rem; color:#000; font-weight:bold; margin-top:5px;">${item.meaningAr}</div>
                                    </td>
                                    <td style="padding:18px; text-align:center;">
                                        <button class="btn-icon" onclick="speak('${item.word}', 1)" style="width:45px; height:45px; font-size:1.4rem;">üîä</button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;

            // 2. Movie Scene Questions
            const sceneQuestionsContainer = document.getElementById('l8-scene-questions');
            sceneQuestionsContainer.innerHTML = `
                <div style="display:grid; gap:25px;">
                    ${l8SceneQuestions.map((q, i) => `
                        <div class="vocab-card" style="padding:25px;">
                            <p style="font-size:1.4rem; font-weight:600; color:var(--primary); margin-bottom:8px;">${q.q}</p>
                            <p style="font-family:'Tajawal'; font-size:1.3rem; color:#000; font-weight:bold; margin-bottom:15px;">${q.qAr}</p>
                            <select id=" l8-scene-q${i}" style="width:100%; padding:15px; font-size:1.3rem; border:2px solid #e5e7eb; border-radius:10px; background:white; cursor:pointer; transition:all 0.3s;" onchange="this.style.borderColor='var(--success)'; this.style.background='#d1fae5';">
                                <option value="">Choose your answer / ÿßÿÆÿ™ÿ± ÿ•ÿ¨ÿßÿ®ÿ™ŸÉ</option>
                                ${q.options.map((opt, oi) => `<option value="${oi}">${opt} (${q.optionsAr[oi]})</option>`).join('')}
                            </select>
                        </div>
                    `).join('')}
                </div>
            `;

            // 3. Blog Post Builder
            const blogBuilderContainer = document.getElementById('l8-blog-builder');
            blogBuilderContainer.innerHTML = `
                <div style="display:grid; grid-template-columns:2fr 1fr; gap:30px;">
                    <div style="background:white; padding:30px; border-radius:15px; box-shadow:0 4px 15px rgba(0,0,0,0.05);">
                        <h4 style="font-size:1.6rem; color:var(--primary); margin-bottom:20px;">üìù Build Your Blog Post</h4>
                        
                        <div style="margin-bottom:20px;">
                            <label style="font-size:1.2rem; font-weight:600; color:#2d3748; display:block; margin-bottom:8px;">My favorite movie scene is from:</label>
                            <select id="l8-blog-movie" style="width:100%; padding:15px; font-size:1.3rem; border:2px solid #e5e7eb; border-radius:10px;">
                                <option value="">Select a movie</option>
                                ${l8BlogOptions.movies.map((m, i) => `<option value="${i}">${m} (${l8BlogOptions.moviesAr[i]})</option>`).join('')}
                            </select>
                        </div>

                        <div style="margin-bottom:20px;">
                            <label style="font-size:1.2rem; font-weight:600; color:#2d3748; display:block; margin-bottom:8px;">My favorite scene is:</label>
                            <select id="l8-blog-scene" style="width:100%; padding:15px; font-size:1.3rem; border:2px solid #e5e7eb; border-radius:10px;">
                                <option value="">Select a scene</option>
                                ${l8BlogOptions.sceneDescriptions.map((s, i) => `<option value="${i}">${s} (${l8BlogOptions.sceneDescriptionsAr[i]})</option>`).join('')}
                            </select>
                        </div>

                        <div style="margin-bottom:20px;">
                            <label style="font-size:1.2rem; font-weight:600; color:#2d3748; display:block; margin-bottom:8px;">What I loved was:</label>
                            <select id="l8-blog-loved" style="width:100%; padding:15px; font-size:1.3rem; border:2px solid #e5e7eb; border-radius:10px;">
                                <option value="">Select what you loved</option>
                                ${l8BlogOptions.whatLoved.map((w, i) => `<option value="${i}">${w} (${l8BlogOptions.whatLovedAr[i]})</option>`).join('')}
                            </select>
                        </div>

                        <div style="margin-bottom:20px;">
                            <label style="font-size:1.2rem; font-weight:600; color:#2d3748; display:block; margin-bottom:8px;">One thing I didn't like:</label>
                            <select id="l8-blog-disliked" style="width:100%; padding:15px; font-size:1.3rem; border:2px solid #e5e7eb; border-radius:10px;">
                                <option value="">Select what you didn't like</option>
                                ${l8BlogOptions.whatDisliked.map((w, i) => `<option value="${i}">${w} (${l8BlogOptions.whatDislikedAr[i]})</option>`).join('')}
                            </select>
                        </div>

                        <button class="btn-action btn-play" onclick="generateBlogPost()" style="width:100%; padding:15px; font-size:1.3rem; margin-top:20px;">‚ú® Generate Blog Post</button>
                    </div>

                    <div style="background:#e0f2fe; padding:20px; border-radius:15px; border-left:4px solid var(--primary);">
                        <h4 style="font-size:1.4rem; color:var(--primary); margin-bottom:15px;">üí° Useful Expressions</h4>
                        ${l8UsefulExpressions.map(expr => `
                            <div style="background:white; padding:12px; border-radius:8px; margin-bottom:10px; font-size:1.2rem; color:#2d3748; box-shadow:0 2px 5px rgba(0,0,0,0.05);">
                                ${expr}
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div id="l8-blog-result" style="margin-top:30px;"></div>
            `;
        }

        window.generateBlogPost = function() {
            const movieIdx = document.getElementById('l8-blog-movie').value;
            const sceneIdx = document.getElementById('l8-blog-scene').value;
            const lovedIdx = document.getElementById('l8-blog-loved').value;
            const dislikedIdx = document.getElementById('l8-blog-disliked').value;

            if (!movieIdx || !sceneIdx || !lovedIdx || !dislikedIdx) {
                alert('Please select all options! / Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿ¨ŸÖŸäÿπ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™!');
                return;
            }

            const blogPost = `
                <div class="animate__animated animate__fadeIn" style="background:white; padding:30px; border-radius:15px; box-shadow:0 4px 15px rgba(0,0,0,0.1);">
                    <h3 style="color:var(--primary); font-size:2rem; margin-bottom:20px;">üì∞ My Movie Blog Post</h3>
                    <div style="font-size:1.3rem; line-height:2; color:#2d3748;">
                        <p>My favorite movie scene is from <strong>${l8BlogOptions.movies[movieIdx]}</strong>. My favorite scene is <strong>${l8BlogOptions.sceneDescriptions[sceneIdx]}</strong>. What I loved was <strong>${l8BlogOptions.whatLoved[lovedIdx]}</strong>. One thing I didn't like was <strong>${l8BlogOptions.whatDisliked[dislikedIdx]}</strong>. But it's still a great movie!</p>
                    </div>
                    <button class="btn-icon" onclick="speak(document.querySelector('#l8-blog-result p').innerText, 1)" style="margin-top:20px; padding:12px 25px; font-size:1.2rem;">üîä Listen to your blog post</button>
                </div>
            `;
            document.getElementById('l8-blog-result').innerHTML = blogPost;
            showCelebration();
            playSound('success');
        };

        // ==================== LESSON 9: STORY STRUCTURE RENDERING ====================

        function renderLesson9() {
            // 1. Three Acts Infographic
            const threeActsContainer = document.getElementById('l9-three-acts-info');
            threeActsContainer.innerHTML = `
                <div style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding:40px; border-radius:20px; margin-bottom:30px;">
                    <h3 style="color:white; font-size:2.2rem; text-align:center; margin-bottom:10px;">üé¢ The Writing Roller Coaster</h3>
                    <p style="color:white; font-family:'Tajawal'; font-size:1.5rem; text-align:center; font-weight:bold;">ŸÇÿ∑ÿßÿ± ÿßŸÑŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ≥ÿ±Ÿäÿπ</p>
                </div>

                <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); gap:25px; margin-bottom:30px;">
                    ${l9ThreeActs.map((act, i) => `
                        <div class="vocab-card animate__animated animate__fadeInUp" style="animation-delay:${i*0.15}s; padding:30px; border-left:5px solid ${act.color};">
                            <div style="font-size:4rem; text-align:center; margin-bottom:15px;">${act.icon}</div>
                            <h4 style="font-size:1.8rem; color:${act.color}; margin-bottom:8px;">${act.act}</h4>
                            <p style="font-family:'Tajawal'; font-size:1.4rem; color:#000; font-weight:bold; margin-bottom:15px;">${act.actAr}</p>
                            <h5 style="font-size:1.3rem; color:#2d3748; font-weight:600; margin-bottom:8px;">${act.title}</h5>
                            <p style="font-family:'Tajawal'; font-size:1.2rem; color:#000; font-weight:bold; margin-bottom:15px;">${act.titleAr}</p>
                            <p style="font-size:1.2rem; color:#4b5563; line-height:1.8;">${act.description}</p>
                            <p style="font-family:'Tajawal'; font-size:1.2rem; color:#000; font-weight:bold; margin-top:10px; line-height:1.8;">${act.descriptionAr}</p>
                        </div>
                    `).join('')}
                </div>
            `;

            // 2. Story Planner
            const storyPlannerContainer = document.getElementById('l9-story-planner');
            storyPlannerContainer.innerHTML = `
                <div style="background:white; padding:35px; border-radius:15px; box-shadow:0 4px 15px rgba(0,0,0,0.05);">
                    <div style="margin-bottom:25px;">
                        <label style="font-size:1.3rem; font-weight:600; color:var(--primary); display:block; margin-bottom:10px;">üìñ Story Name / ÿßÿ≥ŸÖ ÿßŸÑŸÇÿµÿ©:</label>
                        <select id="l9-story-name" style="width:100%; padding:15px; font-size:1.3rem; border:2px solid #e5e7eb; border-radius:10px;">
                            <option value="">Choose a story name</option>
                            ${l9StoryPlannerOptions.storyNames.map((n, i) => `<option value="${i}">${n} (${l9StoryPlannerOptions.storyNamesAr[i]})</option>`).join('')}
                        </select>
                    </div>

                    <div style="margin-bottom:25px;">
                        <label style="font-size:1.3rem; font-weight:600; color:var(--primary); display:block; margin-bottom:10px;">üé≠ Type of Story / ŸÜŸàÿπ ÿßŸÑŸÇÿµÿ©:</label>
                        <select id="l9-story-type" style="width:100%; padding:15px; font-size:1.3rem; border:2px solid #e5e7eb; border-radius:10px;">
                            <option value="">Choose story type</option>
                            ${l9StoryPlannerOptions.storyTypes.map((t, i) => `<option value="${i}">${t} (${l9StoryPlannerOptions.storyTypesAr[i]})</option>`).join('')}
                        </select>
                    </div>

                    <div style="margin-bottom:25px;">
                        <label style="font-size:1.3rem; font-weight:600; color:var(--primary); display:block; margin-bottom:10px;">üë• Characters / ÿßŸÑÿ¥ÿÆÿµŸäÿßÿ™ (select multiple):</label>
                        ${l9StoryPlannerOptions.characters.map((c, i) => `
                            <label style="display:inline-flex; align-items:center; padding:10px 15px; margin:5px; background:#f3f4f6; border:2px solid #e5e7eb; border-radius:10px; cursor:pointer; font-size:1.2rem; transition:all 0.3s;" onchange="this.style.background=this.querySelector('input').checked ? '#d1fae5' : '#f3f4f6'; this.style.borderColor=this.querySelector('input').checked ? 'var(--success)' : '#e5e7eb';">
                                <input type="checkbox" name="l9-characters" value="${i}" style="margin-right:8px; width:20px; height:20px;">
                                ${c} (${l9StoryPlannerOptions.charactersAr[i]})
                            </label>
                        `).join('')}
                    </div>

                    <div style="background:#d1fae5; padding:20px; border-radius:10px; border-left:4px solid #10b981; margin-bottom:20px;">
                        <h5 style="font-size:1.4rem; color:#10b981; margin-bottom:12px;">üé¨ Act I - What happens?</h5>
                        <select id="l9-act1" style="width:100%; padding:15px; font-size:1.2rem; border:2px solid #10b981; border-radius:10px; background:white;">
                            <option value="">Choose Act I event</option>
                            ${l9StoryPlannerOptions.actIOptions.map((opt, i) => `<option value="${i}">${opt.substring(0, 60)}... (${l9StoryPlannerOptions.actIOptionsAr[i]})</option>`).join('')}
                        </select>
                    </div>

                    <div style="background:#fee2e2; padding:20px; border-radius:10px; border-left:4px solid #ef4444; margin-bottom:20px;">
                        <h5 style="font-size:1.4rem; color:#ef4444; margin-bottom:12px;">‚ö° Act II - What happens?</h5>
                        <select id="l9-act2" style="width:100%; padding:15px; font-size:1.2rem; border:2px solid #ef4444; border-radius:10px; background:white;">
                            <option value="">Choose Act II event</option>
                            ${l9StoryPlannerOptions.actIIOptions.map((opt, i) => `<option value="${i}">${opt.substring(0, 60)}... (${l9StoryPlannerOptions.actIIOptionsAr[i]})</option>`).join('')}
                        </select>
                    </div>

                    <div style="background:#dbeafe; padding:20px; border-radius:10px; border-left:4px solid #3b82f6; margin-bottom:20px;">
                        <h5 style="font-size:1.4rem; color:#3b82f6; margin-bottom:12px;">üèÜ Act III - What happens?</h5>
                        <select id="l9-act3" style="width:100%; padding:15px; font-size:1.2rem; border:2px solid #3b82f6; border-radius:10px; background:white;">
                            <option value="">Choose Act III event</option>
                            ${l9StoryPlannerOptions.actIIIOptions.map((opt, i) => `<option value="${i}">${opt.substring(0, 60)}... (${l9StoryPlannerOptions.actIIIOptionsAr[i]})</option>`).join('')}
                        </select>
                    </div>

                    <button class="btn-action btn-play" onclick="showStoryPlan()" style="width:100%; padding:18px; font-size:1.4rem; margin-top:20px;">üìù Show My Story Plan</button>
                </div>

                <div id="l9-story-result" style="margin-top:30px;"></div>
            `;

            // 3. Story Structure Quiz
            const structureQuizContainer = document.getElementById('l9-structure-quiz');
            structureQuizContainer.innerHTML = `
                <div style="display:grid; gap:25px;">
                    ${l9StructureQuiz.map((q, i) => `
                        <div class="vocab-card" style="padding:25px;">
                            <div style="display:flex; justify-content:space-between; align-items:start; margin-bottom:15px;">
                                <div style="flex:1;">
                                    <p style="font-size:1.4rem; font-weight:600; color:var(--primary); margin-bottom:8px;">${i+1}. ${q.q}</p>
                                    <p style="font-family:'Tajawal'; font-size:1.3rem; color:#000; font-weight:bold;">${q.qAr}</p>
                                </div>
                                <button class="btn-icon" onclick="speak('${q.q.replace(/'/g, "\\'")}', 1)" style="width:40px; height:40px; font-size:1.2rem;">üîä</button>
                            </div>
                            <div style="display:grid; gap:12px;">
                                ${q.options.map((opt, oi) => `
                                    <label class="l9-quiz-option" data-qid="${i}" style="display:block; padding:15px; border:2px solid #e5e7eb; border-radius:10px; cursor:pointer; transition:all 0.3s;" onmouseover="if(!this.classList.contains('selected')) {this.style.borderColor='var(--primary)'; this.style.background='#f0f9ff';}" onmouseout="if(!this.classList.contains('selected')) {this.style.borderColor='#e5e7eb'; this.style.background='white';}">
                                        <input type="radio" name="l9-q${i}" value="${oi}" style="margin-right:10px; width:18px; height:18px;" onchange="this.closest('.vocab-card').querySelectorAll('.l9-quiz-option').forEach(el => el.classList.remove('selected')); this.parentElement.classList.add('selected'); this.parentElement.style.borderColor='var(--accent)'; this.parentElement.style.background='#fef3c7';" ${oi === q.answer ? `data-correct="true"` : ''}>
                                        <span style="font-size:1.2rem; color:#2d3748;">${opt}</span>
                                        <span style="font-family:'Tajawal'; font-size:1.1rem; color:#666; margin-left:10px;">(${q.optionsAr[oi]})</span>
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
                <div id="l9-quiz-result" style="margin-top:25px; text-align:center;"></div>
                <div style="text-align:center; margin-top:25px;">
                    <button class="btn-action btn-play" onclick="checkL9Quiz()" style="font-size:1.3rem; padding:15px 40px;">üìù Check Quiz</button>
                </div>
            `;
        }

        window.showStoryPlan = function() {
            const storyName = document.getElementById('l9-story-name').value;
            const storyType = document.getElementById('l9-story-type').value;
            const characters = Array.from(document.querySelectorAll('input[name="l9-characters"]:checked')).map(cb => cb.value);
            const act1 = document.getElementById('l9-act1').value;
            const act2 = document.getElementById('l9-act2').value;
            const act3 = document.getElementById('l9-act3').value;

            if (!storyName || !storyType || characters.length === 0 || !act1 || !act2 || !act3) {
                alert('Please complete all fields! / Ÿäÿ±ÿ¨Ÿâ ÿ•ŸÉŸÖÿßŸÑ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ!');
                return;
            }

            const result = `
                <div class="animate__animated animate__fadeIn vocab-card" style="padding:35px;">
                    <h3 style="color:var(--primary); font-size:2rem; margin-bottom:20px;">üìñ Your Story Plan</h3>
                    <div style="font-size:1.3rem; line-height:2;">
                        <p><strong>Story Name:</strong> ${l9StoryPlannerOptions.storyNames[storyName]}</p>
                        <p><strong>Type:</strong> ${l9StoryPlannerOptions.storyTypes[storyType]}</p>
                        <p><strong>Characters:</strong> ${characters.map(idx => l9StoryPlannerOptions.characters[idx]).join(', ')}</p>
                        <div style="background:#d1fae5; padding:15px; border-radius:10px; margin:15px 0;">
                            <strong style="color:#10b981;">Act I:</strong> ${l9StoryPlannerOptions.actIOptions[act1]}
                        </div>
                        <div style="background:#fee2e2; padding:15px; border-radius:10px; margin:15px 0;">
                            <strong style="color:#ef4444;">Act II:</strong> ${l9StoryPlannerOptions.actIIOptions[act2]}
                        </div>
                        <div style="background:#dbeafe; padding:15px; border-radius:10px; margin:15px 0;">
                            <strong style="color:#3b82f6;">Act III:</strong> ${l9StoryPlannerOptions.actIIIOptions[act3]}
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('l9-story-result').innerHTML = result;
            showCelebration();
            playSound('success');
        };

        window.checkL9Quiz = function() {
            let correct = 0;
            let total = l9StructureQuiz.length;
            
            l9StructureQuiz.forEach((q, i) => {
                const labels = document.querySelectorAll(`input[name="l9-q${i}"]`);
                
                labels.forEach(input => {
                    const label = input.parentElement;
                    label.style.pointerEvents = 'none';
                    
                    if (input.dataset.correct === 'true') {
                        label.style.borderColor = 'var(--success)';
                        label.style.background = '#d1fae5';
                        label.style.fontWeight = 'bold';
                        if (input.checked) correct++;
                    } else if (input.checked) {
                        label.style.borderColor = 'var(--danger)';
                        label.style.background = '#fee2e2';
                    }
                });
            });
            
            const score = Math.round((correct / total) * 100);
            const resultContainer = document.getElementById('l9-quiz-result');
            
            let message = score >= 80 ? 'Excellent! You understand story structure!' : score >= 60 ? 'Good job! Keep practicing!' : 'Try again! Review the three acts.';
            let messageAr = score >= 80 ? 'ŸÖŸÖÿ™ÿßÿ≤! ÿ£ŸÜÿ™ ÿ™ŸÅŸáŸÖ ŸáŸäŸÉŸÑ ÿßŸÑŸÇÿµÿ©!' : score >= 60 ? 'ÿπŸÖŸÑ ÿ¨ŸäÿØ! ÿßÿ≥ÿ™ŸÖÿ± ŸÅŸä ÿßŸÑÿ™ÿØÿ±Ÿäÿ®!' : 'ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ! ÿ±ÿßÿ¨ÿπ ÿßŸÑŸÅÿµŸàŸÑ ÿßŸÑÿ´ŸÑÿßÿ´ÿ©';
            let emoji = score >= 80 ? 'üåü' : score >= 60 ? 'üëè' : 'üí™';
            
            resultContainer.innerHTML = `
                <div class="animate__animated animate__bounceIn" style="background:linear-gradient(135deg, var(--primary), var(--accent)); color:white; padding:25px; border-radius:15px;">
                    <h3 style="font-size:2rem; margin-bottom:15px;">${emoji} Score: ${correct}/${total} (${score}%)</h3>
                    <p style="font-size:1.3rem;">${message}</p>
                    <p style="font-family:'Tajawal'; font-size:1.4rem; font-weight:bold;">${messageAr}</p>
                </div>
            `;
            
            playSound(score >= 60 ? 'success' : 'error');
            if (score >= 80) showCelebration();
        };

        // ==================== LESSON 10: UNIT REVIEW RENDERING ====================

        function renderLesson10() {
            // Game Board
            const gameBoardContainer = document.getElementById('l10-game-board');
            gameBoardContainer.innerHTML = `
                <div style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding:30px; border-radius:20px; margin-bottom:30px;">
                    <h3 style="color:white; font-size:2.2rem; text-align:center; margin-bottom:10px;">üéÆ Unit Review Game Board</h3>
                    <p style="color:white; font-family:'Tajawal'; font-size:1.5rem; text-align:center; font-weight:bold;">ŸÑŸàÿ≠ÿ© ŸÑÿπÿ®ÿ© ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑŸàÿ≠ÿØÿ©</p>
                </div>

                <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); gap:20px;">
                    ${l10GameSquares.map((sq, i) => `
                        <div class="vocab-card animate__animated animate__fadeInUp" style="animation-delay:${(i%4)*0.1}s; padding:25px; border-left:5px solid ${sq.color}; cursor:pointer; transition:all 0.3s;" onclick="showGameQuestion(${sq.id})" onmouseover="this.style.transform='translateY(-5px) scale(1.02)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.15)';" onmouseout="this.style.transform=''; this.style.boxShadow='';">
                            <div style="background:${sq.color}; color:white; width:50px; height:50px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:1.8rem; font-weight:bold; margin-bottom:15px;">${sq.id}</div>
                            <p style="font-size:1.2rem; color:#2d3748; font-weight:600; margin-bottom:8px;">${sq.q.substring(0, 50)}...</p>
                            <p style="font-family:'Tajawal'; font-size:1.1rem; color:#000; font-weight:bold;">${sq.qAr.substring(0, 40)}...</p>
                        </div>
                    `).join('')}
                </div>

                <div id="l10-question-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000; align-items:center; justify-content:center; padding:20px;" onclick="if(event.target===this) this.style.display='none';">
                    <div style="background:white; padding:40px; border-radius:20px; max-width:800px; width:100%; max-height:90vh; overflow-y:auto;" onclick="event.stopPropagation();">
                        <div id="l10-question-content"></div>
                        <button onclick="document.getElementById('l10-question-modal').style.display='none';" style="margin-top:20px; padding:12px 30px; background:#64748b; color:white; border:none; border-radius:10px; font-size:1.2rem; cursor:pointer;">Close / ÿ•ÿ∫ŸÑÿßŸÇ</button>
                    </div>
                </div>
            `;

            // Project Creator
            const projectContainer = document.getElementById('l10-project');
            projectContainer.innerHTML = `
                <div class="vocab-card" style="padding:35px;">
                    <h4 style="font-size:1.8rem; color:var(--primary); margin-bottom:20px;">üé® Create Your Movie Poster</h4>
                    <p style="font-size:1.3rem; color:#2d3748; margin-bottom:25px; line-height:1.8;">Design a poster for your favorite movie or create a new one!</p>
                    <div style="display:grid; gap:20px;">
                        <div>
                            <label style="font-size:1.2rem; font-weight:600; display:block; margin-bottom:8px;">üé¨ Movie Title:</label>
                            <input type="text" id="l10-movie-title" placeholder="Enter movie title" style="width:100%; padding:15px; font-size:1.2rem; border:2px solid #e5e7eb; border-radius:10px;">
                        </div>
                        <div>
                            <label style="font-size:1.2rem; font-weight:600; display:block; margin-bottom:8px;">üé≠ Genre:</label>
                            <select id="l10-genre" style="width:100%; padding:15px; font-size:1.2rem; border:2px solid #e5e7eb; border-radius:10px;">
                                <option value="">Select genre</option>
                                <option value="Action">Action / ÿ≠ÿ±ŸÉÿ©</option>
                                <option value="Comedy">Comedy / ŸÉŸàŸÖŸäÿØŸäÿß</option>
                                <option value="Drama">Drama / ÿØÿ±ÿßŸÖÿß</option>
                                <option value="Fantasy">Fantasy / ÿÆŸäÿßŸÑ</option>
                                <option value="Horror">Horror / ÿ±ÿπÿ®</option>
                                <option value="Mystery">Mystery / ÿ∫ŸÖŸàÿ∂</option>
                            </select>
                        </div>
                        <button class="btn-action btn-play" onclick="showPosterPreview()" style="font-size:1.3rem; padding:15px;">üñºÔ∏è Preview Poster</button>
                    </div>
                    <div id="l10-poster-preview" style="margin-top:30px;"></div>
                </div>
            `;
        }

        window.showGameQuestion = function(id) {
            const square = l10GameSquares.find(s => s.id === id);
            const modal = document.getElementById('l10-question-modal');
            const content = document.getElementById('l10-question-content');
            
            let html = `
                <h3 style="color:var(--primary); font-size:1.8rem; margin-bottom:15px;">Question ${id}</h3>
                <p style="font-size:1.4rem; font-weight:600; margin-bottom:10px;">${square.q}</p>
                <p style="font-family:'Tajawal'; font-size:1.3rem; color:#000; font-weight:bold; margin-bottom:20px;">${square.qAr}</p>
            `;

            if (square.type === 'dropdown' || square.type === 'multiple') {
                html += `
                    <select id="l10-answer-${id}" style="width:100%; padding:15px; font-size:1.2rem; border:2px solid #e5e7eb; border-radius:10px;" ${square.type === 'multiple' ? 'multiple size="4"' : ''}>
                        ${square.options.map((opt, i) => `<option value="${i}">${opt} ${square.optionsAr ? `(${square.optionsAr[i]})` : ''}</option>`).join('')}
                    </select>
                    <button onclick="checkAnswer(${id})" class="btn-action btn-play" style="width:100%; margin-top:20px; font-size:1.2rem; padding:15px;">Check Answer</button>
                `;
            } else if (square.type === 'checkbox') {
                html += `<div style="display:grid; gap:12px;">
                    ${square.options.map((opt, i) => `
                        <label style="display:flex; align-items:center; padding:12px; border:2px solid #e5e7eb; border-radius:10px; cursor:pointer; font-size:1.2rem;">
                            <input type="checkbox" name="l10-cb-${id}" value="${i}" style="margin-right:10px; width:20px; height:20px;">
                            ${opt} ${square.optionsAr ? `(${square.optionsAr[i]})` : ''}
                        </label>
                    `).join('')}
                </div>
                <button onclick="checkCheckboxAnswer(${id})" class="btn-action btn-play" style="width:100%; margin-top:20px; font-size:1.2rem; padding:15px;">Check Answer</button>`;
            } else if (square.type === 'selectSentences') {
                html += `<div style="display:grid; gap:12px;">
                    ${square.options.map((opt, i) => `
                        <label style="display:flex; align-items:center; padding:12px; border:2px solid #e5e7eb; border-radius:10px; cursor:pointer; font-size:1.2rem;">
                            <input type="checkbox" name="l10-sent-${id}" value="${i}" style="margin-right:10px; width:20px; height:20px;">
                            ${opt} ${square.optionsAr ? `(${square.optionsAr[i]})` : ''}
                        </label>
                    `).join('')}
                </div>
               <p style="margin-top:10px; font-size:1.1rem; color:#666;">Select ${square.minSelect} sentences / ÿßÿÆÿ™ÿ± ${square.minSelect} ÿ¨ŸÖŸÑ</p>
                <button onclick="checkSentencesAnswer(${id})" class="btn-action btn-play" style="width:100%; margin-top:20px; font-size:1.2rem; padding:15px;">Check Answer</button>`;
            } else {
                html += `<p style="font-size:1.2rem; color:#666; font-style:italic;">This is a discussion/conversation activity. Talk with your partner!</p>`;
            }

            content.innerHTML = html;
            modal.style.display = 'flex';
        };

        window.checkAnswer = function(id) {
            alert('Answer saved! / ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©!');
            playSound('success');
        };

        window.checkCheckboxAnswer = function(id) {
            const square = l10GameSquares.find(s => s.id === id);
            const selected = Array.from(document.querySelectorAll(`input[name="l10-cb-${id}"]:checked`)).map(cb => parseInt(cb.value));
            
            if (selected.length === square.minSelect) {
                alert('Great job! / ÿπŸÖŸÑ ÿ±ÿßÿ¶ÿπ!');
                playSound('success');
                showCelebration();
            } else {
                alert(`Please select exactly ${square.minSelect} options! / Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ${square.minSelect} ÿÆŸäÿßÿ±ÿßÿ™ ÿ®ÿßŸÑÿ∂ÿ®ÿ∑!`);
            }
        };

        window.checkSentencesAnswer = function(id) {
            const square = l10GameSquares.find(s => s.id === id);
            const selected = Array.from(document.querySelectorAll(`input[name="l10-sent-${id}"]:checked`));
            
            if (selected.length === square.minSelect) {
                alert('Perfect! / ŸÖŸÖÿ™ÿßÿ≤!');
                playSound('success');
                showCelebration();
            } else {
                alert(`Please select ${square.minSelect} sentences! / Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ${square.minSelect} ÿ¨ŸÖŸÑ!`);
            }
        };

        window.showPosterPreview = function() {
            const title = document.getElementById('l10-movie-title').value;
            const genre = document.getElementById('l10-genre').value;

            if (!title || !genre) {
                alert('Please fill in all fields! / Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ!');
                return;
            }

            const preview = `
                <div class="animate__animated animate__zoomIn" style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding:40px; border-radius:20px; text-align:center; color:white;">
                    <div style="font-size:4rem; margin-bottom:20px;">üé¨</div>
                    <h2 style="font-size:2.5rem; margin-bottom:15px;">${title}</h2>
                    <p style="background:rgba(255,255,255,0.2); padding:10px 20px; border-radius:20px; display:inline-block; font-size:1.3rem; font-weight:bold;">${genre}</p>
                    <p style="margin-top:20px; font-size:1.2rem;">Coming Soon to Theaters!</p>
                </div>
            `;
            document.getElementById('l10-poster-preview').innerHTML = preview;
            showCelebration();
            playSound('success');
        };

    </script>
</body>
</html>
